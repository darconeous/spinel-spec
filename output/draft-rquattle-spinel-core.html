<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Spinel: A Protocol for Control and Management of Network Co-Processors</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Objectives">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Terminology">
<link href="#rfc.section.2" rel="Chapter" title="2 Data Representation">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Packed Unsigned Integers">
<link href="#rfc.section.3" rel="Chapter" title="3 Spinel Frames">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Frame Format">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Header">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 FLG: Flag">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 NLI: Network Link Identifier">
<link href="#rfc.section.3.2.3" rel="Chapter" title="3.2.3 TID: Transaction Identifier">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Command ID">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Payload">
<link href="#rfc.section.4" rel="Chapter" title="4 Property Overview">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Property Operators">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Property Types">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Single-Value Properties">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 Multiple-Value Properties">
<link href="#rfc.section.4.2.3" rel="Chapter" title="4.2.3 Stream Properties">
<link href="#rfc.section.5" rel="Chapter" title="5 Status Codes">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Reset Codes">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Status Code Ranges">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 How Status is Indicated">
<link href="#rfc.section.6" rel="Chapter" title="6 Commands">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 CMD 0: (AP -&gt; NCP) CMD_NOOP">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 CMD 1: (AP -&gt; NCP) CMD_RESET">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 CMD 2: (AP -&gt; NCP) CMD_PROP_VALUE_GET">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 CMD 3: (AP -&gt; NCP) CMD_PROP_VALUE_SET">
<link href="#rfc.section.6.5" rel="Chapter" title="6.5 CMD 4: (AP -&gt; NCP) CMD_PROP_VALUE_INSERT">
<link href="#rfc.section.6.6" rel="Chapter" title="6.6 CMD 5: (AP -&gt; NCP) CMD_PROP_VALUE_REMOVE">
<link href="#rfc.section.6.7" rel="Chapter" title="6.7 CMD 6: (NCP -&gt; AP) CMD_PROP_VALUE_IS">
<link href="#rfc.section.6.8" rel="Chapter" title="6.8 CMD 7: (NCP -&gt; AP) CMD_PROP_VALUE_INSERTED">
<link href="#rfc.section.6.9" rel="Chapter" title="6.9 CMD 8: (NCP -&gt; AP) CMD_PROP_VALUE_REMOVED">
<link href="#rfc.section.6.10" rel="Chapter" title="6.10 CMD 18: (AP -&gt; NCP) CMD_PEEK">
<link href="#rfc.section.6.11" rel="Chapter" title="6.11 CMD 19: (NCP -&gt; AP) CMD_PEEK_RET">
<link href="#rfc.section.6.12" rel="Chapter" title="6.12 CMD 20: (AP -&gt; NCP) CMD_POKE">
<link href="#rfc.section.6.13" rel="Chapter" title="6.13 CMD 21: (AP -&gt; NCP) CMD_PROP_VALUE_MULTI_GET">
<link href="#rfc.section.6.14" rel="Chapter" title="6.14 CMD 22: (AP -&gt; NCP) CMD_PROP_VALUE_MULTI_SET">
<link href="#rfc.section.6.15" rel="Chapter" title="6.15 CMD 23: (NCP -&gt; AP) CMD_PROP_VALUES_ARE">
<link href="#rfc.section.7" rel="Chapter" title="7 Capabilities">
<link href="#rfc.section.8" rel="Chapter" title="8 Properties">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Command Semantics">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Asynchronous Updates">
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Property Identifiers">
<link href="#rfc.section.8.4" rel="Chapter" title="8.4 Property Identifier Sections">
<link href="#rfc.section.8.5" rel="Chapter" title="8.5 Core Properties">
<link href="#rfc.section.8.5.1" rel="Chapter" title="8.5.1 PROP 0: PROP_LAST_STATUS">
<link href="#rfc.section.8.5.2" rel="Chapter" title="8.5.2 PROP 1: PROP_PROTOCOL_VERSION">
<link href="#rfc.section.8.5.3" rel="Chapter" title="8.5.3 PROP 2: PROP_NCP_VERSION">
<link href="#rfc.section.8.5.4" rel="Chapter" title="8.5.4 PROP 3: PROP_INTERFACE_TYPE">
<link href="#rfc.section.8.5.5" rel="Chapter" title="8.5.5 PROP 4: PROP_INTERFACE_VENDOR_ID">
<link href="#rfc.section.8.5.6" rel="Chapter" title="8.5.6 PROP 5: PROP_CAPS">
<link href="#rfc.section.8.5.7" rel="Chapter" title="8.5.7 PROP 6: PROP_INTERFACE_COUNT">
<link href="#rfc.section.8.5.8" rel="Chapter" title="8.5.8 PROP 7: PROP_POWER_STATE">
<link href="#rfc.section.8.5.9" rel="Chapter" title="8.5.9 PROP 8: PROP_HWADDR">
<link href="#rfc.section.8.5.10" rel="Chapter" title="8.5.10 PROP 9: PROP_LOCK">
<link href="#rfc.section.8.5.11" rel="Chapter" title="8.5.11 PROP 10: PROP_HOST_POWER_STATE">
<link href="#rfc.section.8.5.12" rel="Chapter" title="8.5.12 PROP 4104: PROP_UNSOL_UPDATE_FILTER">
<link href="#rfc.section.8.5.13" rel="Chapter" title="8.5.13 PROP 4105: PROP_UNSOL_UPDATE_LIST">
<link href="#rfc.section.8.6" rel="Chapter" title="8.6 Stream Properties">
<link href="#rfc.section.8.6.1" rel="Chapter" title="8.6.1 PROP 112: PROP_STREAM_DEBUG">
<link href="#rfc.section.8.6.2" rel="Chapter" title="8.6.2 PROP 113: PROP_STREAM_RAW">
<link href="#rfc.section.8.6.3" rel="Chapter" title="8.6.3 PROP 114: PROP_STREAM_NET">
<link href="#rfc.section.8.6.4" rel="Chapter" title="8.6.4 PROP 115: PROP_STREAM_NET_INSECURE">
<link href="#rfc.section.8.7" rel="Chapter" title="8.7 PHY Properties">
<link href="#rfc.section.8.7.1" rel="Chapter" title="8.7.1 PROP 32: PROP_PHY_ENABLED">
<link href="#rfc.section.8.7.2" rel="Chapter" title="8.7.2 PROP 33: PROP_PHY_CHAN">
<link href="#rfc.section.8.7.3" rel="Chapter" title="8.7.3 PROP 34: PROP_PHY_CHAN_SUPPORTED">
<link href="#rfc.section.8.7.4" rel="Chapter" title="8.7.4 PROP 35: PROP_PHY_FREQ">
<link href="#rfc.section.8.7.5" rel="Chapter" title="8.7.5 PROP 36: PROP_PHY_CCA_THRESHOLD">
<link href="#rfc.section.8.7.6" rel="Chapter" title="8.7.6 PROP 37: PROP_PHY_TX_POWER">
<link href="#rfc.section.8.7.7" rel="Chapter" title="8.7.7 PROP 38: PROP_PHY_RSSI">
<link href="#rfc.section.8.7.8" rel="Chapter" title="8.7.8 PROP 39: PROP_PHY_RX_SENSITIVITY">
<link href="#rfc.section.8.8" rel="Chapter" title="8.8 MAC Properties">
<link href="#rfc.section.8.8.1" rel="Chapter" title="8.8.1 PROP 48: PROP_MAC_SCAN_STATE">
<link href="#rfc.section.8.8.2" rel="Chapter" title="8.8.2 PROP 49: PROP_MAC_SCAN_MASK">
<link href="#rfc.section.8.8.3" rel="Chapter" title="8.8.3 PROP 50: PROP_MAC_SCAN_PERIOD">
<link href="#rfc.section.8.8.4" rel="Chapter" title="8.8.4 PROP 51: PROP_MAC_SCAN_BEACON">
<link href="#rfc.section.8.8.5" rel="Chapter" title="8.8.5 PROP 52: PROP_MAC_15_4_LADDR">
<link href="#rfc.section.8.8.6" rel="Chapter" title="8.8.6 PROP 53: PROP_MAC_15_4_SADDR">
<link href="#rfc.section.8.8.7" rel="Chapter" title="8.8.7 PROP 54: PROP_MAC_15_4_PANID">
<link href="#rfc.section.8.8.8" rel="Chapter" title="8.8.8 PROP 55: PROP_MAC_RAW_STREAM_ENABLED">
<link href="#rfc.section.8.8.9" rel="Chapter" title="8.8.9 PROP 56: PROP_MAC_PROMISCUOUS_MODE">
<link href="#rfc.section.8.8.10" rel="Chapter" title="8.8.10 PROP 57: PROP_MAC_ENERGY_SCAN_RESULT">
<link href="#rfc.section.8.8.11" rel="Chapter" title="8.8.11 PROP 58: PROP_MAC_DATA_POLL_PERIOD">
<link href="#rfc.section.8.8.12" rel="Chapter" title="8.8.12 PROP 4864: PROP_MAC_WHITELIST">
<link href="#rfc.section.8.8.13" rel="Chapter" title="8.8.13 PROP 4865: PROP_MAC_WHITELIST_ENABLED">
<link href="#rfc.section.8.8.14" rel="Chapter" title="8.8.14 PROP 4870: PROP_MAC_BLACKLIST">
<link href="#rfc.section.8.8.15" rel="Chapter" title="8.8.15 PROP 4871: PROP_MAC_BLACKLIST_ENABLED">
<link href="#rfc.section.8.8.16" rel="Chapter" title="8.8.16 PROP 4867: PROP_MAC_SRC_MATCH_ENABLED">
<link href="#rfc.section.8.8.17" rel="Chapter" title="8.8.17 PROP 4868: PROP_MAC_SRC_MATCH_SHORT_ADDRESSES">
<link href="#rfc.section.8.8.18" rel="Chapter" title="8.8.18 PROP 4869: PROP_MAC_SRC_MATCH_EXTENDED_ADDRESSES">
<link href="#rfc.section.8.9" rel="Chapter" title="8.9 NET Properties">
<link href="#rfc.section.8.9.1" rel="Chapter" title="8.9.1 PROP 65: PROP_NET_IF_UP">
<link href="#rfc.section.8.9.2" rel="Chapter" title="8.9.2 PROP 66: PROP_NET_STACK_UP">
<link href="#rfc.section.8.9.3" rel="Chapter" title="8.9.3 PROP 67: PROP_NET_ROLE">
<link href="#rfc.section.8.9.4" rel="Chapter" title="8.9.4 PROP 68: PROP_NET_NETWORK_NAME">
<link href="#rfc.section.8.9.5" rel="Chapter" title="8.9.5 PROP 69: PROP_NET_XPANID">
<link href="#rfc.section.8.9.6" rel="Chapter" title="8.9.6 PROP 70: PROP_NET_MASTER_KEY">
<link href="#rfc.section.8.9.7" rel="Chapter" title="8.9.7 PROP 71: PROP_NET_KEY_SEQUENCE_COUNTER">
<link href="#rfc.section.8.9.8" rel="Chapter" title="8.9.8 PROP 72: PROP_NET_PARTITION_ID">
<link href="#rfc.section.8.9.9" rel="Chapter" title="8.9.9 PROP 73: PROP_NET_REQUIRE_JOIN_EXISTING">
<link href="#rfc.section.8.9.10" rel="Chapter" title="8.9.10 PROP 74: PROP_NET_KEY_SWITCH_GUARDTIME">
<link href="#rfc.section.8.9.11" rel="Chapter" title="8.9.11 PROP 75: PROP_NET_PSKC">
<link href="#rfc.section.8.10" rel="Chapter" title="8.10 IPv6 Properties">
<link href="#rfc.section.8.10.1" rel="Chapter" title="8.10.1 PROP 96: PROP_IPV6_LL_ADDR">
<link href="#rfc.section.8.10.2" rel="Chapter" title="8.10.2 PROP 99: PROP_IPV6_ADDR_TABLE">
<link href="#rfc.section.8.10.3" rel="Chapter" title="8.10.3 PROP 101: PROP_IPv6_ICMP_PING_OFFLOAD">
<link href="#rfc.section.8.10.4" rel="Chapter" title="8.10.4 PROP 102: PROP_IPV6_MULTICAST_ADDR_TABLE">
<link href="#rfc.section.8.11" rel="Chapter" title="8.11 RETHINK IPv6 Properties">
<link href="#rfc.section.8.11.1" rel="Chapter" title="8.11.1 PROP XXXX: PROP_IPV6_UCAST_ADDRS">
<link href="#rfc.section.8.11.2" rel="Chapter" title="8.11.2 PROP XXXX: PROP_IPV6_HOST_UCAST_ADDRS">
<link href="#rfc.section.8.11.3" rel="Chapter" title="8.11.3 PROP XXXX: PROP_IPV6_ON_LINK_PREFIXES">
<link href="#rfc.section.8.11.4" rel="Chapter" title="8.11.4 PROP XXXX: PROP_IPV6_HOST_ON_LINK_PREFIXES">
<link href="#rfc.section.8.11.5" rel="Chapter" title="8.11.5 PROP XXXX: PROP_IPV6_MCAST_ADDRS">
<link href="#rfc.section.8.11.6" rel="Chapter" title="8.11.6 PROP XXXX: PROP_IPV6_HOST_MCAST_ADDRS">
<link href="#rfc.section.8.11.7" rel="Chapter" title="8.11.7 PROP XXXX: PROP_IPV6_ROUTES">
<link href="#rfc.section.8.11.8" rel="Chapter" title="8.11.8 PROP XXXX: PROP_IPV6_HOST_ROUTES">
<link href="#rfc.section.8.12" rel="Chapter" title="8.12 Debug Properties">
<link href="#rfc.section.8.12.1" rel="Chapter" title="8.12.1 PROP 16384: PROP_DEBUG_TEST_ASSERT">
<link href="#rfc.section.8.12.2" rel="Chapter" title="8.12.2 PROP 16385: PROP_DEBUG_NCP_LOG_LEVEL">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 Network Name Normalization">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 Raw Application Access">
<link href="#rfc.section.10" rel="Chapter" title="10 IANA Considerations">
<link href="#rfc.references" rel="Chapter" title="11 References">
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References">
<link href="#rfc.appendix.A" rel="Chapter" title="A Example Sessions">
<link href="#rfc.appendix.A.1" rel="Chapter" title="A.1 NCP Initialization">
<link href="#rfc.appendix.A.2" rel="Chapter" title="A.2 Attaching to a network">
<link href="#rfc.appendix.A.3" rel="Chapter" title="A.3 Detaching from a network">
<link href="#rfc.appendix.A.4" rel="Chapter" title="A.4 Attaching to a saved network">
<link href="#rfc.appendix.A.5" rel="Chapter" title="A.5 NCP Software Reset">
<link href="#rfc.appendix.B" rel="Chapter" title="B Recommended Framing Protocols">
<link href="#rfc.appendix.B.1" rel="Chapter" title="B.1 UART Recommendations">
<link href="#rfc.appendix.B.1.1" rel="Chapter" title="B.1.1 UART Bit Rate Detection">
<link href="#rfc.appendix.B.1.2" rel="Chapter" title="B.1.2 HDLC-Lite">
<link href="#rfc.appendix.B.2" rel="Chapter" title="B.2 SPI Recommendations">
<link href="#rfc.appendix.B.2.1" rel="Chapter" title="B.2.1 SPI Framing Protocol">
<link href="#rfc.appendix.B.3" rel="Chapter" title="B.3 I2C Recommendations">
<link href="#rfc.appendix.B.4" rel="Chapter" title="B.4 Native USB Recommendations">
<link href="#rfc.appendix.C" rel="Chapter" title="C Test Vectors">
<link href="#rfc.appendix.C.1" rel="Chapter" title="C.1 Test Vector: Packed Unsigned Integer">
<link href="#rfc.appendix.C.2" rel="Chapter" title="C.2 Test Vector: Reset Command">
<link href="#rfc.appendix.C.3" rel="Chapter" title="C.3 Test Vector: Reset Notification">
<link href="#rfc.appendix.C.4" rel="Chapter" title="C.4 Test Vector: Inbound IPv6 Packet">
<link href="#rfc.appendix.C.5" rel="Chapter" title="C.5 Test Vector: Outbound IPv6 Packet">
<link href="#rfc.appendix.D" rel="Chapter" title="D Comparison with other protocols">
<link href="#rfc.appendix.E" rel="Chapter" title="E Acknowledgments">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.6.2 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Quattlebaum, R. and J. Woodyatt, Ed." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-rquattle-spinel-core-c87731a-dirty" />
  <meta name="dct.issued" scheme="ISO8601" content="2017-11-1" />
  <meta name="dct.abstract" content="This document specifies the core of the Spinel host-controller protocol, which enables a general purpose application processor to manage, control, and offload IPv6 network functions to a Network Co-Processor (NCP) connected via a simple communication link(such as UART, SPI, or USB).  " />
  <meta name="description" content="This document specifies the core of the Spinel host-controller protocol, which enables a general purpose application processor to manage, control, and offload IPv6 network functions to a Network Co-Processor (NCP) connected via a simple communication link(such as UART, SPI, or USB).  " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">R. Quattlebaum</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">J. Woodyatt, Ed.</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Nest Labs, Inc.</td>
</tr>
<tr>
<td class="left">Expires: May 5, 2018</td>
<td class="right">November 1, 2017</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Spinel: A Protocol for Control and Management of Network Co-Processors<br />
  <span class="filename">draft-rquattle-spinel-core-c87731a-dirty</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document specifies the core of the Spinel host-controller protocol, which enables a general purpose application processor to manage, control, and offload IPv6 network functions to a Network Co-Processor (NCP) connected via a simple communication link(such as UART, SPI, or USB).  </p>
<p>Spinel was initially designed for use with Thread(R) network co-processors, but the core of the protocol is general purpose and intended to be easily adapted to other types of low-power IPv6 networking technologies.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 5, 2018.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2017 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<ul><li>1.1.   <a href="#rfc.section.1.1">Objectives</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Terminology</a>
</li>
</ul><li>2.   <a href="#rfc.section.2">Data Representation</a>
</li>
<ul><li>2.1.   <a href="#rfc.section.2.1">Packed Unsigned Integers</a>
</li>
</ul><li>3.   <a href="#rfc.section.3">Spinel Frames</a>
</li>
<ul><li>3.1.   <a href="#rfc.section.3.1">Frame Format</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Header</a>
</li>
<ul><li>3.2.1.   <a href="#rfc.section.3.2.1">FLG: Flag</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">NLI: Network Link Identifier</a>
</li>
<li>3.2.3.   <a href="#rfc.section.3.2.3">TID: Transaction Identifier</a>
</li>
</ul><li>3.3.   <a href="#rfc.section.3.3">Command ID</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Payload</a>
</li>
</ul><li>4.   <a href="#rfc.section.4">Property Overview</a>
</li>
<ul><li>4.1.   <a href="#rfc.section.4.1">Property Operators</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Property Types</a>
</li>
<ul><li>4.2.1.   <a href="#rfc.section.4.2.1">Single-Value Properties</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">Multiple-Value Properties</a>
</li>
<li>4.2.3.   <a href="#rfc.section.4.2.3">Stream Properties</a>
</li>
</ul></ul><li>5.   <a href="#rfc.section.5">Status Codes</a>
</li>
<ul><li>5.1.   <a href="#rfc.section.5.1">Reset Codes</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Status Code Ranges</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">How Status is Indicated</a>
</li>
</ul><li>6.   <a href="#rfc.section.6">Commands</a>
</li>
<ul><li>6.1.   <a href="#rfc.section.6.1">CMD 0: (AP -&gt; NCP) CMD_NOOP</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">CMD 1: (AP -&gt; NCP) CMD_RESET</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">CMD 2: (AP -&gt; NCP) CMD_PROP_VALUE_GET</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">CMD 3: (AP -&gt; NCP) CMD_PROP_VALUE_SET</a>
</li>
<li>6.5.   <a href="#rfc.section.6.5">CMD 4: (AP -&gt; NCP) CMD_PROP_VALUE_INSERT</a>
</li>
<li>6.6.   <a href="#rfc.section.6.6">CMD 5: (AP -&gt; NCP) CMD_PROP_VALUE_REMOVE</a>
</li>
<li>6.7.   <a href="#rfc.section.6.7">CMD 6: (NCP -&gt; AP) CMD_PROP_VALUE_IS</a>
</li>
<li>6.8.   <a href="#rfc.section.6.8">CMD 7: (NCP -&gt; AP) CMD_PROP_VALUE_INSERTED</a>
</li>
<li>6.9.   <a href="#rfc.section.6.9">CMD 8: (NCP -&gt; AP) CMD_PROP_VALUE_REMOVED</a>
</li>
<li>6.10.   <a href="#rfc.section.6.10">CMD 18: (AP -&gt; NCP) CMD_PEEK</a>
</li>
<li>6.11.   <a href="#rfc.section.6.11">CMD 19: (NCP -&gt; AP) CMD_PEEK_RET</a>
</li>
<li>6.12.   <a href="#rfc.section.6.12">CMD 20: (AP -&gt; NCP) CMD_POKE</a>
</li>
<li>6.13.   <a href="#rfc.section.6.13">CMD 21: (AP -&gt; NCP) CMD_PROP_VALUE_MULTI_GET</a>
</li>
<li>6.14.   <a href="#rfc.section.6.14">CMD 22: (AP -&gt; NCP) CMD_PROP_VALUE_MULTI_SET</a>
</li>
<li>6.15.   <a href="#rfc.section.6.15">CMD 23: (NCP -&gt; AP) CMD_PROP_VALUES_ARE</a>
</li>
</ul><li>7.   <a href="#rfc.section.7">Capabilities</a>
</li>
<li>8.   <a href="#rfc.section.8">Properties</a>
</li>
<ul><li>8.1.   <a href="#rfc.section.8.1">Command Semantics</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Asynchronous Updates</a>
</li>
<li>8.3.   <a href="#rfc.section.8.3">Property Identifiers</a>
</li>
<li>8.4.   <a href="#rfc.section.8.4">Property Identifier Sections</a>
</li>
<li>8.5.   <a href="#rfc.section.8.5">Core Properties</a>
</li>
<ul><li>8.5.1.   <a href="#rfc.section.8.5.1">PROP 0: PROP_LAST_STATUS</a>
</li>
<li>8.5.2.   <a href="#rfc.section.8.5.2">PROP 1: PROP_PROTOCOL_VERSION</a>
</li>
<li>8.5.3.   <a href="#rfc.section.8.5.3">PROP 2: PROP_NCP_VERSION</a>
</li>
<li>8.5.4.   <a href="#rfc.section.8.5.4">PROP 3: PROP_INTERFACE_TYPE</a>
</li>
<li>8.5.5.   <a href="#rfc.section.8.5.5">PROP 4: PROP_INTERFACE_VENDOR_ID</a>
</li>
<li>8.5.6.   <a href="#rfc.section.8.5.6">PROP 5: PROP_CAPS</a>
</li>
<li>8.5.7.   <a href="#rfc.section.8.5.7">PROP 6: PROP_INTERFACE_COUNT</a>
</li>
<li>8.5.8.   <a href="#rfc.section.8.5.8">PROP 7: PROP_POWER_STATE</a>
</li>
<li>8.5.9.   <a href="#rfc.section.8.5.9">PROP 8: PROP_HWADDR</a>
</li>
<li>8.5.10.   <a href="#rfc.section.8.5.10">PROP 9: PROP_LOCK</a>
</li>
<li>8.5.11.   <a href="#rfc.section.8.5.11">PROP 10: PROP_HOST_POWER_STATE</a>
</li>
<li>8.5.12.   <a href="#rfc.section.8.5.12">PROP 4104: PROP_UNSOL_UPDATE_FILTER</a>
</li>
<li>8.5.13.   <a href="#rfc.section.8.5.13">PROP 4105: PROP_UNSOL_UPDATE_LIST</a>
</li>
</ul><li>8.6.   <a href="#rfc.section.8.6">Stream Properties</a>
</li>
<ul><li>8.6.1.   <a href="#rfc.section.8.6.1">PROP 112: PROP_STREAM_DEBUG</a>
</li>
<li>8.6.2.   <a href="#rfc.section.8.6.2">PROP 113: PROP_STREAM_RAW</a>
</li>
<li>8.6.3.   <a href="#rfc.section.8.6.3">PROP 114: PROP_STREAM_NET</a>
</li>
<li>8.6.4.   <a href="#rfc.section.8.6.4">PROP 115: PROP_STREAM_NET_INSECURE</a>
</li>
</ul><li>8.7.   <a href="#rfc.section.8.7">PHY Properties</a>
</li>
<ul><li>8.7.1.   <a href="#rfc.section.8.7.1">PROP 32: PROP_PHY_ENABLED</a>
</li>
<li>8.7.2.   <a href="#rfc.section.8.7.2">PROP 33: PROP_PHY_CHAN</a>
</li>
<li>8.7.3.   <a href="#rfc.section.8.7.3">PROP 34: PROP_PHY_CHAN_SUPPORTED</a>
</li>
<li>8.7.4.   <a href="#rfc.section.8.7.4">PROP 35: PROP_PHY_FREQ</a>
</li>
<li>8.7.5.   <a href="#rfc.section.8.7.5">PROP 36: PROP_PHY_CCA_THRESHOLD</a>
</li>
<li>8.7.6.   <a href="#rfc.section.8.7.6">PROP 37: PROP_PHY_TX_POWER</a>
</li>
<li>8.7.7.   <a href="#rfc.section.8.7.7">PROP 38: PROP_PHY_RSSI</a>
</li>
<li>8.7.8.   <a href="#rfc.section.8.7.8">PROP 39: PROP_PHY_RX_SENSITIVITY</a>
</li>
</ul><li>8.8.   <a href="#rfc.section.8.8">MAC Properties</a>
</li>
<ul><li>8.8.1.   <a href="#rfc.section.8.8.1">PROP 48: PROP_MAC_SCAN_STATE</a>
</li>
<li>8.8.2.   <a href="#rfc.section.8.8.2">PROP 49: PROP_MAC_SCAN_MASK</a>
</li>
<li>8.8.3.   <a href="#rfc.section.8.8.3">PROP 50: PROP_MAC_SCAN_PERIOD</a>
</li>
<li>8.8.4.   <a href="#rfc.section.8.8.4">PROP 51: PROP_MAC_SCAN_BEACON</a>
</li>
<li>8.8.5.   <a href="#rfc.section.8.8.5">PROP 52: PROP_MAC_15_4_LADDR</a>
</li>
<li>8.8.6.   <a href="#rfc.section.8.8.6">PROP 53: PROP_MAC_15_4_SADDR</a>
</li>
<li>8.8.7.   <a href="#rfc.section.8.8.7">PROP 54: PROP_MAC_15_4_PANID</a>
</li>
<li>8.8.8.   <a href="#rfc.section.8.8.8">PROP 55: PROP_MAC_RAW_STREAM_ENABLED</a>
</li>
<li>8.8.9.   <a href="#rfc.section.8.8.9">PROP 56: PROP_MAC_PROMISCUOUS_MODE</a>
</li>
<li>8.8.10.   <a href="#rfc.section.8.8.10">PROP 57: PROP_MAC_ENERGY_SCAN_RESULT</a>
</li>
<li>8.8.11.   <a href="#rfc.section.8.8.11">PROP 58: PROP_MAC_DATA_POLL_PERIOD</a>
</li>
<li>8.8.12.   <a href="#rfc.section.8.8.12">PROP 4864: PROP_MAC_WHITELIST</a>
</li>
<li>8.8.13.   <a href="#rfc.section.8.8.13">PROP 4865: PROP_MAC_WHITELIST_ENABLED</a>
</li>
<li>8.8.14.   <a href="#rfc.section.8.8.14">PROP 4870: PROP_MAC_BLACKLIST</a>
</li>
<li>8.8.15.   <a href="#rfc.section.8.8.15">PROP 4871: PROP_MAC_BLACKLIST_ENABLED</a>
</li>
<li>8.8.16.   <a href="#rfc.section.8.8.16">PROP 4867: PROP_MAC_SRC_MATCH_ENABLED</a>
</li>
<li>8.8.17.   <a href="#rfc.section.8.8.17">PROP 4868: PROP_MAC_SRC_MATCH_SHORT_ADDRESSES</a>
</li>
<li>8.8.18.   <a href="#rfc.section.8.8.18">PROP 4869: PROP_MAC_SRC_MATCH_EXTENDED_ADDRESSES</a>
</li>
</ul><li>8.9.   <a href="#rfc.section.8.9">NET Properties</a>
</li>
<ul><li>8.9.1.   <a href="#rfc.section.8.9.1">PROP 65: PROP_NET_IF_UP</a>
</li>
<li>8.9.2.   <a href="#rfc.section.8.9.2">PROP 66: PROP_NET_STACK_UP</a>
</li>
<li>8.9.3.   <a href="#rfc.section.8.9.3">PROP 67: PROP_NET_ROLE</a>
</li>
<li>8.9.4.   <a href="#rfc.section.8.9.4">PROP 68: PROP_NET_NETWORK_NAME</a>
</li>
<li>8.9.5.   <a href="#rfc.section.8.9.5">PROP 69: PROP_NET_XPANID</a>
</li>
<li>8.9.6.   <a href="#rfc.section.8.9.6">PROP 70: PROP_NET_MASTER_KEY</a>
</li>
<li>8.9.7.   <a href="#rfc.section.8.9.7">PROP 71: PROP_NET_KEY_SEQUENCE_COUNTER</a>
</li>
<li>8.9.8.   <a href="#rfc.section.8.9.8">PROP 72: PROP_NET_PARTITION_ID</a>
</li>
<li>8.9.9.   <a href="#rfc.section.8.9.9">PROP 73: PROP_NET_REQUIRE_JOIN_EXISTING</a>
</li>
<li>8.9.10.   <a href="#rfc.section.8.9.10">PROP 74: PROP_NET_KEY_SWITCH_GUARDTIME</a>
</li>
<li>8.9.11.   <a href="#rfc.section.8.9.11">PROP 75: PROP_NET_PSKC</a>
</li>
</ul><li>8.10.   <a href="#rfc.section.8.10">IPv6 Properties</a>
</li>
<ul><li>8.10.1.   <a href="#rfc.section.8.10.1">PROP 96: PROP_IPV6_LL_ADDR</a>
</li>
<li>8.10.2.   <a href="#rfc.section.8.10.2">PROP 99: PROP_IPV6_ADDR_TABLE</a>
</li>
<li>8.10.3.   <a href="#rfc.section.8.10.3">PROP 101: PROP_IPv6_ICMP_PING_OFFLOAD</a>
</li>
<li>8.10.4.   <a href="#rfc.section.8.10.4">PROP 102: PROP_IPV6_MULTICAST_ADDR_TABLE</a>
</li>
</ul><li>8.11.   <a href="#rfc.section.8.11">RETHINK IPv6 Properties</a>
</li>
<ul><li>8.11.1.   <a href="#rfc.section.8.11.1">PROP XXXX: PROP_IPV6_UCAST_ADDRS</a>
</li>
<li>8.11.2.   <a href="#rfc.section.8.11.2">PROP XXXX: PROP_IPV6_HOST_UCAST_ADDRS</a>
</li>
<li>8.11.3.   <a href="#rfc.section.8.11.3">PROP XXXX: PROP_IPV6_ON_LINK_PREFIXES</a>
</li>
<li>8.11.4.   <a href="#rfc.section.8.11.4">PROP XXXX: PROP_IPV6_HOST_ON_LINK_PREFIXES</a>
</li>
<li>8.11.5.   <a href="#rfc.section.8.11.5">PROP XXXX: PROP_IPV6_MCAST_ADDRS</a>
</li>
<li>8.11.6.   <a href="#rfc.section.8.11.6">PROP XXXX: PROP_IPV6_HOST_MCAST_ADDRS</a>
</li>
<li>8.11.7.   <a href="#rfc.section.8.11.7">PROP XXXX: PROP_IPV6_ROUTES</a>
</li>
<li>8.11.8.   <a href="#rfc.section.8.11.8">PROP XXXX: PROP_IPV6_HOST_ROUTES</a>
</li>
</ul><li>8.12.   <a href="#rfc.section.8.12">Debug Properties</a>
</li>
<ul><li>8.12.1.   <a href="#rfc.section.8.12.1">PROP 16384: PROP_DEBUG_TEST_ASSERT</a>
</li>
<li>8.12.2.   <a href="#rfc.section.8.12.2">PROP 16385: PROP_DEBUG_NCP_LOG_LEVEL</a>
</li>
</ul></ul><li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<ul><li>9.1.   <a href="#rfc.section.9.1">Network Name Normalization</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">Raw Application Access</a>
</li>
</ul><li>10.   <a href="#rfc.section.10">IANA Considerations</a>
</li>
<li>11.   <a href="#rfc.references">References</a>
</li>
<ul><li>11.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li>Appendix A.   <a href="#rfc.appendix.A">Example Sessions</a>
</li>
<ul><li>A.1.   <a href="#rfc.appendix.A.1">NCP Initialization</a>
</li>
<li>A.2.   <a href="#rfc.appendix.A.2">Attaching to a network</a>
</li>
<li>A.3.   <a href="#rfc.appendix.A.3">Detaching from a network</a>
</li>
<li>A.4.   <a href="#rfc.appendix.A.4">Attaching to a saved network</a>
</li>
<li>A.5.   <a href="#rfc.appendix.A.5">NCP Software Reset</a>
</li>
</ul><li>Appendix B.   <a href="#rfc.appendix.B">Recommended Framing Protocols</a>
</li>
<ul><li>B.1.   <a href="#rfc.appendix.B.1">UART Recommendations</a>
</li>
<ul><li>B.1.1.   <a href="#rfc.appendix.B.1.1">UART Bit Rate Detection</a>
</li>
<li>B.1.2.   <a href="#rfc.appendix.B.1.2">HDLC-Lite</a>
</li>
</ul><li>B.2.   <a href="#rfc.appendix.B.2">SPI Recommendations</a>
</li>
<ul><li>B.2.1.   <a href="#rfc.appendix.B.2.1">SPI Framing Protocol</a>
</li>
</ul><li>B.3.   <a href="#rfc.appendix.B.3">I2C Recommendations</a>
</li>
<li>B.4.   <a href="#rfc.appendix.B.4">Native USB Recommendations</a>
</li>
</ul><li>Appendix C.   <a href="#rfc.appendix.C">Test Vectors</a>
</li>
<ul><li>C.1.   <a href="#rfc.appendix.C.1">Test Vector: Packed Unsigned Integer</a>
</li>
<li>C.2.   <a href="#rfc.appendix.C.2">Test Vector: Reset Command</a>
</li>
<li>C.3.   <a href="#rfc.appendix.C.3">Test Vector: Reset Notification</a>
</li>
<li>C.4.   <a href="#rfc.appendix.C.4">Test Vector: Inbound IPv6 Packet</a>
</li>
<li>C.5.   <a href="#rfc.appendix.C.5">Test Vector: Outbound IPv6 Packet</a>
</li>
</ul><li>Appendix D.   <a href="#rfc.appendix.D">Comparison with other protocols</a>
</li>
<li>Appendix E.   <a href="#rfc.appendix.E">Acknowledgments</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">IEEE 802.15.4 based low-power wireless networks are quickly becoming ubiquitous, and with the introduction of 6LoWPAN<a href="#RFC4944" class="xref">[RFC4944]</a>, IPv6<a href="#RFC8200" class="xref">[RFC8200]</a> connectivity is now possible on these networks.  6LoWPAN-based network technologies such as Thread(R) and ZigBee(R) IP additionally provide additional features such as network security, mesh-networking, and ultra-low-power operation. To fully realize low-power operation, a great deal of the IPv6 network and routing stack needs to be implemented directly on a NCP (Network Co-Processor). With that, we again find ourselves with a question of how best to communicate with and manage this new class of peripheral.  </p>
<p id="rfc.section.1.p.2">The problem of needing to communicate with and manage an NCP is not new: However, the current existing and proposed approaches have severe drawbacks (See <a href="#appendix-comparison" class="xref">Appendix D</a>).  </p>
<p id="rfc.section.1.p.3">Spinel is a host-controller protocol designed to address the drawbacks of existing protocols and lower implementation and deployment burdens by providing a standardized mechanism for the management and control of IPv6-based NCPs by general purpose Application Processors (AP).  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#objectives" id="objectives">Objectives</a>
</h1>
<p id="rfc.section.1.1.p.1">Spinel was designed to satisfy the following objectives: </p>
<p></p>

<ol>
<li>The protocol must allow for managing the network interface at the network layer.</li>
<li>The protocol must allow for multiple data streams, including IPv6 traffic, debug messages, and raw sniffed traffic.</li>
<li>The protocol must be link agnostic: should work efficiently over UART, SPI, USB or other busses and links.</li>
<li>The protocol must be relatively straightforward to understand and implement.</li>
<li>The protocol must gracefully handle the addition of new features and capabilities without necessarily breaking backward compatibility.</li>
<li>The protocol must support multiple conceptually independent network interfaces.</li>
<li>The protocol must be reasonably compact and lightweight.</li>
</ol>

<p> </p>
<p id="rfc.section.1.1.p.3">Beyond this core framework, properties and commands enable various common features of IPv6. In related and forthcoming documents, the Spinel protocol is extended to support NCP implementations for specific IPv6 link types, e.g. Thread(R).  </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#terminology" id="terminology">Terminology</a>
</h1>
<p id="rfc.section.1.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119" class="xref">[RFC2119]</a>.  </p>
<p id="rfc.section.1.2.p.2">The layout diagrams in this document that show encodings of data in byte sequences use the convention described in Guide for Internet Standards Writers <a href="#RFC2360" class="xref">[RFC2360]</a> section 3.1, Packet Diagrams.  Specifically, bits in bytes are indexed from most significant to least significant, and the least significant bit in a field representing an integer value more than one bit in length is the least significant bit of a the signed or unsigned number, as the case requires.  </p>
<p id="rfc.section.1.2.p.3">The term "byte" is used in its now-customary sense as a synonym for "byte".  </p>
<p id="rfc.section.1.2.p.4">Most multi-byte values are encoded in little-endian order (that is, most significant byte first). This is discussed in more detail in <a href="#data-representation" class="xref">Section 2</a>.  </p>
<p id="rfc.section.1.2.p.5">This specification makes use of the following terminology: </p>
<p><a id="CREF1" class="info">[CREF1]<span class="info">RQ: Alphabetize terminology before finalization.</span></a></p>
<p></p>

<dl>
<dt>AP</dt>
<dd style="margin-left: 8">
<br> Application Processor, the host processor to which the NCP is a peripheral.</dd>
<dt>FCS</dt>
<dd style="margin-left: 8">
<br> Final Checksum. Bytes added to the end of a packet to help determine if the packet was received without corruption.</dd>
<dt>NCP</dt>
<dd style="margin-left: 8">
<br> Network Control Processor.</dd>
<dt>NLI</dt>
<dd style="margin-left: 8">
<br> Network Link Identifier. May be a value between zero and three. See <a href="#nli-network-link-identifier" class="xref">Section 3.2.2</a> for more information.</dd>
<dt>PHY</dt>
<dd style="margin-left: 8">
<br> Physical layer. Refers to characteristics and parameters related to the physical implementation and operation of a networking medium.</dd>
<dt>PUI</dt>
<dd style="margin-left: 8">
<br> Packed Unsigned Integer. A way to serialize an unsigned integer using one, two, or three bytes. Used throughout the Spinel protocol. See <a href="#packed-unsigned-integer" class="xref">Section 2.1</a> for more information.</dd>
<dt>TID</dt>
<dd style="margin-left: 8">
<br> Transaction Identifier. May be a value between zero and fifteen. See <a href="#tid-transaction-identifier" class="xref">Section 3.2.3</a> for more information.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#data-representation" id="data-representation">Data Representation</a>
</h1>
<p id="rfc.section.2.p.1">Spinel, being a low-level protocol between two devices which are likely to have a little-endian architecture, uses little-endian representations exclusively for all integers smaller than four bytes. For implementation convenience, values larger than four bytes (EUI64, IPv6 addresses, etc) are stored as they are traditionally represented (typically big-endian).  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#packed-unsigned-integer" id="packed-unsigned-integer">Packed Unsigned Integers</a>
</h1>
<p id="rfc.section.2.1.p.1">Certain types of integers, such as command or property identifiers, usually have a value on the wire that is less than 127. However, in order to not preclude the use of values larger than 255, we would need to add an extra byte. Doing this would add an extra byte to all packets, which can add up in terms of bandwidth. To address this, Spinel uses Packed Unsigned Integers, or PUIs.  </p>
<p id="rfc.section.2.1.p.2">The PUI format used in Spinel is based on the <a href="https://www.w3.org/TR/exi/#encodingUnsignedInteger">unsigned integer format in EXI</a>, except that we limit the maximum value to the largest value that can be encoded to three bytes. The maximum value that can be encoded is 2,097,151.  </p>
<p id="rfc.section.2.1.p.3">For all values less than 127, the packed form of the number is simply a single byte which directly represents the number. For values larger than 127, the following process is used to encode the value: </p>
<p></p>

<ol>
<li>The unsigned integer is broken up into <em>n</em> 7-bit chunks and placed into <em>n</em> bytess, leaving the most significant bit of each byte unused.</li>
<li>Order the bytess from least-significant to most-significant.  (Little-endian)</li>
<li>Clear the most significant bit of the most significant byte. Set the least significant bit on all other bytes.</li>
</ol>

<p> </p>
<p id="rfc.section.2.1.p.5">Where <em>n</em> is the smallest number of 7-bit chunks you can use to represent the given value.  </p>
<p id="rfc.section.2.1.p.6">Take the value 1337, for example: </p>
<pre>
1337 =&gt; 0x0539
     =&gt; [39 0A]
     =&gt; [B9 0A]
</pre>
<p id="rfc.section.2.1.p.7">To decode the value, you collect the 7-bit chunks until you find an byte with the most significant bit clear.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#spinel-frames" id="spinel-frames">Spinel Frames</a>
</h1>
<p id="rfc.section.3.p.1">Spinel is a frame-based (rather than stream-based) protocol. Frames can be of any size between two bytes and MTU of the channel (which is RECOMMENDED to be at least 1300 bytes). Spinel frames SHALL be delivered reliably and in-order. It is the responsibility of the lower layer to make those guarantees.  </p>
<p id="rfc.section.3.p.2">The mechanism responsible for transporting frames between the AP and the NCP (while also ensuring both reliable and in-order delivery) is called the <em>framing mechanism</em>. While Spinel does not mandate any specific framing mechanism be used, the RECOMMENDED mechanisms are outlined in <a href="#appendix-framing" class="xref">Appendix B</a>. This layered approach privides a great deal of implementation flexibility.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#frame-format" id="frame-format">Frame Format</a>
</h1>
<p id="rfc.section.3.1.p.1">A Spinel frame is the concatenation of the following elements: </p>
<p></p>

<ul>
<li>A header comprising a single byte. (See <a href="#header-format" class="xref">Section 3.2</a>).</li>
<li>A command identifier. (See <a href="#commands" class="xref">Section 6</a>)</li>
<li>A command-defined payload, which may be empty.</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     HEADER    |  COMMAND ID   | PAYLOAD ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of a typical Spinel frame </p>
<p id="rfc.section.3.1.p.3">Since the size of the frame is a part of the framing mechanism, it is omitted from the frame.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#header-format" id="header-format">Header</a>
</h1>
<p id="rfc.section.3.2.p.1">The header byte is composed as follows: </p>
<pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
|  FLG  |  NLI  |      TID      |
+---+---+---+---+---+---+---+---+
</pre>
<p class="figure">Header Format </p>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> <a href="#flg-flag" id="flg-flag">FLG: Flag</a>
</h1>
<p id="rfc.section.3.2.1.p.1">The Flag (FLG) field in the two most significant bits of the header byte (<samp>FLG</samp>) is always set to the value two (or <samp>10</samp> in binary). Any frame received with these bits set to any other value SHALL NOT be considered a Spinel frame.  </p>
<p id="rfc.section.3.2.1.p.2">This convention allows Spinel to be line compatible with BTLE HCI. By defining the first two bit in this way we can disambiguate between Spinel frames and HCI frames (which always start with either <samp>0x01</samp> or <samp>0x04</samp>) without any additional framing overhead. (TODO: Verify) </p>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> <a href="#nli-network-link-identifier" id="nli-network-link-identifier">NLI: Network Link Identifier</a>
</h1>
<p id="rfc.section.3.2.2.p.1">The Network Link Identifier (NLI) field is used to distinguish between independent "virtual" network links. It is stored in the third and fourth most significant bits as an integer between 0 and 3.  </p>
<p id="rfc.section.3.2.2.p.2">The NLI field allows for the control and management of an NCP that can be connected to more than one network simultaneously, as if multiple independent NCPs were present. The exact details regarding the usage of such a feature are not yet specified and considered outside the scope of this document.  </p>
<p id="rfc.section.3.2.2.p.3">All NCPs conforming to this protocol SHALL implement NLI 0 and MAY provide additional network interfaces via NLI values 1, 2, and 3.  </p>
<p id="rfc.section.3.2.2.p.4">Any commands sent to an unimplemented NLI MUST fail with: </p>
<p></p>

<ul>
<li>Header byte identical to the offending command.</li>
<li>
<samp>CMD_PROP_VALUE_IS</samp> for the command id.</li>
<li>
<samp>PROP_LAST_STATUS</samp> as the property key.</li>
<li>
<samp>STATUS_INVALID_INTERFACE</samp> as the value.</li>
</ul>

<p> </p>
<h1 id="rfc.section.3.2.3">
<a href="#rfc.section.3.2.3">3.2.3.</a> <a href="#tid-transaction-identifier" id="tid-transaction-identifier">TID: Transaction Identifier</a>
</h1>
<p id="rfc.section.3.2.3.p.1">The Transaction Identifier (TID) field in the four least significant bits of the header is used for correlating responses to the commands which generated them.  </p>
<p id="rfc.section.3.2.3.p.2">When a command is sent from the AP, any reply to that command sent by the NCP will use the same value for the TID. When the AP receives a frame that matches the TID of the command it sent, it can easily recognize that frame as the actual response to that command.  </p>
<p id="rfc.section.3.2.3.p.3">The zero value of TID is used for commands to which a correlated response is not expected or needed, such as for unsolicited update commands sent to the AP from the NCP.  </p>
<p id="rfc.section.3.2.3.p.4">Note that while the frame format is symmetric between the frames being sent to the NCP versus frames being sent from the NCP, the behaviors are not. The NCP MUST NOT send a frame with a non-zero TID that is not a response to a frame it had recently received with that same TID. All unsolicited or asynchronous commands originating from the NCP MUST use TID zero (0).  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#command-id" id="command-id">Command ID</a>
</h1>
<p id="rfc.section.3.3.p.1">The command identifier is a 21-bit unsigned integer encoded in up to three bytes using the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>. This encoding allows for up to 2,097,152 individual commands, with the first 127 commands represented as a single byte. Command identifiers larger than 2,097,151 are explicitly forbidden.  </p>
<p id="rfc.section.3.3.p.2">To date, no command id has been longer than one byte long, so all figures in this document will represent the command ID as only taking a single byte.  </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#payload" id="payload">Payload</a>
</h1>
<p id="rfc.section.3.4.p.1">The command payload follows the command identifier in a Spinel frame, containing the serialization of any arguments that the indicated command may require. The exact composition of a command payload is determined by the specific command identifier being used and MUST be empty if the command has no arguments.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#property-overview" id="property-overview">Property Overview</a>
</h1>
<p id="rfc.section.4.p.1">Spinel is largely a property-based protocol. The NCP exposes various properties that the host can manipulate to control its behavior. The theory of operation is similar to representational state transfer (REST)(TODO:CITE), with a property defined for every attribute of the operational state of a network interface for which an IPv6 node may need the typical operators, i.e. Create, Read, Update, Delete and Alert.  </p>
<p id="rfc.section.4.p.2">The inspiration of the approach used in Spinel was the concept of hardware registers for peripherals. The goal was to avoid, as much as possible, the use of large complicated structures and/or method argument lists. The reason for avoiding these is because they have a tendency to change in incompatible ways, especially early in development. For example, adding or removing an argument from a command will render the entire protocol incompatible. By using properties and conforming to a well-designed information model, extending the protocol is usually as simple as an additional property.  </p>
<p id="rfc.section.4.p.3">Almost all features and capabilities are implemented using properties.  Most new features that are initially proposed as explicit commands can be satisfactorily adapted to be property-based instead. In cases where doing so is particularly awkward, explicit commands are used instead (See <a href="#commands" class="xref">Section 6</a>).  </p>
<p id="rfc.section.4.p.4">Properties are identified by a unique unsigned integer value between 0 and 2,097,151 (See <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>) called a "property key". Property keys are recorded in the Spinel property key registry (EDITOR: proposal is to create an IANA registry) with some ranges already reserved for future expansion of the core and other ranges available for profile specialization.  </p>
<p id="rfc.section.4.p.5">What follows is a overview of how properties work.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#property-operators" id="property-operators">Property Operators</a>
</h1>
<p id="rfc.section.4.1.p.1">Conceptually, the following operations are used by the AP to query or change a property's value: </p>
<p></p>

<ul>
<li><samp>GET</samp></li>
<li><samp>SET</samp></li>
<li><samp>INSERT</samp></li>
<li><samp>REMOVE</samp></li>
</ul>

<p> </p>
<p id="rfc.section.4.1.p.3">In addition, the following operations can be used by the NCP to indicate changes to the value of a property: </p>
<p></p>

<ul>
<li><samp>IS</samp></li>
<li><samp>INSERTED</samp></li>
<li><samp>REMOVED</samp></li>
</ul>

<p> </p>
<p id="rfc.section.4.1.p.5">Not all properties support all of the above operations. Which operations are supported is generally determined by two things: what type of property it is and that property's readability/writability.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#property-types" id="property-types">Property Types</a>
</h1>
<p id="rfc.section.4.2.p.1">Conceptually, there are three different types of properties: </p>
<p></p>

<ul>
<li>Single-value properties</li>
<li>Multiple-value (Array) properties</li>
<li>Stream properties</li>
</ul>

<p> </p>
<p id="rfc.section.4.2.p.3">These are described in further detail in the following sections.  </p>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> <a href="#singlevalue-properties" id="singlevalue-properties">Single-Value Properties</a>
</h1>
<p id="rfc.section.4.2.1.p.1">Single-value properties are properties that have a simple representation of a single value. Examples would be: </p>
<p></p>

<ul>
<li>Current radio channel (Represented as a unsigned 8-bit integer)</li>
<li>Network name (Represented as a UTF-8 encoded string)</li>
<li>802.15.4 PAN ID (Represented as a unsigned 16-bit integer)</li>
</ul>

<p> </p>
<p id="rfc.section.4.2.1.p.3">The valid operators on these sorts of properties are <samp>GET</samp> and <samp>SET</samp>.  </p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> <a href="#multiplevalue-properties" id="multiplevalue-properties">Multiple-Value Properties</a>
</h1>
<p id="rfc.section.4.2.2.p.1">Multiple-Value Properties have more than one value associated with them. Examples would be: </p>
<p></p>

<ul>
<li>List of channels supported by the radio hardware.</li>
<li>List of IPv6 addresses assigned to the interface.</li>
<li>List of capabilities supported by the NCP.</li>
</ul>

<p> </p>
<p id="rfc.section.4.2.2.p.3">The valid operators on these sorts of properties are <samp>GET</samp>, <samp>SET</samp>, <samp>INSERT</samp>, and <samp>REMOVE</samp>.  </p>
<p id="rfc.section.4.2.2.p.4">When the value is fetched using <samp>GET</samp>, an individual property will return the entire list of items as either of the following: </p>
<p></p>

<ol>
<li>The concatenation of all of the individual values. This is used in cases where the length of an individual item is fixed.</li>
<li>The concatenation of all of the individual values, each prefixed by a 16-bit big-endian integer describing the length of the individual item. This would be used in cases where the length of an individual item is not constant.</li>
</ol>

<p> </p>
<p id="rfc.section.4.2.2.p.6">The order of the returned items, unless explicitly defined for that specific property, is undefined.  </p>
<p><samp>SET</samp> provides a way to completely replace all previous values, with the item format matching what would be used for <samp>GET</samp>. Calling <samp>SET</samp> with an empty value effectively instructs the NCP to empty that property.  </p>
<p><samp>INSERT</samp> and <samp>REMOVE</samp> provide mechanisms for the insertion or removal of individual items <em>by value</em>. The payload for these operators is a single item.  </p>
<h1 id="rfc.section.4.2.3">
<a href="#rfc.section.4.2.3">4.2.3.</a> <a href="#stream-properties" id="stream-properties">Stream Properties</a>
</h1>
<p id="rfc.section.4.2.3.p.1">Stream properties represent dynamic streams of data rather than a specific value. Examples would be: </p>
<p></p>

<ul>
<li>Network packet stream (<a href="#prop-stream-net" class="xref">Section 8.6.3</a>)</li>
<li>Raw packet stream (<a href="#prop-stream-raw" class="xref">Section 8.6.2</a>)</li>
<li>Debug message stream (<a href="#prop-stream-debug" class="xref">Section 8.6.1</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.4.2.3.p.3">All such properties emit changes asynchronously using the <samp>IS</samp> operator, sent from the NCP to the AP. For example, as IPv6 traffic is received by the NCP, the IPv6 packets are sent to the AP by way of asynchronous <samp>IS</samp> operations for the network packet stream property.  </p>
<p id="rfc.section.4.2.3.p.4">Some of these properties also support the AP sending data back to the NCP using the <samp>SET</samp> operation. For example, this is how the AP sends IPv6 traffic to the NCP.  </p>
<p id="rfc.section.4.2.3.p.5">The behavior and meaning of the <samp>GET</samp>, <samp>INSERT</samp>, <samp>REMOVE</samp>, <samp>INSERTED</samp>, and <samp>REMOVED</samp> operations for stream properties is undefined and SHOULD NOT be used.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#status-codes" id="status-codes">Status Codes</a>
</h1>
<p id="rfc.section.5.p.1">The Spinel core protocol defines some standard status codes. Status codes are used to indicate either the success of a transaction or the specific reason that a specific transaction failed. Their names, assigned numbers and a short description of their operational semantics are shown in the following table: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Enumeration of status codes </caption>
<thead><tr>
<th class="left">Id</th>
<th class="left">Name</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0</td>
<td class="left"><samp>STATUS_OK</samp></td>
</tr>
<tr>
<td class="left">1</td>
<td class="left"><samp>STATUS_FAILURE</samp></td>
</tr>
<tr>
<td class="left">2</td>
<td class="left"><samp>STATUS_UNIMPLEMENTED</samp></td>
</tr>
<tr>
<td class="left">3</td>
<td class="left"><samp>STATUS_INVALID_ARGUMENT</samp></td>
</tr>
<tr>
<td class="left">4</td>
<td class="left"><samp>STATUS_INVALID_STATE</samp></td>
</tr>
<tr>
<td class="left">5</td>
<td class="left"><samp>STATUS_INVALID_COMMAND</samp></td>
</tr>
<tr>
<td class="left">6</td>
<td class="left"><samp>STATUS_INVALID_INTERFACE</samp></td>
</tr>
<tr>
<td class="left">7</td>
<td class="left"><samp>STATUS_INTERNAL_ERROR</samp></td>
</tr>
<tr>
<td class="left">8</td>
<td class="left"><samp>STATUS_SECURITY_ERROR</samp></td>
</tr>
<tr>
<td class="left">9</td>
<td class="left"><samp>STATUS_PARSE_ERROR</samp></td>
</tr>
<tr>
<td class="left">10</td>
<td class="left"><samp>STATUS_IN_PROGRESS</samp></td>
</tr>
<tr>
<td class="left">11</td>
<td class="left"><samp>STATUS_NOMEM</samp></td>
</tr>
<tr>
<td class="left">12</td>
<td class="left"><samp>STATUS_BUSY</samp></td>
</tr>
<tr>
<td class="left">13</td>
<td class="left"><samp>STATUS_PROP_NOT_FOUND</samp></td>
</tr>
<tr>
<td class="left">14</td>
<td class="left"><samp>STATUS_PACKET_DROPPED</samp></td>
</tr>
<tr>
<td class="left">15</td>
<td class="left"><samp>STATUS_EMPTY</samp></td>
</tr>
<tr>
<td class="left">16</td>
<td class="left"><samp>STATUS_CMD_TOO_BIG</samp></td>
</tr>
<tr>
<td class="left">17</td>
<td class="left"><samp>STATUS_NO_ACK</samp></td>
</tr>
<tr>
<td class="left">18</td>
<td class="left"><samp>STATUS_CCA_FAILURE</samp></td>
</tr>
<tr>
<td class="left">19</td>
<td class="left"><samp>STATUS_ALREADY</samp></td>
</tr>
<tr>
<td class="left">20</td>
<td class="left"><samp>STATUS_ITEM_NOT_FOUND</samp></td>
</tr>
<tr>
<td class="left">21</td>
<td class="left"><samp>STATUS_INVALID_COMMAND_FOR_PROP</samp></td>
</tr>
<tr>
<td class="left"><em>TBD</em></td>
<td class="left"><samp>STATUS_PROP_VALUE_TOO_BIG</samp></td>
</tr>
</tbody>
</table>
<p></p>

<dl>
<dt>STATUS_OK</dt>
<dd style="margin-left: 8">
<br> Indicates that the operation has completed successfully.</dd>
<dt>STATUS_FAILURE</dt>
<dd style="margin-left: 8">
<br> Indicates that the operation has failed for an unspecified reason. The use of this status code SHOULD be avoided. If a more specific status code exists that better explains the failure, then that status code MUST be used instead.</dd>
<dt>STATUS_UNIMPLEMENTED</dt>
<dd style="margin-left: 8">
<br> Indicates that the given operation has not been implemented.</dd>
<dt>STATUS_INVALID_ARGUMENT</dt>
<dd style="margin-left: 8">
<br> Indicates that an argument to the given operation is invalid. The value may be out of range or improperly formatted. This status code is also returned when setting an invalid value to a property.</dd>
<dt>STATUS_INVALID_STATE</dt>
<dd style="margin-left: 8">
<br> Indicates that the given operation is invalid for the current state of the device.</dd>
<dt>STATUS_INVALID_COMMAND</dt>
<dd style="margin-left: 8">
<br> The given command id is not recognized.</dd>
<dt>STATUS_INVALID_INTERFACE</dt>
<dd style="margin-left: 8">
<br> The given NLI is not supported.</dd>
<dt>STATUS_INTERNAL_ERROR</dt>
<dd style="margin-left: 8">
<br> An internal runtime error has occurred.  TODO(RQ): What sort of error would cause this to be emitted?</dd>
<dt>STATUS_SECURITY_ERROR</dt>
<dd style="margin-left: 8">
<br> A security or authentication error has occurred.  TODO(RQ): Elaborate on when this would be returned.</dd>
<dt>STATUS_PARSE_ERROR</dt>
<dd style="margin-left: 8">
<br> An error has occurred while parsing the command.</dd>
<dt>STATUS_IN_PROGRESS</dt>
<dd style="margin-left: 8">
<br> An error has occurred while parsing the command.  TODO(RQ): Are we still using this? Elaborate on when this would be returned.</dd>
<dt>STATUS_NOMEM</dt>
<dd style="margin-left: 8">
<br> The operation has been prevented due to memory pressure.</dd>
<dt>STATUS_BUSY</dt>
<dd style="margin-left: 8">
<br> The device is currently performing a mutually exclusive operation. For example, you will get this status code if you attempt to change the value of <samp>PROP_NET_STACK_UP</samp> while performing an energy scan. This status differs from <samp>STATUS_INVALID_STATE</samp> in that it will resolve spontaneously.</dd>
<dt>STATUS_PROP_NOT_FOUND</dt>
<dd style="margin-left: 8">
<br> The given property key is not recognized.</dd>
<dt>STATUS_PACKET_DROPPED</dt>
<dd style="margin-left: 8">
<br> The packet was dropped. This status code is only emitted when sending data to a packet stream with a TID other than zero.</dd>
<dt>STATUS_EMPTY</dt>
<dd style="margin-left: 8">
<br> The result of the operation is empty.  TODO(RQ): Elaborate on when this would be returned.</dd>
<dt>STATUS_CMD_TOO_BIG</dt>
<dd style="margin-left: 8">
<br> The command was too large to fit in the internal buffer. This is generally indicates some sort of misconfiguration.</dd>
<dt>STATUS_NO_ACK</dt>
<dd style="margin-left: 8">
<br> The packet was not acknowledged.  This status code is only emitted when sending data to a packet stream with a TID other than zero.</dd>
<dt>STATUS_CCA_FAILURE</dt>
<dd style="margin-left: 8">
<br> The packet was not sent due to a CCA failure.  This status code is only emitted when sending data to a packet stream with a TID other than zero.</dd>
<dt>STATUS_ALREADY</dt>
<dd style="margin-left: 8">
<br> The operation is already in progress, or the property already has the value.  This is emitted by <samp>PROP_LOCK</samp> (<a href="#prop-lock" class="xref">Section 8.5.10</a>) and <samp>PROP_MAC_SCAN_STATE</samp> (<a href="#prop-mac-scan-state" class="xref">Section 8.8.1</a>).</dd>
<dt>STATUS_ITEM_NOT_FOUND</dt>
<dd style="margin-left: 8">
<br> The given item could not be found in the property. This status code MAY be used to indicate a failure to remove a specific value from a multiple-value property.  TODO(RQ): Are we still using this?</dd>
<dt>STATUS_INVALID_COMMAND_FOR_PROP</dt>
<dd style="margin-left: 8">
<br> The given command cannot be performed on this property. For example, if a property was read-only, this status would be emitted if you attempted to perform a <samp>CMD_PROP_VALUE_SET</samp> on it.</dd>
<dt>STATUS_PROP_VALUE_TOO_BIG</dt>
<dd style="margin-left: 8">
<br> The value for this property is too large.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#reset-codes" id="reset-codes">Reset Codes</a>
</h1>
<p id="rfc.section.5.1.p.1">All status codes which fall into the inclusive range of 112-127 are considered <em>reset codes</em>. These codes are emitted asynchronously after an NCP reset and provide a way to differentiate different causes of resets. If the first command the AP sends to the NCP after a reset is to fetch <samp>PROP_LAST_STATUS</samp>, then the reset code MUST be returned.  </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Enumeration of reset codes </caption>
<thead><tr>
<th class="left">Id</th>
<th class="left">Name</th>
</tr></thead>
<tbody>
<tr>
<td class="left">112</td>
<td class="left"><samp>STATUS_RESET_POWER_ON</samp></td>
</tr>
<tr>
<td class="left">113</td>
<td class="left"><samp>STATUS_RESET_EXTERNAL</samp></td>
</tr>
<tr>
<td class="left">114</td>
<td class="left"><samp>STATUS_RESET_SOFTWARE</samp></td>
</tr>
<tr>
<td class="left">115</td>
<td class="left"><samp>STATUS_RESET_FAULT</samp></td>
</tr>
<tr>
<td class="left">116</td>
<td class="left"><samp>STATUS_RESET_CRASH</samp></td>
</tr>
<tr>
<td class="left">117</td>
<td class="left"><samp>STATUS_RESET_ASSERT</samp></td>
</tr>
<tr>
<td class="left">118</td>
<td class="left"><samp>STATUS_RESET_OTHER</samp></td>
</tr>
<tr>
<td class="left">119</td>
<td class="left"><samp>STATUS_RESET_UNKNOWN</samp></td>
</tr>
<tr>
<td class="left">120</td>
<td class="left"><samp>STATUS_RESET_WATCHDOG</samp></td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.1.p.2">Of these defined reset codes, only <samp>STATUS_RESET_POWER_ON</samp>, <samp>STATUS_RESET_EXTERNAL</samp>, and <samp>STATUS_RESET_SOFTWARE</samp> are emitted during normal operation. All other reset codes generally indicate some sort of software bug or hardware failure.  </p>
<p id="rfc.section.5.1.p.3">Unexpected/unrequested resets are always an indication of a problem, no matter what the code value is.  </p>
<p></p>

<dl>
<dt>STATUS_RESET_POWER_ON</dt>
<dd style="margin-left: 8">
<br> Cold power-on start.</dd>
<dt>STATUS_RESET_EXTERNAL</dt>
<dd style="margin-left: 8">
<br> External device reset. This is generally caused by RESET pin on the NCP being asserted.</dd>
<dt>STATUS_RESET_SOFTWARE</dt>
<dd style="margin-left: 8">
<br> Software-requested orderly reset. This is generally caused by the AP sending the NCP <samp>CMD_RESET</samp>.</dd>
<dt>STATUS_RESET_FAULT</dt>
<dd style="margin-left: 8">
<br> Internal software abortive reset.  TODO: Elaborate on what this means. Consider repurposing this code.</dd>
<dt>STATUS_RESET_CRASH</dt>
<dd style="margin-left: 8">
<br> Unrecoverable software execution failure.</dd>
<dt>STATUS_RESET_ASSERT</dt>
<dd style="margin-left: 8">
<br> Software invariant property not respected.</dd>
<dt>STATUS_RESET_OTHER</dt>
<dd style="margin-left: 8">
<br> Unspecified cause.</dd>
<dt>STATUS_RESET_UNKNOWN</dt>
<dd style="margin-left: 8">
<br> Failure while recovering cause of reset.</dd>
<dt>STATUS_RESET_WATCHDOG</dt>
<dd style="margin-left: 8">
<br> Watchdog timer expired, forcing a reset.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#status-code-ranges" id="status-code-ranges">Status Code Ranges</a>
</h1>
<p id="rfc.section.5.2.p.1">IANA maintains a registry of Spinel <samp>STATUS_CODE</samp> numbers, with varying registration policies assigned for different ranges according to the following table: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Status Code Range</th>
<th class="left">Reservation Policy</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0 - 127</td>
<td class="left">Standards Action</td>
</tr>
<tr>
<td class="left">128 - 15,359</td>
<td class="left">Unassigned</td>
</tr>
<tr>
<td class="left">15,360 - 16,383</td>
<td class="left">Private Use</td>
</tr>
<tr>
<td class="left">16,384 - 1,999,999</td>
<td class="left">Unassigned</td>
</tr>
<tr>
<td class="left">2,000,000 - 2,097,151</td>
<td class="left">Experimental Use</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#how-status-is-indicated" id="how-status-is-indicated">How Status is Indicated</a>
</h1>
<p id="rfc.section.5.3.p.1">Status codes are sent from the NCP to the AP via <samp>PROP_LAST_STATUS</samp> using the <samp>CMD_VALUE_IS</samp> command to indicate the return status of a previous command. As with any response, the TID field of the FLAG byte is used to correlate the response with the request.  </p>
<p id="rfc.section.5.3.p.2">Note that most successfully executed commands do not indicate a last status of <samp>STATUS_OK</samp>. The usual way the NCP indicates a successful command is to mirror the property change back to the AP. For example, if you do a <samp>CMD_VALUE_SET</samp> on <samp>PROP_PHY_ENABLED</samp>, the NCP would indicate success by responding with a <samp>CMD_VALUE_IS</samp> for <samp>PROP_PHY_ENABLED</samp>. If the command failed, <samp>PROP_LAST_STATUS</samp> would be emitted instead.  </p>
<p id="rfc.section.5.3.p.3">See <a href="#prop-last-status" class="xref">Section 8.5.1</a> for more information on <samp>PROP_LAST_STATUS</samp>.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#commands" id="commands">Commands</a>
</h1>
<p id="rfc.section.6.p.1">This section defines the standard commands used in all Spinel protocol interactions. Each command is defined for one of the following two contexts: </p>
<p></p>

<ul>
<li>AP -&gt; NCP: commands sent by the Application Processor (AP) to the Network Co-Processor (NCP).</li>
<li>NCP -&gt; AP: commands sent by the Network Co-Processor (NCP) to the Application Processor (AP).</li>
</ul>

<p> </p>
<p id="rfc.section.6.p.3">A conforming implementation MAY transmit any command defined for its operating context, and MUST process any command received for its operating context, according to the operational semantics defined in this section.  </p>
<p id="rfc.section.6.p.4">IANA maintains a registry of Spinel <samp>CMD</samp> command numbers, with varying registration policies assigned for different ranges according to the following table: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">CMD Number</th>
<th class="center">Reservation policy</th>
</tr></thead>
<tbody>
<tr>
<td class="center">0 - 63</td>
<td class="center">Standards Action</td>
</tr>
<tr>
<td class="center">64 - 15,359</td>
<td class="center">Unassigned</td>
</tr>
<tr>
<td class="center">15,360 - 16,383</td>
<td class="center">Private Use</td>
</tr>
<tr>
<td class="center">16,384 - 1,999,999</td>
<td class="center">Unassigned</td>
</tr>
<tr>
<td class="center">2,000,000 - 2,097,151</td>
<td class="center">Experimental Use</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#cmd-noop" id="cmd-noop">CMD 0: (AP -&gt; NCP) CMD_NOOP</a>
</h1>
<pre>
 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |    CMD_NOOP   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
^     HEADER    ^    COMMAND    ^
</pre>
<p class="figure">Structure of CMD_NOOP </p>
<p id="rfc.section.6.1.p.1">No-Operation. Commands the NCP to reply with a <samp>STATUS_OK</samp> code. This is primarily used for liveliness checks.  </p>
<p id="rfc.section.6.1.p.2">The command payload for this command SHOULD be empty. The receiver MUST ignore any non-empty command payload.  </p>
<p id="rfc.section.6.1.p.3">There is no error condition for this command.  </p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#cmd-reset" id="cmd-reset">CMD 1: (AP -&gt; NCP) CMD_RESET</a>
</h1>
<pre>
 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |   CMD_RESET   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_RESET </p>
<p id="rfc.section.6.2.p.1">Reset NCP. Commands the NCP to perform a software reset. Due to the nature of this command, the TID is ignored. The AP should instead wait for a <samp>CMD_PROP_VALUE_IS</samp> command from the NCP indicating <samp>PROP_LAST_STATUS</samp> has been set to <samp>STATUS_RESET_SOFTWARE</samp> (see <a href="#status-codes" class="xref">Section 5</a>).  </p>
<p id="rfc.section.6.2.p.2">The command payload SHOULD be empty, and it SHOULD NOT be processed.  </p>
<p id="rfc.section.6.2.p.3">If an error occurs, the value of the emitted <samp>PROP_LAST_STATUS</samp> will be set accordingly to the status code for the error.  </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#cmd-prop-value-get" id="cmd-prop-value-get">CMD 2: (AP -&gt; NCP) CMD_PROP_VALUE_GET</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      | PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_GET </p>
<p id="rfc.section.6.3.p.1">Get property value. Commands the NCP to emit a <samp>CMD_PROP_VALUE_IS</samp> command for the given property identifier.  </p>
<p id="rfc.section.6.3.p.2">The payload for this command is the property identifier encoded in the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>.  </p>
<p id="rfc.section.6.3.p.3">If an error occurs, the value of the emitted <samp>PROP_LAST_STATUS</samp> will be set accordingly to the status code for the error.  </p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> <a href="#cmd-prop-value-set" id="cmd-prop-value-set">CMD 3: (AP -&gt; NCP) CMD_PROP_VALUE_SET</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      | PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  NEW PROPERTY VALUE ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_SET </p>
<p id="rfc.section.6.4.p.1">Set property value. Commands the NCP to set the given property to the specific given value, replacing any previous value, and to emit a <samp>CMD_PROP_VALUE_IS</samp> command for the <samp>PROP_LAST_STATUS</samp> command indicating <samp>STATUS_OK</samp> if successful.  </p>
<p id="rfc.section.6.4.p.2">The payload for this command is the property identifier encoded in the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>, followed by the property value. The exact format of the property value is defined by the property.  </p>
<p id="rfc.section.6.4.p.3">If an error occurs, the value of the emitted <samp>PROP_LAST_STATUS</samp> will be set accordingly to the status code for the error.  </p>
<h1 id="rfc.section.6.5">
<a href="#rfc.section.6.5">6.5.</a> <a href="#cmd-prop-value-insert" id="cmd-prop-value-insert">CMD 4: (AP -&gt; NCP) CMD_PROP_VALUE_INSERT</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      | PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  ITEM TO INSERT ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_INSERT </p>
<p id="rfc.section.6.5.p.1">Insert value into list property. Commands the NCP to insert the given value into a list-oriented property, without removing other items in the list. The resulting order of items in the list is defined by the individual property being operated on.  </p>
<p id="rfc.section.6.5.p.2">The payload for this command is the property identifier encoded in the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>, followed by the value to be inserted. The exact format of the value is defined by the property.  </p>
<p id="rfc.section.6.5.p.3">If the type signature of the property specified by <samp>PROP_ID</samp> consists of a single structure enclosed by an array (<samp>A(t(...))</samp>), then the contents of <samp>VALUE</samp> MUST contain the contents of the structure (<samp>...</samp>) rather than the serialization of the whole item (<samp>t(...)</samp>).  Specifically, the length of the structure MUST NOT be prepended to <samp>VALUE</samp>. This helps to eliminate redundant data.  </p>
<p id="rfc.section.6.5.p.4">If an error occurs, the value of the emitted <samp>PROP_LAST_STATUS</samp> will be set accordingly to the status code for the error.  </p>
<h1 id="rfc.section.6.6">
<a href="#rfc.section.6.6">6.6.</a> <a href="#cmd-prop-value-remove" id="cmd-prop-value-remove">CMD 5: (AP -&gt; NCP) CMD_PROP_VALUE_REMOVE</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      | PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  ITEM TO REMOVE ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_REMOVE </p>
<p id="rfc.section.6.6.p.1">Remove value from list property. Commands the NCP to remove the given value from a list-oriented property, without affecting other items in the list. The resulting order of items in the list is defined by the individual property being operated on.  </p>
<p id="rfc.section.6.6.p.2">Note that this command operates <em>by value</em>, not by index! </p>
<p id="rfc.section.6.6.p.3">The payload for this command is the property identifier encoded in the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>, followed by the value to be removed. The exact format of the value is defined by the property.  </p>
<p id="rfc.section.6.6.p.4">If the type signature of the property specified by <samp>PROP_ID</samp> consists of a single structure enclosed by an array (<samp>A(t(...))</samp>), then the contents of <samp>VALUE</samp> MUST contain the contents of the structure (<samp>...</samp>) rather than the serialization of the whole item (<samp>t(...)</samp>).  Specifically, the length of the structure MUST NOT be prepended to <samp>VALUE</samp>. This helps to eliminate redundant data.  </p>
<p id="rfc.section.6.6.p.5">If an error occurs, the value of the emitted <samp>PROP_LAST_STATUS</samp> will be set accordingly to the status code for the error.  </p>
<h1 id="rfc.section.6.7">
<a href="#rfc.section.6.7">6.7.</a> <a href="#cmd-prop-value-is" id="cmd-prop-value-is">CMD 6: (NCP -&gt; AP) CMD_PROP_VALUE_IS</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      | PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  CURRENT PROPERTY VALUE ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_SET </p>
<p id="rfc.section.6.7.p.1">Property value notification. This command can be sent by the NCP in response to a previous command from the AP, or it can be sent by the NCP in an unsolicited fashion to notify the AP of various state changes asynchronously.  </p>
<p id="rfc.section.6.7.p.2">The payload for this command is the property identifier encoded in the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>, followed by the current value of the given property.  </p>
<h1 id="rfc.section.6.8">
<a href="#rfc.section.6.8">6.8.</a> <a href="#cmd-prop-value-inserted" id="cmd-prop-value-inserted">CMD 7: (NCP -&gt; AP) CMD_PROP_VALUE_INSERTED</a>
</h1>
<pre>
  0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| ITEM TO BE INSERTED ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_INSERTED </p>
<p id="rfc.section.6.8.p.1">Property value insertion notification. This command can be sent by the NCP in response to the <samp>CMD_PROP_VALUE_INSERT</samp> command, or it can be sent by the NCP in an unsolicited fashion to notify the AP of various state changes asynchronously.  </p>
<p id="rfc.section.6.8.p.2">The payload for this command is the property identifier encoded in the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>, followed by the value that was inserted into the given property.  </p>
<p id="rfc.section.6.8.p.3">If the type signature of the property specified by <samp>PROP_ID</samp> consists of a single structure enclosed by an array (<samp>A(t(...))</samp>), then the contents of <samp>VALUE</samp> MUST contain the contents of the structure (<samp>...</samp>) rather than the serialization of the whole item (<samp>t(...)</samp>).  Specifically, the length of the structure MUST NOT be prepended to <samp>VALUE</samp>. This helps to eliminate redundant data.  </p>
<p id="rfc.section.6.8.p.4">The resulting order of items in the list is defined by the given property.  </p>
<h1 id="rfc.section.6.9">
<a href="#rfc.section.6.9">6.9.</a> <a href="#cmd-prop-value-removed" id="cmd-prop-value-removed">CMD 8: (NCP -&gt; AP) CMD_PROP_VALUE_REMOVED</a>
</h1>
<pre>
  0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| ITEM TO BE REMOVED ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_REMOVED </p>
<p id="rfc.section.6.9.p.1">Property value removal notification command. This command can be sent by the NCP in response to the <samp>CMD_PROP_VALUE_REMOVE</samp> command, or it can be sent by the NCP in an unsolicited fashion to notify the AP of various state changes asynchronously.  </p>
<p id="rfc.section.6.9.p.2">Note that this command operates <em>by value</em>, not by index! </p>
<p id="rfc.section.6.9.p.3">The payload for this command is the property identifier encoded in the packed unsigned integer format described in <a href="#packed-unsigned-integer" class="xref">Section 2.1</a>, followed by the value that was removed from the given property.  </p>
<p id="rfc.section.6.9.p.4">If the type signature of the property specified by <samp>PROP_ID</samp> consists of a single structure enclosed by an array (<samp>A(t(...))</samp>), then the contents of <samp>VALUE</samp> MUST contain the contents of the structure (<samp>...</samp>) rather than the serialization of the whole item (<samp>t(...)</samp>).  Specifically, the length of the structure MUST NOT be prepended to <samp>VALUE</samp>. This helps to eliminate redundant data.  </p>
<p id="rfc.section.6.9.p.5">The resulting order of items in the list is defined by the given property.  </p>
<h1 id="rfc.section.6.10">
<a href="#rfc.section.6.10">6.10.</a> <a href="#cmd-peek" id="cmd-peek">CMD 18: (AP -&gt; NCP) CMD_PEEK</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |   ADDRESS (LITTLE ENDIAN) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ... ADDRESS (LITTLE ENDIAN)  |     COUNT (LITTLE ENDIAN)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PEEK </p>
<p id="rfc.section.6.10.p.1">This command allows the NCP to fetch values from the RAM of the NCP for debugging purposes. Upon success, <samp>CMD_PEEK_RET</samp> is sent from the NCP to the AP. Upon failure, <samp>PROP_LAST_STATUS</samp> is emitted with the appropriate error indication.  </p>
<p id="rfc.section.6.10.p.2">Due to the low-level nature of this command, certain error conditions may induce the NCP to reset.  </p>
<p id="rfc.section.6.10.p.3">The NCP MAY prevent certain regions of memory from being accessed.  </p>
<p id="rfc.section.6.10.p.4">The implementation of this command has security implications. See <a href="#security-considerations" class="xref">Section 9</a> for more information.  </p>
<p id="rfc.section.6.10.p.5">This command requires the capability <samp>CAP_PEEK_POKE</samp> to be present.  </p>
<h1 id="rfc.section.6.11">
<a href="#rfc.section.6.11">6.11.</a> <a href="#cmd-peek-ret" id="cmd-peek-ret">CMD 19: (NCP -&gt; AP) CMD_PEEK_RET</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |   ADDRESS (LITTLE ENDIAN) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ... ADDRESS (LITTLE ENDIAN)  |     COUNT (LITTLE ENDIAN)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  VALUE OF MEMORY ADDRESS ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_PEEK_RET </p>
<p id="rfc.section.6.11.p.1">This command contains the contents of memory that was requested by a previous call to <samp>CMD_PEEK</samp>.  </p>
<p id="rfc.section.6.11.p.2">This command requires the capability <samp>CAP_PEEK_POKE</samp> to be present.  </p>
<h1 id="rfc.section.6.12">
<a href="#rfc.section.6.12">6.12.</a> <a href="#cmd-poke" id="cmd-poke">CMD 20: (AP -&gt; NCP) CMD_POKE</a>
</h1>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |   ADDRESS (LITTLE ENDIAN) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ... ADDRESS (LITTLE ENDIAN)  |     COUNT (LITTLE ENDIAN)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  VALUE TO WRITE TO MEMORY ADDRESS ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of CMD_POKE </p>
<p id="rfc.section.6.12.p.1">This command writes the bytes to the specified memory address for debugging purposes.  </p>
<p id="rfc.section.6.12.p.2">Due to the low-level nature of this command, certain error conditions may induce the NCP to reset.  </p>
<p id="rfc.section.6.12.p.3">The implementation of this command has security implications. See <a href="#security-considerations" class="xref">Section 9</a> for more information.  </p>
<p id="rfc.section.6.12.p.4">This command requires the capability <samp>CAP_PEEK_POKE</samp> to be present.  </p>
<h1 id="rfc.section.6.13">
<a href="#rfc.section.6.13">6.13.</a> <a href="#cmd-prop-value-multi-get" id="cmd-prop-value-multi-get">CMD 21: (AP -&gt; NCP) CMD_PROP_VALUE_MULTI_GET</a>
</h1>
<p></p>

<ul><li>Required Capability: <samp>CAP_CMD_MULTI</samp>
</li></ul>

<p> </p>
<pre>
  0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP_KEY 1 (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP_KEY 2 (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP_KEY 3 (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:            etc ...            :
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_MULTI_GET </p>
<p id="rfc.section.6.13.p.2">Fetch the value of multiple properties in one command. Arguments are a list of property IDs. If all properties are fetched successfully, a <samp>CMD_PROP_VALUES_ARE</samp> command is sent back to the AP containing the property identifier and value of each fetched property. The order of the results in <samp>CMD_PROP_VALUES_ARE</samp> match the order of properties given in <samp>CMD_PROP_VALUE_GET</samp>.  </p>
<p id="rfc.section.6.13.p.3">Errors fetching individual properties are reflected as indicating a change to <samp>PROP_LAST_STATUS</samp> for that property's place.  </p>
<p id="rfc.section.6.13.p.4">Not all properties can be fetched using this method. As a general rule of thumb, any property that blocks when getting will fail for that individual property with <samp>STATUS_INVALID_COMMAND_FOR_PROP</samp>.  </p>
<h1 id="rfc.section.6.14">
<a href="#rfc.section.6.14">6.14.</a> <a href="#cmd-prop-value-multi-set" id="cmd-prop-value-multi-set">CMD 22: (AP -&gt; NCP) CMD_PROP_VALUE_MULTI_SET</a>
</h1>
<p></p>

<ul><li>Required Capability: <samp>CAP_CMD_MULTI</samp>
</li></ul>

<p> </p>
<p id="rfc.section.6.14.p.2">This command sets the value of several properties at once in the given order.  The setting of properties stops at the first error, ignoring any later properties.  </p>
<pre>
  0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP/VALUE PAIR 1 ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP/VALUE PAIR 2 ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP/VALUE PAIR 3 ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:            etc ...            :
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_MULTI_SET </p>
<p id="rfc.section.6.14.p.3">With each property/value pair above being: </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    LENGTH (LITTLE ENDIAN)     | PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  NEW PROPERTY VALUE ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.6.14.p.4">The LENGTH field is the sum of the length of the property key and the new property value.  </p>
<p id="rfc.section.6.14.p.5">The result of this command is generally <samp>CMD_PROP_VALUES_ARE</samp> unless (for example) a parsing error has occured (in which case <samp>CMD_PROP_VALUE_IS</samp> for <samp>PROP_LAST_STATUS</samp> would be the result). The order of the results in <samp>CMD_PROP_VALUES_ARE</samp> match the order of properties given in <samp>CMD_PROP_VALUE_MULTI_SET</samp>.  </p>
<p id="rfc.section.6.14.p.6">Since the processing of properties to set stops at the first error, the resulting <samp>CMD_PROP_VALUES_ARE</samp> can contain fewer items than the requested number of properties to set.  </p>
<p id="rfc.section.6.14.p.7">Not all properties can be set using this method. As a general rule of thumb, any property that blocks when setting will fail for that individual property with <samp>STATUS_INVALID_COMMAND_FOR_PROP</samp>.  </p>
<h1 id="rfc.section.6.15">
<a href="#rfc.section.6.15">6.15.</a> <a href="#cmd-prop-values-are" id="cmd-prop-values-are">CMD 23: (NCP -&gt; AP) CMD_PROP_VALUES_ARE</a>
</h1>
<p></p>

<ul><li>Required Capability: <samp>CAP_CMD_MULTI</samp>
</li></ul>

<p> </p>
<pre>
  0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 0|NLI|  TID  |      CMD      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP/VALUE PAIR 1 ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP/VALUE PAIR 2 ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PROP/VALUE PAIR 3 ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:            etc ...            :
</pre>
<p class="figure">Structure of CMD_PROP_VALUE_MULTI_ARE </p>
<p id="rfc.section.6.15.p.2">With each property/value pair above being: </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    LENGTH (LITTLE ENDIAN)     | PROP_KEY (PUI, 1-3 bytes) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  CURRENT PROPERTY VALUE ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.6.15.p.3">This command is emitted by the NCP as the response to both the <samp>CMD_PROP_VALUE_MULTI_GET</samp> and <samp>CMD_PROP_VALUE_MULTI_SET</samp> commands. It is roughly analogous to <samp>CMD_PROP_VALUE_IS</samp>, except that it contains more than one property.  </p>
<p id="rfc.section.6.15.p.4">This command must <strong>ONLY</strong> be emitted by the NCP in response to either <samp>CMD_PROP_VALUE_MULTI_GET</samp> or <samp>CMD_PROP_VALUE_MULTI_SET</samp>. This command MUST NOT be emitted in response to any other command, or emitted asynchronously.  </p>
<p id="rfc.section.6.15.p.5">The arguments are a list of structures containing the emitted property and the associated value. These are presented in the same order as given in the associated initiating command. In cases where getting or setting a specific property resulted in an error, the associated slot in this command will describe <samp>PROP_LAST_STATUS</samp>.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#capabilities" id="capabilities">Capabilities</a>
</h1>
<p id="rfc.section.7.p.1">Capabilities are how an NCP can advertise support for specific behaviors and functionalities. They can be fetched via the <samp>PROP_CAPS</samp> property.  </p>
<p id="rfc.section.7.p.2">See <a href="#prop-caps" class="xref">Section 8.5.6</a> for more information on <samp>PROP_CAPS</samp>.  </p>
<p id="rfc.section.7.p.3">A registry of capability codes is maintained by IANA with various reservation policies in effect for different ranges of values as shown in the table below: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Capability Range</th>
<th class="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0 - 1027</td>
<td class="left">Standards Action</td>
</tr>
<tr>
<td class="left">1027 - 15,359</td>
<td class="left">Unassigned</td>
</tr>
<tr>
<td class="left">15,360 - 16,383</td>
<td class="left">Private Use</td>
</tr>
<tr>
<td class="left">16,384 - 1,999,999</td>
<td class="left">Unassigned</td>
</tr>
<tr>
<td class="left">2,000,000 - 2,097,151</td>
<td class="left">Experimental Use</td>
</tr>
</tbody>
</table>
<p id="rfc.section.7.p.4">The initial content of the registry is shown in the table below.  </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Code</th>
<th class="left">Name</th>
<th class="left">Reference</th>
</tr></thead>
<tbody>
<tr>
<td class="left">1</td>
<td class="left"><samp>CAP_LOCK</samp></td>
<td class="left"><a href="#prop-lock" class="xref">Section 8.5.10</a></td>
</tr>
<tr>
<td class="left">2</td>
<td class="left">Reserved</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">3</td>
<td class="left">Reserved</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">4</td>
<td class="left"><samp>CAP_POWER_SAVE</samp></td>
<td class="left">
<a href="#prop-power-state" class="xref">Section 8.5.8</a>, <a href="#prop-host-power-state" class="xref">Section 8.5.11</a>
</td>
</tr>
<tr>
<td class="left">5</td>
<td class="left">Reserved</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">7</td>
<td class="left"><samp>CAP_PEEK_POKE</samp></td>
<td class="left">
<a href="#cmd-peek" class="xref">Section 6.10</a>-<a href="#cmd-poke" class="xref">Section 6.12</a>
</td>
</tr>
<tr>
<td class="left">8</td>
<td class="left"><samp>CAP_WRITABLE_RAW_STREAM</samp></td>
<td class="left"><a href="#prop-stream-raw" class="xref">Section 8.6.2</a></td>
</tr>
<tr>
<td class="left">9</td>
<td class="left">Reserved</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">10</td>
<td class="left">Reserved</td>
<td class="left"></td>
</tr>
<tr>
<td class="left">11</td>
<td class="left"><samp>CAP_CMD_MULTI</samp></td>
<td class="left"><a href="#cmd-prop-value-multi-get" class="xref">Section 6.13</a></td>
</tr>
<tr>
<td class="left">12</td>
<td class="left"><samp>CAP_UNSOL_UPDATE_FILTER</samp></td>
<td class="left"><a href="#prop-unsol-update-filter" class="xref">Section 8.5.12</a></td>
</tr>
<tr>
<td class="left">512</td>
<td class="left"><samp>CAP_MAC_WHITELIST</samp></td>
<td class="left"><a href="#prop-mac-whitelist" class="xref">Section 8.8.12</a></td>
</tr>
<tr>
<td class="left">513</td>
<td class="left"><samp>CAP_MAC_RAW</samp></td>
<td class="left">EDITOR: to be provided.</td>
</tr>
<tr>
<td class="left">TBD</td>
<td class="left"><samp>CAP_MAC_802_15_4</samp></td>
<td class="left">TBD</td>
</tr>
<tr>
<td class="left">TBD</td>
<td class="left"><samp>CAP_NET_STANDARD</samp></td>
<td class="left">TBD</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#properties" id="properties">Properties</a>
</h1>
<p id="rfc.section.8.p.1">This section defines the syntax and specific operational details of the Spinel properties common to the core protocol.  </p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#command-semantics" id="command-semantics">Command Semantics</a>
</h1>
<p id="rfc.section.8.1.p.1">Individual properties MAY support one or more of the following commands: </p>
<p></p>

<ul>
<li>
<samp>CMD_PROP_VALUE_GET</samp> (<a href="#cmd-prop-value-get" class="xref">Section 6.3</a>)</li>
<li>
<samp>CMD_PROP_VALUE_SET</samp> (<a href="#cmd-prop-value-set" class="xref">Section 6.4</a>)</li>
<li>
<samp>CMD_PROP_VALUE_INSERT</samp> (<a href="#cmd-prop-value-insert" class="xref">Section 6.5</a>)</li>
<li>
<samp>CMD_PROP_VALUE_REMOVE</samp> (<a href="#cmd-prop-value-remove" class="xref">Section 6.6</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.8.1.p.3">Upon an error condition, the NCP SHALL respond in the typical fasion of indicating the error code via a <samp>CMD_PROP_VALUE_IS</samp> command with the appropriate status code(See @detail-status).  </p>
<p id="rfc.section.8.1.p.4">Unless otherwise specified, an NCP MUST NOT emit a <samp>PROP_LAST_STATUS</samp> of <samp>STATUS_OK</samp> in response to the successful execution of any of the above commands.  </p>
<p id="rfc.section.8.1.p.5">Upon successful execution of one of the property manipulation commands, the NCP SHALL send one of the following commands (with the same property key that was used for the sending command) to indicate success: </p>
<p></p>

<ul>
<li>
<samp>CMD_PROP_VALUE_IS</samp> (<a href="#cmd-prop-value-is" class="xref">Section 6.7</a>)</li>
<li>
<samp>CMD_PROP_VALUE_INSERTED</samp> (<a href="#cmd-prop-value-inserted" class="xref">Section 6.8</a>)</li>
<li>
<samp>CMD_PROP_VALUE_REMOVED</samp> (<a href="#cmd-prop-value-removed" class="xref">Section 6.9</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.8.1.p.7">When an NCP has successfully handled a <samp>CMD_PROP_VALUE_INSERT</samp> or <samp>CMD_PROP_VALUE_REMOVE</samp> command on a multi-value property, the NCP SHOULD respond with a <samp>CMD_PROP_VALUE_INSERTED</samp> or <samp>CMD_PROP_VALUE_REMOVED</samp>, respectfully. However, if doing so is prohibitively complex, the NCP MAY instead respond with a <samp>CMD_PROP_VALUE_IS</samp> containing the entire list of items.  </p>
<p id="rfc.section.8.1.p.8">The reason for the above behavior is that the NCP is the ultimate authority on the value of all properties. By always indicating success by responding with the value of the property, we can make sure that the software running on the host is in sync with the behavior of the NCP.  </p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> <a href="#asynchronous-updates" id="asynchronous-updates">Asynchronous Updates</a>
</h1>
<p id="rfc.section.8.2.p.1">Some properties support indicating changes in their state asynchronously by sending the following commands with a TID value of 0: </p>
<p></p>

<ul>
<li>
<samp>CMD_PROP_VALUE_IS</samp> (<a href="#cmd-prop-value-is" class="xref">Section 6.7</a>)</li>
<li>
<samp>CMD_PROP_VALUE_INSERTED</samp> (<a href="#cmd-prop-value-inserted" class="xref">Section 6.8</a>)</li>
<li>
<samp>CMD_PROP_VALUE_REMOVED</samp> (<a href="#cmd-prop-value-removed" class="xref">Section 6.9</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.8.2.p.3">Asynchronous updates for specific properties can be enabled or disabled using <samp>PROP_UNSOL_UPDATE_FILTER</samp>, documented in <a href="#prop-unsol-update-filter" class="xref">Section 8.5.12</a>.  </p>
<h1 id="rfc.section.8.3">
<a href="#rfc.section.8.3">8.3.</a> <a href="#property-identifiers" id="property-identifiers">Property Identifiers</a>
</h1>
<p id="rfc.section.8.3.p.1">IANA maintains a registry of Spinel <samp>PROP_ID</samp> property identifier numbers, with varying registration policies assigned for different ranges according to the following table: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Property ID Range</th>
<th class="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0 - 127</td>
<td class="left">Standards Action</td>
</tr>
<tr>
<td class="left">128 - 4,095</td>
<td class="left">Unassigned</td>
</tr>
<tr>
<td class="left">4,096 - 6,143</td>
<td class="left">Standards Action</td>
</tr>
<tr>
<td class="left">6,144 - 15,359</td>
<td class="left">Unassigned</td>
</tr>
<tr>
<td class="left">15,360 - 16,383</td>
<td class="left">Private Use</td>
</tr>
<tr>
<td class="left">16,384 - 17,407</td>
<td class="left">Standards Action</td>
</tr>
<tr>
<td class="left">17,408 - 1,999,999</td>
<td class="left">Unassigned</td>
</tr>
<tr>
<td class="left">2,000,000 - 2,097,151</td>
<td class="left">Experimental Use</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.8.4">
<a href="#rfc.section.8.4">8.4.</a> <a href="#property-identifier-sections" id="property-identifier-sections">Property Identifier Sections</a>
</h1>
<p id="rfc.section.8.4.p.1">Standard property identifier numbers are assigned in a hierarchy according to their purpose, as shown in the table below: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Name</th>
<th class="left">Primary</th>
<th class="left">Extended</th>
<th class="left">Documentation</th>
</tr></thead>
<tbody>
<tr>
<td class="left">Core</td>
<td class="left">0 - 31</td>
<td class="left">4,096 - 4,607</td>
<td class="left"><a href="#prop-core" class="xref">Section 8.5</a></td>
</tr>
<tr>
<td class="left">PHY</td>
<td class="left">32 - 47</td>
<td class="left">4,608 - 4,863</td>
<td class="left">Physical (PHY) layer specific</td>
</tr>
<tr>
<td class="left">MAC</td>
<td class="left">48 - 63</td>
<td class="left">4,864 - 5,119</td>
<td class="left">Media access (MAC) layer specific</td>
</tr>
<tr>
<td class="left">NET</td>
<td class="left">64 - 79</td>
<td class="left">5,120 - 5,375</td>
<td class="left"><a href="#prop-net" class="xref">Section 8.9</a></td>
</tr>
<tr>
<td class="left">Tech</td>
<td class="left">80 - 95</td>
<td class="left">5,376 - 5,631</td>
<td class="left"><a href="#prop-interface-type" class="xref">Section 8.5.4</a></td>
</tr>
<tr>
<td class="left">IPv6</td>
<td class="left">96 - 111</td>
<td class="left">5,632 - 5,887</td>
<td class="left"><a href="#prop-ipv6" class="xref">Section 8.10</a></td>
</tr>
<tr>
<td class="left">Stream</td>
<td class="left">112 - 127</td>
<td class="left">5,888 - 6,143</td>
<td class="left"><a href="#prop-core" class="xref">Section 8.5</a></td>
</tr>
<tr>
<td class="left">Debug</td>
<td class="left">no primary</td>
<td class="left">16,384 - 17,407</td>
<td class="left"><a href="#prop-debug" class="xref">Section 8.12</a></td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.4.p.2">Note: most of the property identifier sections have two reserved ranges: a "primary" range (which is encoded as a single byte) and an "extended" range (which is encoded as two bytes). Properties used very frequently are generally allocated from the "primary" range.  </p>
<p id="rfc.section.8.4.p.3">EDITOR: the IANA registration template for Spinel standard properties identifiers requires the "Section Name" and "Range Identifier" parameters to facilitate the assignment of a suitable number from the appropriate range.  </p>
<h1 id="rfc.section.8.5">
<a href="#rfc.section.8.5">8.5.</a> <a href="#prop-core" id="prop-core">Core Properties</a>
</h1>
<h1 id="rfc.section.8.5.1">
<a href="#rfc.section.8.5.1">8.5.1.</a> <a href="#prop-last-status" id="prop-last-status">PROP 0: PROP_LAST_STATUS</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Only</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: PUI</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: Reset Reason Code</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.1.p.2">This property describes the status code of the last NCP operation. For many commands, failure is indicated by emitting this property with the TID matching the failing command. It is generally not necessary to ever fetch the value of this property explicitly, as it is often emitted directly as an error response. It is also occasionally emitted as a success response with a value of <samp>STATUS_OK</samp>.  </p>
<p id="rfc.section.8.5.1.p.3">Upon NCP reset, this property MUST be emitted with a status code indicating the reset reason.  </p>
<p id="rfc.section.8.5.1.p.4">Upon receiving an update to PROP<em>LAST</em>STATUS with a status code that indicates a reset, the host SHALL assume that the NCP has been reset and that all properties have reverted to their defined after-reset values.  </p>
<p id="rfc.section.8.5.1.p.5">See <a href="#status-codes" class="xref">Section 5</a> for the complete list of status codes.  </p>
<h1 id="rfc.section.8.5.2">
<a href="#rfc.section.8.5.2">8.5.2.</a> <a href="#prop-protocol-version" id="prop-protocol-version">PROP 1: PROP_PROTOCOL_VERSION</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Constant</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NCP</li>
<li>Value Type: UINT8, UINT8</li>
<li>Post-Reset Value: 4, 3</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.2.p.2">Describes the spinel protocol version information. This property contains two fields: </p>
<pre>
  0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| MAJOR_VERSION | MINOR_VERSION |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">PROP_PROTOCOL_VERSION Value Format </p>
<p></p>

<dl>
<dt>MAJOR_VERSION</dt>
<dd style="margin-left: 8">
<br> The major version number is used to identify backward incompatible differences between protocol versions. The AP MUST enter a FAULT(TODO: Define this) state if the given major version number is unsupportable.</dd>
<dt>MINOR_VERSION</dt>
<dd style="margin-left: 8">
<br> The minor version number is used to identify backward-compatible differences between protocol versions. A mismatch between the advertised minor version number and the minor version that is supported by the AP SHOULD NOT be fatal to the operation of the AP.</dd>
</dl>

<p> </p>
<p id="rfc.section.8.5.2.p.4">This document describes major version 4, minor version 3 of this protocol. (TODO: UPDATE THIS) </p>
<p id="rfc.section.8.5.2.p.5">If a NCP supports multiple NLIs, the value of this property MUST be identical across all implemented NLIs.  </p>
<h1 id="rfc.section.8.5.3">
<a href="#rfc.section.8.5.3">8.5.3.</a> <a href="#prop-ncp-version" id="prop-ncp-version">PROP 2: PROP_NCP_VERSION</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Constant</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NCP</li>
<li>Value Type: STRING</li>
<li>Post-Reset Value: Implementation-Specific</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.3.p.2">Contains a zero-terminated ASCII string which describes the firmware currently running on the NCP.  </p>
<p id="rfc.section.8.5.3.p.3">The value of this string MUST be different for every firmware release.  </p>
<p id="rfc.section.8.5.3.p.4">The format of the string is not strictly defined, but it is intended to present similarly to the "User-Agent" string from HTTP. The following format is RECOMMENDED: </p>
<p><samp>STACK-NAME/STACK-VERSION[BUILD-INFO][; OTHER-INFO][; BUILD-DATE]</samp> </p>
<p id="rfc.section.8.5.3.p.6">Where: </p>
<p></p>

<dl>
<dt>STACK-NAME</dt>
<dd style="margin-left: 8">
<br> The name of the software running on the NCP.</dd>
<dt>STACK-VERSION</dt>
<dd style="margin-left: 8">
<br> The version number of the software running on the NCP, like <samp>1.0</samp> or <samp>3.2.6</samp>
</dd>
<dt>BUILD-INFO</dt>
<dd style="margin-left: 8">
<br> Optional information indicating a specific build, like <samp>b125</samp> or <samp>d26-25-gb684c7f</samp>.</dd>
<dt>OTHER-INFO</dt>
<dd style="margin-left: 8">
<br> Other optional information about the build.</dd>
<dt>BUILD-DATE</dt>
<dd style="margin-left: 8">
<br> OPTIONAL build date.</dd>
</dl>

<p> </p>
<p id="rfc.section.8.5.3.p.8">Examples: </p>
<p></p>

<ul>
<li><samp>OpenThread/1.0d26-25-gb684c7f; DEBUG; May 9 2016 18:22:04</samp></li>
<li><samp>ConnectIP/2.0b125 s1 ALPHA; Sept 24 2015 20:49:19</samp></li>
</ul>

<p> </p>
<p id="rfc.section.8.5.3.p.10">If a NCP supports multiple NLIs, the value of this property MUST be identical across all implemented NLIs.  </p>
<h1 id="rfc.section.8.5.4">
<a href="#rfc.section.8.5.4">8.5.4.</a> <a href="#prop-interface-type" id="prop-interface-type">PROP 3: PROP_INTERFACE_TYPE</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Constant</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: PUI</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: Implementation-Specific</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.4.p.2">This unsigned packed integer identifies the network protocol implemented by this NCP. A registry of network interface type codes is maintained by IANA with a reservation policy of Specification Required. The initial content of the registry is shown in the table below: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Code</th>
<th class="left">Network protocol</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0</td>
<td class="left">Bootloader</td>
</tr>
<tr>
<td class="left">2</td>
<td class="left">ZigBee IP(TM)</td>
</tr>
<tr>
<td class="left">3</td>
<td class="left">Thread(R)</td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.5.4.p.3">The AP MUST enter a FAULT state if it does not recognize the network protocol given by the NCP.  </p>
<h1 id="rfc.section.8.5.5">
<a href="#rfc.section.8.5.5">8.5.5.</a> <a href="#prop-interface-vendor-id" id="prop-interface-vendor-id">PROP 4: PROP_INTERFACE_VENDOR_ID</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Constant</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NCP</li>
<li>Value Type: PUI</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: Implementation-Specific</li>
</ul>

<p> </p>
<p><a id="CREF2" class="info">[CREF2]<span class="info">JW: I have no idea how to write the IANA registry creation text for this. --</span></a></p>
<p><a id="CREF3" class="info">[CREF3]<span class="info">RQ: Maybe we should switch this over to be a string instead? --</span></a></p>
<h1 id="rfc.section.8.5.6">
<a href="#rfc.section.8.5.6">8.5.6.</a> <a href="#prop-caps" id="prop-caps">PROP 5: PROP_CAPS</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Constant</li>
<li>Has Item Length Prefix: No</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: PUI</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: Implementation-Specific</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.6.p.2">Describes the supported capabilities of this NCP. Encoded as a list of packed unsigned integers. See <a href="#capabilities" class="xref">Section 7</a> for a list of values.  </p>
<h1 id="rfc.section.8.5.7">
<a href="#rfc.section.8.5.7">8.5.7.</a> <a href="#prop-interface-count" id="prop-interface-count">PROP 6: PROP_INTERFACE_COUNT</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Constant</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NCP</li>
<li>Item Type: UINT8</li>
<li>Units: Count</li>
<li>Post-Reset Value: 1-4</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.7.p.2">Describes the number of concurrent interfaces supported by this NCP.  Since the concurrent interface mechanism is still TBD, this value MUST always be one.  </p>
<p id="rfc.section.8.5.7.p.3">If a NCP supports multiple NLIs, the value of this property MUST be identical across all implemented NLIs.  </p>
<h1 id="rfc.section.8.5.8">
<a href="#rfc.section.8.5.8">8.5.8.</a> <a href="#prop-power-state" id="prop-power-state">PROP 7: PROP_POWER_STATE</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read/Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: <strong>RECOMENDED</strong>
</li>
<li>Scope: NLI</li>
<li>Item Type: UINT8</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: <samp>POWER_STATE_ONLINE</samp>
</li>
<li>Required Capability: <samp>CAP_POWER_SAVE</samp>
</li>
<li>See Also: <a href="#prop-mac-data-poll-period" class="xref">Section 8.8.11</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.8.p.2">A single byte coded that indicates the current power state of the NCP. Setting this property allows controls of the current NCP power state. The following table enumerates the standard codes and their significance.  </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Code</th>
<th class="left">Name</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0</td>
<td class="left"><samp>POWER_STATE_OFFLINE</samp></td>
</tr>
<tr>
<td class="left">1</td>
<td class="left"><samp>POWER_STATE_DEEP_SLEEP</samp></td>
</tr>
<tr>
<td class="left">2</td>
<td class="left"><samp>POWER_STATE_STANDBY</samp></td>
</tr>
<tr>
<td class="left">3</td>
<td class="left"><samp>POWER_STATE_LOW_POWER</samp></td>
</tr>
<tr>
<td class="left">4</td>
<td class="left"><samp>POWER_STATE_ONLINE</samp></td>
</tr>
</tbody>
</table>
<p><a id="CREF4" class="info">[CREF4]<span class="info">JW: TODO: We should consider reversing the numbering here so that 0 is `POWER_STATE_ONLINE`. We may also want to include some extra values between the defined values for future expansion, so that we can preserve the ordered relationship.  --</span></a></p>
<p></p>

<dl>
<dt>POWER_STATE_OFFLINE</dt>
<dd style="margin-left: 8">
<br> NCP is physically powered off.</dd>
<dt>POWER_STATE_DEEP_SLEEP</dt>
<dd style="margin-left: 8">
<br> NCP is not powered to detect any events on physical network media.</dd>
<dt>POWER_STATE_STANDBY</dt>
<dd style="margin-left: 8">
<br> NCP is powered only to detect certain events on physical network media that signal to wake.</dd>
<dt>POWER_STATE_LOW_POWER</dt>
<dd style="margin-left: 8">
<br> NCP is powered only for limited responsiveness for power conservation purposes.</dd>
<dt>POWER_STATE_ONLINE</dt>
<dd style="margin-left: 8">
<br> NCP is powered for full responsiveness.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.5.9">
<a href="#rfc.section.8.5.9">8.5.9.</a> <a href="#prop-hwaddr" id="prop-hwaddr">PROP 8: PROP_HWADDR</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Only</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: EUI64_BE</li>
<li>Post-Reset Value: Determined by Factory</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.9.p.2">The EUI-64 (TODO:CITE) format of the link-layer address of the device.  MAY be different across multiple NLIs.  </p>
<h1 id="rfc.section.8.5.10">
<a href="#rfc.section.8.5.10">8.5.10.</a> <a href="#prop-lock" id="prop-lock">PROP 9: PROP_LOCK</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Scope: NLI</li>
<li>Required Capability: <samp>CAP_LOCK</samp>
</li>
<li>Value Type: BOOL</li>
<li>Post-Reset Value: 0 (false)</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.10.p.2">Property transaction lock. Used for grouping transactional changes to several properties for simultaneous commit, or to temporarily prevent the automatic updating of property values. When this property is set, all non-Spinel-related operations of the NCP are effectively frozen until it is cleared. There is no support for transaction rollback.  </p>
<p id="rfc.section.8.5.10.p.3">This property is only supported if the <samp>CAP_LOCK</samp> capability is present.  </p>
<p id="rfc.section.8.5.10.p.4">Unlike most other properties, setting this property to true when the value of the property is already true SHALL fail with a last status of <samp>STATUS_ALREADY</samp>.  </p>
<h1 id="rfc.section.8.5.11">
<a href="#rfc.section.8.5.11">8.5.11.</a> <a href="#prop-host-power-state" id="prop-host-power-state">PROP 10: PROP_HOST_POWER_STATE</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: RECOMMENDED</li>
<li>Scope: NCP</li>
<li>Required Capability: <samp>CAP_POWER_SAVE</samp>
</li>
<li>Value Type: UINT8</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: <samp>HOST_POWER_STATE_ONLINE</samp>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.11.p.2">Describes the current power state of the <em>AP</em>. This property is used by the AP to inform the NCP when it has changed power states. The NCP can then use this state to determine which properties need asynchronous updates. Enumeration is encoded as a single unsigned byte.  </p>
<p id="rfc.section.8.5.11.p.3">The following table enumerates the standard codes and their significance.  </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Code</th>
<th class="left">Name</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0</td>
<td class="left"><samp>HOST_POWER_STATE_OFFLINE</samp></td>
</tr>
<tr>
<td class="left">1</td>
<td class="left"><samp>HOST_POWER_STATE_DEEP_SLEEP</samp></td>
</tr>
<tr>
<td class="left">3</td>
<td class="left"><samp>HOST_POWER_STATE_LOW_POWER</samp></td>
</tr>
<tr>
<td class="left">4</td>
<td class="left"><samp>HOST_POWER_STATE_ONLINE</samp></td>
</tr>
</tbody>
</table>
<p><a id="CREF5" class="info">[CREF5]<span class="info">JW: EDITOR: We should consider reversing the numbering here so that 0 is `POWER_STATE_ONLINE`. We may also want to include some additional reserved values between the defined values for future expansion, so that we can preserve the ordered relationship. See the similar editorial comment at (#prop-power-state).  --</span></a></p>
<p></p>

<dl>
<dt>HOST_POWER_STATE_OFFLINE</dt>
<dd style="margin-left: 8">
<br> AP is physically powered off and cannot be awakened by the NCP.</dd>
<dt>HOST_POWER_STATE_DEEP_SLEEP</dt>
<dd style="margin-left: 8">
<br> AP is in a deep low power state and will require a long time to wake. In this state, the NCP MUST NOT send any commands, including any commands that contain network packets, prior to signaling the host explicitly to awaken and receiving a signal to update the state to <samp>HOST_POWER_STATE_ONLINE</samp>.</dd>
<dt>HOST_POWER_STATE_LOW_POWER</dt>
<dd style="margin-left: 8">
<br> AP is in a low power state and can be awakened quickly.</dd>
<dt>HOST_POWER_STATE_ONLINE</dt>
<dd style="margin-left: 8">
<br> AP is powered for full responsiveness.</dd>
</dl>

<p> </p>
<p id="rfc.section.8.5.11.p.6">After the AP sends <samp>CMD_PROP_VALUE_SET</samp> for this property with a value other than <samp>HOST_POWER_STATE_ONLINE</samp>, it SHOULD wait for the NCP to acknowledge the property update (with a <samp>CMD_VALUE_IS</samp> command) before entering the specified power state.  </p>
<p id="rfc.section.8.5.11.p.7">Upon the NCP receiving any command when the state is not <samp>HOST_POWER_STATE_ONLINE</samp>, it MUST silently update the state to the <samp>HOST_POWER_STATE_ONLINE</samp> value.  </p>
<p id="rfc.section.8.5.11.p.8">When the state is not <samp>HOST_POWER_STATE_ONLINE</samp>, the NCP <strong>SHOULD NOT</strong> send any commands except important notifications that warrant awakening the AP host, and the NCP MUST NOT send any informative messages on <samp>PROP_DEBUG_STREAM</samp>.  </p>
<p id="rfc.section.8.5.11.p.9">The AP MUST NOT send a value of <samp>HOST_POWER_STATE</samp> other than one of the standard codes defined here. If the NCP receives a value other than a standard code, then it SHOULD set the state to <samp>HOST_POWER_STATE_LOW_POWER</samp>.  </p>
<p id="rfc.section.8.5.11.p.10">If the NCP has the <samp>CAP_UNSOL_UPDATE_FILTER</samp> capability, any unsolicited property updates masked by <samp>PROP_UNSOL_UPDATE_FILTER</samp> should be honored while the AP indicates it is in a low-power state.  After resuming to the <samp>HOST_POWER_STATE_ONLINE</samp> state, the value of <samp>PROP_UNSOL_UPDATE_FILTER</samp> MUST be unchanged from the value assigned prior to the AP indicating it was entering a low-power state.  </p>
<p id="rfc.section.8.5.11.p.11">The AP MUST use NLI 0 with commands using this property. The NCP SHOULD explicitly fail to process commands setting this property if NLI is not zero. The operational semantics of this property when NLI is not zero are not specified.  </p>
<h1 id="rfc.section.8.5.12">
<a href="#rfc.section.8.5.12">8.5.12.</a> <a href="#prop-unsol-update-filter" id="prop-unsol-update-filter">PROP 4104: PROP_UNSOL_UPDATE_FILTER</a>
</h1>
<p></p>

<ul>
<li>Type: Multi-Value, Read-Write</li>
<li>Has Item Length Prefix: No</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Scope: NLI</li>
<li>Required Capability: <samp>CAP_UNSOL_UPDATE_FILTER</samp>
</li>
<li>Item Type: PUI (<a href="#packed-unsigned-integer" class="xref">Section 2.1</a>)</li>
<li>Units: Enumeration (Property Keys)</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.12.p.2">Contains a list of property IDs which are <em>excluded</em> from generating unsolicited value updates. This property MUST be empty after NCP reset.  </p>
<p id="rfc.section.8.5.12.p.3">In other words, the AP may opt-out of unsolicited property updates for a specific property by adding that property id to this list.  </p>
<p id="rfc.section.8.5.12.p.4">The AP SHOULD NOT add properties to this list which are not present in <samp>PROP_UNSOL_UPDATE_LIST</samp>. If such properties are added, the NCP MUST ignore the unsupported properties.  </p>
<p><a id="CREF6" class="info">[CREF6]<span class="info">RQ: The justification for the above behavior is to attempt to avoid possible future interop problems by explicitly making sure that unknown properties are ignored. Since unknown properties will obviously not be generating unsolicited updates, it seems fairly harmless. An implementation may print out a warning to the debug stream.  Note that the error is still detectable: If you VALUE\_SET unsupported properties, the resulting VALUE\_IS would contain only the supported properties of that set(since the unsupported properties would be ignored). If an implementation cares that much about getting this right then it needs to make sure that it checks PROP\_UNSOL\_UPDATE\_LIST first.  --</span></a></p>
<h1 id="rfc.section.8.5.13">
<a href="#rfc.section.8.5.13">8.5.13.</a> <a href="#prop-unsol-update-list" id="prop-unsol-update-list">PROP 4105: PROP_UNSOL_UPDATE_LIST</a>
</h1>
<p></p>

<ul>
<li>Type: Multi-Value, Constant</li>
<li>Has Item Length Prefix: No</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Scope: NLI</li>
<li>Required Capability: <samp>CAP_UNSOL_UPDATE_FILTER</samp>
</li>
<li>Item Type: PUI (<a href="#packed-unsigned-integer" class="xref">Section 2.1</a>)</li>
<li>Units: Enumeration (Property Keys)</li>
<li>Post-Reset Value: Implementation Specific</li>
</ul>

<p> </p>
<p id="rfc.section.8.5.13.p.2">Contains a list of properties which are capable of generating unsolicited value updates. This list can be used when populating <samp>PROP_UNSOL_UPDATE_FILTER</samp> to disable all unsolicited property updates.  </p>
<p id="rfc.section.8.5.13.p.3">The NCP MUST NOT change the value of this property after sending a <samp>CMD_VALUE_IS</samp> for <samp>PROP_LAST_STATUS</samp> with any of the <samp>STATUS_RESET_xxxxx</samp> status codes.  </p>
<p id="rfc.section.8.5.13.p.4">Note: not all properties that support unsolicited updates need to be listed here. Some properties, network media scan results for example, are only generated due to direct action on the part of the AP, so those properties SHOULD NOT not be included in this list.  </p>
<h1 id="rfc.section.8.6">
<a href="#rfc.section.8.6">8.6.</a> <a href="#prop-stream" id="prop-stream">Stream Properties</a>
</h1>
<h1 id="rfc.section.8.6.1">
<a href="#rfc.section.8.6.1">8.6.1.</a> <a href="#prop-stream-debug" id="prop-stream-debug">PROP 112: PROP_STREAM_DEBUG</a>
</h1>
<p></p>

<ul>
<li>Type: Byte-Stream, Output-Only</li>
<li>Required: OPTIONAL</li>
<li>Scope: NCP</li>
<li>Value Type: UTF8 Fragment</li>
</ul>

<p> </p>
<p id="rfc.section.8.6.1.p.2">This stream provides human-readable debugging output which may be displayed in the AP logs. It is intended to be treated as a one-way virtual serial stream. The AP MUST NOT assume that each emission of this property is self-contained, instead the AP must use newline characters for that purpose.  </p>
<p id="rfc.section.8.6.1.p.3">The location of newline characters MUST NOT not assumed by the AP: it is the NCP's responsibility to insert newline characters where needed, just like with any other text stream.  </p>
<p id="rfc.section.8.6.1.p.4">The emitted data is UTF8-encoded without any zero termination. Note that the last UTF8 character MAY possibly be truncated. If the last UTF8 character is truncated, the truncated bytes MUST be the first bytes of the next emission from this stream.  </p>
<h1 id="rfc.section.8.6.2">
<a href="#rfc.section.8.6.2">8.6.2.</a> <a href="#prop-stream-raw" id="prop-stream-raw">PROP 113: PROP_STREAM_RAW</a>
</h1>
<p></p>

<ul>
<li>Type: Packet-Stream, Input/Output</li>
<li>Required: OPTIONAL</li>
<li>Scope: NLI</li>
<li>Related Capabilities: <ul><li>
<samp>CAP_WRITABLE_RAW_STREAM</samp>: Can be written to if present.</li></ul>
</li>
<li>Value Type: Structure</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-|-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   FRAME_LEN (Little endian)   | FRAME_DATA ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   FRAME_METADATA ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.8.6.2.p.2">This stream provides the capability of sending and receiving raw packets to and from the network. The exact format of the frame metadata and data is dependent on the MAC and PHY being used.  </p>
<p id="rfc.section.8.6.2.p.3">Implementations MAY support the ability to transmit arbitrary raw packets. Support for this feature is indicated by the presence of the <samp>CAP_WRITABLE_RAW_STREAM</samp> capability.  </p>
<p id="rfc.section.8.6.2.p.4">If the capability <samp>CAP_WRITABLE_RAW_STREAM</samp> is set, then packets written to this stream with <samp>CMD_PROP_VALUE_SET</samp> will be sent out over the radio. This allows the caller to use the network directly, with the full network layer stack being implemented on the AP instead of the NCP.  </p>
<h1 id="rfc.section.8.6.2.1">
<a href="#rfc.section.8.6.2.1">8.6.2.1.</a> <a href="#frame-metadata-format" id="frame-metadata-format">Frame Metadata Format</a>
</h1>
<p id="rfc.section.8.6.2.1.p.1">Any data past the end of <samp>FRAME_DATA</samp> is considered metadata and is OPTIONAL. Frame metadata MAY be empty or partially specified. The operational semantics of using frame metadata is not specified in the core protocol.  </p>
<h1 id="rfc.section.8.6.3">
<a href="#rfc.section.8.6.3">8.6.3.</a> <a href="#prop-stream-net" id="prop-stream-net">PROP 114: PROP_STREAM_NET</a>
</h1>
<p></p>

<ul>
<li>Type: Packet-Stream, Input/Output</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: Structure</li>
<li>See Also: <a href="#prop-stream-net-insecure" class="xref">Section 8.6.4</a>
</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-|-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   FRAME_LEN (Little endian)   | FRAME_DATA ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   FRAME_METADATA ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.8.6.3.p.2">This stream provides the capability of sending and receiving data packets to and from the currently attached network.  </p>
<p id="rfc.section.8.6.3.p.3">Any data past the end of <samp>FRAME_LEN</samp> is considered metadata, the format of which is described in <a href="#frame-metadata-format" class="xref">Section 8.6.2.1</a>.  </p>
<h1 id="rfc.section.8.6.4">
<a href="#rfc.section.8.6.4">8.6.4.</a> <a href="#prop-stream-net-insecure" id="prop-stream-net-insecure">PROP 115: PROP_STREAM_NET_INSECURE</a>
</h1>
<p></p>

<ul>
<li>Type: Packet-Stream, Input/Output</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: Structure</li>
<li>See Also: <a href="#prop-stream-net" class="xref">Section 8.6.3</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.6.4.p.2">The structure of the value of this property is identical to that of PROP_STREAM_NET (<a href="#prop-stream-net" class="xref">Section 8.6.3</a>).  </p>
<p id="rfc.section.8.6.4.p.3">This stream provides the capability of sending and receiving plaintext non-authenticated data packets to and from the currently attached network.  </p>
<h1 id="rfc.section.8.7">
<a href="#rfc.section.8.7">8.7.</a> <a href="#prop-phy" id="prop-phy">PHY Properties</a>
</h1>
<h1 id="rfc.section.8.7.1">
<a href="#rfc.section.8.7.1">8.7.1.</a> <a href="#prop-phy-enabled" id="prop-phy-enabled">PROP 32: PROP_PHY_ENABLED</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read/Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: <ul>
<li>
<samp>CMD_PROP_VALUE_GET</samp>: REQUIRED</li>
<li>
<samp>CMD_PROP_VALUE_SET</samp>: <strong>RECOMENDED</strong>
</li>
</ul>
</li>
<li>Scope: NLI</li>
<li>Related Capabilities: <ul><li>
<samp>CAP_MAC_RAW</samp> required to use <samp>CMD_PROP_VALUE_SET</samp>
</li></ul>
</li>
<li>Value Type: BOOL</li>
<li>Post-Reset Value: 0 (false)</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.1.p.2">Set to 1 if the PHY is enabled, set to 0 otherwise.  May be directly enabled to bypass higher-level packet processing in order to implement things like packet sniffers. This property can only be written if the <samp>SPINEL_CAP_MAC_RAW</samp> capability is present.  </p>
<h1 id="rfc.section.8.7.2">
<a href="#rfc.section.8.7.2">8.7.2.</a> <a href="#prop-phy-chan" id="prop-phy-chan">PROP 33: PROP_PHY_CHAN</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Value Type: UINT8</li>
<li>Units: Channel Index</li>
<li>Post-Reset Value: Unspecified</li>
<li>See Also: (<a href="#prop-phy-chan-supported" class="xref">Section 8.7.3</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.2.p.2">Value is the current channel index. Must be set to one of the values contained in <samp>PROP_PHY_CHAN_SUPPORTED</samp>.  m </p>
<h1 id="rfc.section.8.7.3">
<a href="#rfc.section.8.7.3">8.7.3.</a> <a href="#prop-phy-chan-supported" id="prop-phy-chan-supported">PROP 34: PROP_PHY_CHAN_SUPPORTED</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Constant</li>
<li>Has Item Length Prefix: No</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Item Type: UINT8</li>
<li>Units: Channel Index</li>
<li>See Also: (<a href="#prop-phy-chan" class="xref">Section 8.7.2</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.3.p.2">Value is a list of channel indexes that are supported by the NCP.  </p>
<h1 id="rfc.section.8.7.4">
<a href="#rfc.section.8.7.4">8.7.4.</a> <a href="#prop-phy-freq" id="prop-phy-freq">PROP 35: PROP_PHY_FREQ</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Only</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: UINT32_LE</li>
<li>Units: kHz</li>
<li>Post-Reset Value: Unspecified</li>
<li>See Also: (<a href="#prop-phy-chan" class="xref">Section 8.7.2</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.4.p.2">Value is the radio frequency (in kilohertz) of the current channel.  </p>
<h1 id="rfc.section.8.7.5">
<a href="#rfc.section.8.7.5">8.7.5.</a> <a href="#prop-phy-cca-threshold" id="prop-phy-cca-threshold">PROP 36: PROP_PHY_CCA_THRESHOLD</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Value Type: INT8</li>
<li>Unit: dB (RF Power)</li>
<li>Post-Reset Value: Implementation Specified</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.5.p.2">Value is the CCA (clear-channel assessment) threshold. Set to -128 to disable.  </p>
<p id="rfc.section.8.7.5.p.3">The specific meaning of zero dB is implementation-specific, but MUST be consistant with definitions of other properties that express power. It is RECOMMENDED that zero dB represent one milliwatt of power (0dBm), as measured from the antenna connector.  </p>
<p id="rfc.section.8.7.5.p.4">When setting, the value SHOULD be rounded down to a value that is supported by the underlying radio hardware.  </p>
<h1 id="rfc.section.8.7.6">
<a href="#rfc.section.8.7.6">8.7.6.</a> <a href="#prop-phy-tx-power" id="prop-phy-tx-power">PROP 37: PROP_PHY_TX_POWER</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Value Type: INT8</li>
<li>Unit: dB (RF Power)</li>
<li>Post-Reset Value: 0dB RECOMMENDED</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.6.p.2">Value is the maximum transmit power the network stack is allowed to set the radio to, measured in decibels.  </p>
<p id="rfc.section.8.7.6.p.3">The specific meaning of zero dB is implementation-specific, but MUST be consistant with definitions of other properties that express power. It is RECOMMENDED that zero dB represent one milliwatt of power (0dBm), as measured from the antenna connector.  </p>
<p id="rfc.section.8.7.6.p.4">When setting, the value SHOULD be rounded down to a value that is supported by the underlying radio hardware.  </p>
<h1 id="rfc.section.8.7.7">
<a href="#rfc.section.8.7.7">8.7.7.</a> <a href="#prop-phy-rssi" id="prop-phy-rssi">PROP 38: PROP_PHY_RSSI</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Only</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Value Type: INT8</li>
<li>Unit: dB (RF Power)</li>
<li>Post-Reset Value: Unspecified</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.7.p.2">Value is the current RSSI (Received Signal Strength Indication) from the radio. This value can be used in energy scans and for determining the ambient noise floor for the operating environment.  </p>
<p id="rfc.section.8.7.7.p.3">The specific meaning of zero dB is implementation-specific, but MUST be consistant with definitions of other properties that express power. It is RECOMMENDED that zero dB represent one milliwatt of power (0dBm), as measured from the antenna connector.  </p>
<h1 id="rfc.section.8.7.8">
<a href="#rfc.section.8.7.8">8.7.8.</a> <a href="#prop-phy-rx-sensitivity" id="prop-phy-rx-sensitivity">PROP 39: PROP_PHY_RX_SENSITIVITY</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Constant</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Value Type: INT8</li>
<li>Unit: dB</li>
</ul>

<p> </p>
<p id="rfc.section.8.7.8.p.2">Value is the radio receive sensitivity. This value can be used as lower bound noise floor for link metrics computation.  </p>
<p id="rfc.section.8.7.8.p.3">The specific meaning of zero dB is implementation-specific, but MUST be consistant with definitions of other properties that express power. It is RECOMMENDED that zero dB represent one milliwatt of power (0dBm), as measured from the antenna connector.  </p>
<h1 id="rfc.section.8.8">
<a href="#rfc.section.8.8">8.8.</a> <a href="#prop-mac" id="prop-mac">MAC Properties</a>
</h1>
<h1 id="rfc.section.8.8.1">
<a href="#rfc.section.8.8.1">8.8.1.</a> <a href="#prop-mac-scan-state" id="prop-mac-scan-state">PROP 48: PROP_MAC_SCAN_STATE</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Value Type: UINT8</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: <samp>SCAN_STATE_IDLE</samp>
</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Enumeration of scan states </caption>
<thead><tr>
<th class="center">Id</th>
<th class="center">Name</th>
</tr></thead>
<tbody>
<tr>
<td class="center">0</td>
<td class="center"><samp>SCAN_STATE_IDLE</samp></td>
</tr>
<tr>
<td class="center">1</td>
<td class="center"><samp>SCAN_STATE_BEACON</samp></td>
</tr>
<tr>
<td class="center">2</td>
<td class="center"><samp>SCAN_STATE_ENERGY</samp></td>
</tr>
</tbody>
</table>
<p></p>

<dl>
<dt>SCAN_STATE_IDLE</dt>
<dd style="margin-left: 8">
<br> Indicates that the scanning subsystem is not currently scanning.  You can set the scan state to this value to cancel a scan in progress.</dd>
<dt>SCAN_STATE_BEACON</dt>
<dd style="margin-left: 8">
<br> Indicates that the scanning subsystem is performing an active scan for nearby networks. You can start an active scan by setting the scan state to this value.</dd>
<dt>SCAN_STATE_ENERGY</dt>
<dd style="margin-left: 8">
<br> Indicates that the scanning subsystem is performing a passive scan to determine RF energy levels. You can start a passive scan by setting the scan state to this value.</dd>
</dl>

<p> </p>
<p id="rfc.section.8.8.1.p.3">The scan is complete when the NCP has indicated that the value of has changed to <samp>SCAN_STATE_IDLE</samp>.  </p>
<p id="rfc.section.8.8.1.p.4">If an attempt to set this property to a value of anything other than <samp>SCAN_STATE_IDLE</samp> while the current value isn't <samp>SCAN_STATE_IDLE</samp>, the NCP MUST fail and respond with a last status of <samp>STATUS_ALREADY</samp>.  However, setting this property to <samp>SCAN_STATE_IDLE</samp> while it is already <samp>SCAN_STATE_IDLE</samp> MUST NOT be considered an error.  </p>
<h1 id="rfc.section.8.8.2">
<a href="#rfc.section.8.8.2">8.8.2.</a> <a href="#prop-mac-scan-mask" id="prop-mac-scan-mask">PROP 49: PROP_MAC_SCAN_MASK</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Write</li>
<li>Has Item Length Prefix: No</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Item Type: UINT8</li>
<li>Units: Channel Index</li>
<li>Post-Reset Value: Same as <samp>PROP_PHY_CHAN_SUPPORTED</samp>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.2.p.2">This property contains the list of channels that will be scanned.  </p>
<p id="rfc.section.8.8.2.p.3">Setting this property to be empty MUST reinitialize it with the contents of <samp>PROP_PHY_CHAN_SUPPORTED</samp>.  </p>
<h1 id="rfc.section.8.8.3">
<a href="#rfc.section.8.8.3">8.8.3.</a> <a href="#prop-mac-scan-period" id="prop-mac-scan-period">PROP 50: PROP_MAC_SCAN_PERIOD</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: RECOMMENDED</li>
<li>Value Type: UINT16_LE</li>
<li>Unit: milliseconds per channel</li>
<li>Post-Reset Value: 100ms RECOMMENDED</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.3.p.2">Number of milliseconds that the scan should wait per channel for beacons or for collecting energy samples.  </p>
<h1 id="rfc.section.8.8.4">
<a href="#rfc.section.8.8.4">8.8.4.</a> <a href="#prop-mac-scan-beacon" id="prop-mac-scan-beacon">PROP 51: PROP_MAC_SCAN_BEACON</a>
</h1>
<p></p>

<ul>
<li>Type: Packet-Stream, Output-Only</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: Structure</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    CHANNEL    |      RSSI     | MAC_LEN(Bytes, Little endian) |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   MAC_DATA ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| NET_LEN(Bytes, Little endian) | NET_DATA ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.8.8.4.p.2">Scan beacons have two embedded structures which contain information about the MAC layer and the NET layer. Their format depends on the MAC and NET layer currently in use.  </p>
<p id="rfc.section.8.8.4.p.3">For example, in an 802.15.4 PHY (identified by <samp>CAP_MAC_802_15_4</samp>), <samp>MAC_DATA</samp> would be formatted as follows: </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      EUI-64 (Upper word) ...                  :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:                  ... EUI-64 (Lower word)                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  SHORT_ADDR (Little Endian)   |     PAN_ID (Little Endian)    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      LQI      |
+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.8.8.4.p.4">For the standard network layer (identified by <samp>CAP_NET_STANDARD</samp>), the <samp>NET_DATA</samp> formatted as follows: </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        PROTOCOL (PUI, three-bytes shown)      |     FLAGS     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   NETWORK_NAME (UTF8) ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 0 0|   XPANID_LEN (Little endian)  | XPANID ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-|-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  STEERING_LEN(Little endian)  | STEERING_DATA ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.8.8.4.p.5">Extra parameters may be added to each of the structures in the future, so care should be taken to read the length that prepends each structure.  </p>
<p id="rfc.section.8.8.4.p.6">The RSSI is measured in dB.  The specific meaning of zero dB is implementation-specific, but MUST be consistant with definitions of other properties that express power. It is RECOMMENDED that zero dB represent one milliwatt of power (0dBm), as measured from the antenna connector.  </p>
<h1 id="rfc.section.8.8.5">
<a href="#rfc.section.8.8.5">8.8.5.</a> <a href="#prop-mac-15-4-laddr" id="prop-mac-15-4-laddr">PROP 52: PROP_MAC_15_4_LADDR</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED with <samp>CAP_MAC_802_15_4</samp>
</li>
<li>Value Type: EUI64_BE</li>
<li>Required Capability: <samp>CAP_MAC_802_15_4</samp>
</li>
<li>Post-Reset Value: Tehnology-dependent. MAY  be <samp>PROP_HWADDR</samp> or randomly generated.</li>
</ul>

<p> </p>
<p><a id="CREF7" class="info">[CREF7]<span class="info">RQ: Break PROP_MAC_15_4_LADDR out into an 802.15.4-specific section --</span></a></p>
<p id="rfc.section.8.8.5.p.3">The 802.15.4 long (extended) address of this node.  </p>
<p id="rfc.section.8.8.5.p.4">This property is only present on NCPs which implement 802.15.4 </p>
<h1 id="rfc.section.8.8.6">
<a href="#rfc.section.8.8.6">8.8.6.</a> <a href="#prop-mac-15-4-saddr" id="prop-mac-15-4-saddr">PROP 53: PROP_MAC_15_4_SADDR</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: <ul>
<li>
<samp>CMD_PROP_VALUE_GET</samp>: REQUIRED  with <samp>CAP_MAC_802_15_4</samp>
</li>
<li>
<samp>CMD_PROP_VALUE_SET</samp>: RECOMMENDED  with <samp>CAP_MAC_802_15_4</samp>
</li>
</ul>
</li>
<li>Required Capability: <samp>CAP_MAC_802_15_4</samp>
</li>
<li>Value Type: UINT16_LE</li>
<li>Post-Reset Value: 65535 (0xFFFF)</li>
</ul>

<p> </p>
<p><a id="CREF8" class="info">[CREF8]<span class="info">RQ: Break PROP_MAC_15_4_SADDR out into an 802.15.4-specific section --</span></a></p>
<p id="rfc.section.8.8.6.p.3">The 802.15.4 short address of this node.  </p>
<p id="rfc.section.8.8.6.p.4">This property is only present on NCPs which implement 802.15.4 </p>
<h1 id="rfc.section.8.8.7">
<a href="#rfc.section.8.8.7">8.8.7.</a> <a href="#prop-mac-15-4-panid" id="prop-mac-15-4-panid">PROP 54: PROP_MAC_15_4_PANID</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: <ul>
<li>
<samp>CMD_PROP_VALUE_GET</samp>: REQUIRED  with <samp>CAP_MAC_802_15_4</samp>
</li>
<li>
<samp>CMD_PROP_VALUE_SET</samp>: RECOMMENDED  with <samp>CAP_MAC_802_15_4</samp>
</li>
</ul>
</li>
<li>Required Capability: <samp>CAP_MAC_802_15_4</samp>
</li>
<li>Value Type: UINT16_LE</li>
<li>Post-Reset Value: 65535 (0xFFFF)</li>
</ul>

<p> </p>
<p><a id="CREF9" class="info">[CREF9]<span class="info">RQ: Break PROP_MAC_15_4_PANID out into an 802.15.4-specific section --</span></a></p>
<p id="rfc.section.8.8.7.p.3">The 802.15.4 PANID this node is associated with.  </p>
<p id="rfc.section.8.8.7.p.4">This property is only present on NCPs which implement 802.15.4 </p>
<h1 id="rfc.section.8.8.8">
<a href="#rfc.section.8.8.8">8.8.8.</a> <a href="#prop-mac-raw-stream-enabled" id="prop-mac-raw-stream-enabled">PROP 55: PROP_MAC_RAW_STREAM_ENABLED</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: RECOMMENDED</li>
<li>Value Type: BOOL</li>
<li>Post-Reset Value: 0 (false)</li>
<li>See also: (<a href="#prop-stream-raw" class="xref">Section 8.6.2</a>)</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.8.p.2">Set to true to enable raw MAC frames to be emitted from <samp>PROP_STREAM_RAW</samp>.  This allows for raw packet sniffers to be implemented.  </p>
<h1 id="rfc.section.8.8.9">
<a href="#rfc.section.8.8.9">8.8.9.</a> <a href="#prop-mac-promiscuous-mode" id="prop-mac-promiscuous-mode">PROP 56: PROP_MAC_PROMISCUOUS_MODE</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: RECOMMENDED</li>
<li>Value Type: UINT8</li>
<li>Units: Enumeration</li>
<li>Post-Reset Value: <samp>MAC_PROMISCUOUS_MODE_OFF</samp>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.9.p.2">Possible Values: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">Id</th>
<th class="center">Name</th>
<th class="center">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="center">0</td>
<td class="center"><samp>MAC_PROMISCUOUS_MODE_OFF</samp></td>
<td class="center">Normal MAC filtering is in place.</td>
</tr>
<tr>
<td class="center">1</td>
<td class="center"><samp>MAC_PROMISCUOUS_MODE_NETWORK</samp></td>
<td class="center">All MAC packets matching network are passed up the stack.</td>
</tr>
<tr>
<td class="center">2</td>
<td class="center"><samp>MAC_PROMISCUOUS_MODE_FULL</samp></td>
<td class="center">All decoded MAC packets are passed up the stack.</td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.8.9.p.3">See <a href="#prop-stream-raw" class="xref">Section 8.6.2</a>.  </p>
<h1 id="rfc.section.8.8.10">
<a href="#rfc.section.8.8.10">8.8.10.</a> <a href="#prop-mac-escan-result" id="prop-mac-escan-result">PROP 57: PROP_MAC_ENERGY_SCAN_RESULT</a>
</h1>
<p></p>

<ul>
<li>Type: Packet-Stream, Output-Only</li>
<li>Required: REQUIRED</li>
<li>Value Type: UINT8, INT8</li>
<li>Units: Channel Index, dB (RF Power)</li>
</ul>

<p> </p>
<pre>
  0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    CHANNEL    |      RSSI     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.8.8.10.p.2">This property is emitted during energy scan operation (SCAN_STATE_ENERGY) once per scanned channel.  </p>
<p id="rfc.section.8.8.10.p.3">The RSSI is measured in dB.  The specific meaning of zero dB is implementation-specific, but MUST be consistant with definitions of other properties that express power. It is RECOMMENDED that zero dB represent one milliwatt of power (0dBm), as measured from the antenna connector.  </p>
<h1 id="rfc.section.8.8.11">
<a href="#rfc.section.8.8.11">8.8.11.</a> <a href="#prop-mac-data-poll-period" id="prop-mac-data-poll-period">PROP 58: PROP_MAC_DATA_POLL_PERIOD</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Value Type: UINT32_LE</li>
<li>Unit: milliseconds</li>
<li>Post-Reset Value: 5000ms RECOMMENDED</li>
<li>Required Capability: <samp>CAP_POWER_SAVE</samp>
</li>
<li>See Also: <a href="#prop-power-state" class="xref">Section 8.5.8</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.11.p.2">The (user-specified) data poll (802.15.4 MAC Data Request) period in milliseconds. Value zero means the poll period will be calculated by the stack to be the maximum interval acceptable by the parent. If the maximum poll interval is longer than the maximum interval acceptable by the parent, the later value is used instead.  </p>
<p id="rfc.section.8.8.11.p.3">The value of this property is only used if <samp>PROP_POWER_STATE</samp> is set to <samp>POWER_STATE_LOW_POWER</samp>. In all other states, the value of this property is ignored.  </p>
<p id="rfc.section.8.8.11.p.4">This property is only used on NCPs which support <samp>POWER_STATE_LOW_POWER</samp>.  </p>
<h1 id="rfc.section.8.8.12">
<a href="#rfc.section.8.8.12">8.8.12.</a> <a href="#prop-mac-whitelist" id="prop-mac-whitelist">PROP 4864: PROP_MAC_WHITELIST</a>
</h1>
<p></p>

<ul>
<li>Type: Multi-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Per-Item Length: No</li>
<li>Required: OPTIONAL</li>
<li>Required Capability: <samp>CAP_MAC_WHITELIST</samp>
</li>
<li>Item Type: EUI64_BE, UINT8</li>
<li>Post-Reset Value: empty</li>
<li>See Also: <a href="#prop-mac-whitelist-enabled" class="xref">Section 8.8.13</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.12.p.2">TODO(RQ): Consider moving this to the debug section.  </p>
<p id="rfc.section.8.8.12.p.3">When whitelisting is enabled, this property prevents the device from being able to communicate with devices which are not in this list. Also, if the RSSI field is not 127, the given RSSI value will always be reported instead of using the RSSI from the radio hardware.  </p>
<p id="rfc.section.8.8.12.p.4">This property is intended to facilitate stack testing and debugging and SHOULD NOT be used in production.  </p>
<p id="rfc.section.8.8.12.p.5">Item Format: </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      EUI64 (Upper word) ...                   :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:                  ... EUI64 (Lower word)                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     RSSI      |
+-+-+-+-+-+-+-+-+
</pre>
<p></p>

<dl>
<dt>EUI64</dt>
<dd style="margin-left: 8">
<br> EUI64 address of node</dd>
<dt>RSSI</dt>
<dd style="margin-left: 8">
<br> Optional RSSI-override value. The value 127 indicates that the RSSI-override feature is not enabled for this address. If this value is omitted when setting or inserting, it is assumed to be 127. This parameter is ignored when removing and may be omitted.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.8.13">
<a href="#rfc.section.8.8.13">8.8.13.</a> <a href="#prop-mac-whitelist-enabled" id="prop-mac-whitelist-enabled">PROP 4865: PROP_MAC_WHITELIST_ENABLED</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Required capability: <samp>CAP_MAC_WHITELIST</samp>
</li>
<li>Value Type: BOOL</li>
<li>Post-Reset Value: 0 (false)</li>
<li>See Also: <a href="#prop-mac-whitelist" class="xref">Section 8.8.12</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.13.p.2">TODO(RQ): Consider moving this to the debug section.  </p>
<p id="rfc.section.8.8.13.p.3">Setting this to true SHALL cause <samp>PROP_MAC_BLACKLIST_ENABLED</samp> to be automatically set to false.  </p>
<h1 id="rfc.section.8.8.14">
<a href="#rfc.section.8.8.14">8.8.14.</a> <a href="#prop-mac-blacklist" id="prop-mac-blacklist">PROP 4870: PROP_MAC_BLACKLIST</a>
</h1>
<p></p>

<ul>
<li>Type: Multi-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Per-Item Length: No</li>
<li>Required: OPTIONAL</li>
<li>Required Capability: <samp>CAP_MAC_WHITELIST</samp>
</li>
<li>Item Type: EUI64_BE</li>
<li>Post-Reset Value: empty</li>
<li>See Also: <a href="#prop-mac-blacklist-enabled" class="xref">Section 8.8.15</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.14.p.2">TODO(RQ): Consider moving this to the debug section.  </p>
<p id="rfc.section.8.8.14.p.3">When blacklisting is enabled, this property prevents the device from being able to communicate with devices which are in this list.  </p>
<h1 id="rfc.section.8.8.15">
<a href="#rfc.section.8.8.15">8.8.15.</a> <a href="#prop-mac-blacklist-enabled" id="prop-mac-blacklist-enabled">PROP 4871: PROP_MAC_BLACKLIST_ENABLED</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Value Type: BOOL</li>
<li>Post-Reset Value: 0 (false)</li>
<li>Required capability: <samp>CAP_MAC_WHITELIST</samp>
</li>
<li>See Also: <a href="#prop-mac-blacklist" class="xref">Section 8.8.14</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.15.p.2">TODO(RQ): Consider moving this to the debug section.  </p>
<p id="rfc.section.8.8.15.p.3">Setting this to true SHALL cause <samp>PROP_MAC_WHITELIST_ENABLED</samp> to be automatically set to false.  </p>
<h1 id="rfc.section.8.8.16">
<a href="#rfc.section.8.8.16">8.8.16.</a> <a href="#prop-mac-src-match-enabled" id="prop-mac-src-match-enabled">PROP 4867: PROP_MAC_SRC_MATCH_ENABLED</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Required Capabilities: <samp>CAP_MAC_RAW</samp>, <samp>CAP_MAC_802_15_4</samp>
</li>
<li>Value Type: BOOL</li>
<li>Post-Reset Value: 0 (false)</li>
<li>See Also: <a href="#prop-mac-src-match-short-addresses" class="xref">Section 8.8.17</a>, <a href="#prop-mac-src-match-extended-addresses" class="xref">Section 8.8.18</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.16.p.2">Set to true to enable radio source matching or false to disable it. The source match functionality is used by radios when generating ACKs. The short and extended address lists are used for settings the Frame Pending bit in the ACKs.  </p>
<h1 id="rfc.section.8.8.17">
<a href="#rfc.section.8.8.17">8.8.17.</a> <a href="#prop-mac-src-match-short-addresses" id="prop-mac-src-match-short-addresses">PROP 4868: PROP_MAC_SRC_MATCH_SHORT_ADDRESSES</a>
</h1>
<p></p>

<ul>
<li>Type: Multi-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Per-Item Length: No</li>
<li>Required: OPTIONAL</li>
<li>Item Type: UINT16_LE</li>
<li>Post-Reset Value: empty</li>
<li>Required Capabilities: <samp>CAP_MAC_RAW</samp>, <samp>CAP_MAC_802_15_4</samp>
</li>
<li>See Also: <a href="#prop-mac-src-match-enabled" class="xref">Section 8.8.16</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.17.p.2">Configures the list of short addresses used for source matching. These short address are used for hardware generated ACKs.  </p>
<h1 id="rfc.section.8.8.18">
<a href="#rfc.section.8.8.18">8.8.18.</a> <a href="#prop-mac-src-match-extended-addresses" id="prop-mac-src-match-extended-addresses">PROP 4869: PROP_MAC_SRC_MATCH_EXTENDED_ADDRESSES</a>
</h1>
<p></p>

<ul>
<li>Type: Multi-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Per-Item Length: No</li>
<li>Required: OPTIONAL</li>
<li>Item Type: EUI64_BE</li>
<li>Post-Reset Value: empty</li>
<li>Required Capabilities: <samp>CAP_MAC_RAW</samp>, <samp>CAP_MAC_802_15_4</samp>
</li>
<li>See Also: <a href="#prop-mac-src-match-enabled" class="xref">Section 8.8.16</a>
</li>
</ul>

<p> </p>
<p id="rfc.section.8.8.18.p.2">Configures the list of long addresses used for source matching. These long address are used for hardware generated ACKs.  </p>
<h1 id="rfc.section.8.9">
<a href="#rfc.section.8.9">8.9.</a> <a href="#prop-net" id="prop-net">NET Properties</a>
</h1>
<h1 id="rfc.section.8.9.1">
<a href="#rfc.section.8.9.1">8.9.1.</a> <a href="#prop-net-if-up" id="prop-net-if-up">PROP 65: PROP_NET_IF_UP</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Post-Reset Value: 0 (false)</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">1</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">BOOL</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_IF_UP</samp></td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.9.1.p.2">Network interface up/down status. Non-zero (set to 1) indicates up, zero indicates down.  </p>
<p id="rfc.section.8.9.1.p.3">Setting this to false implies also setting <samp>PROP_NET_STACK_UP</samp> to false.  </p>
<h1 id="rfc.section.8.9.1.1">
<a href="#rfc.section.8.9.1.1">8.9.1.1.</a> <a href="#relationship-with-propnetstackup" id="relationship-with-propnetstackup">Relationship with PROP_NET_STACK_UP</a>
</h1>
<p id="rfc.section.8.9.1.1.p.1">EDITOR: the examples show that the order of operations to bring up a network interface is first set PROP_NET_IF_UP=TRUE, then PROP_NET_STACK_UP=TRUE. What does it mean when PROP_NET_IF_UP=TRUE and PROP_NET_STACK_UP=FALSE? Does the NLI matter in operations with the PROP_NET_STACK_UP property? </p>
<p id="rfc.section.8.9.1.1.p.2">RQ: PROP_NET_IF_UP=TRUE, PROP_NET_STACK_UP=FALSE is used for in-band commissioning.  It bring up link-local IPv6 capabilities on PROP_STREAM_NET_INSECURE.  </p>
<h1 id="rfc.section.8.9.2">
<a href="#rfc.section.8.9.2">8.9.2.</a> <a href="#prop-net-stack-up" id="prop-net-stack-up">PROP 66: PROP_NET_STACK_UP</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Post-Reset Value: 0 (false)</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">1</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">BOOL</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_STACK_UP</samp></td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.9.2.p.2">Network protocol stack operational status. Non-zero (set to 1) indicates up, zero indicates down.  </p>
<p id="rfc.section.8.9.2.p.3">Setting this to true implies also setting <samp>PROP_NET_IF_UP</samp> to true.  </p>
<h1 id="rfc.section.8.9.3">
<a href="#rfc.section.8.9.3">8.9.3.</a> <a href="#prop-net-role" id="prop-net-role">PROP 67: PROP_NET_ROLE</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Only*</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Unit: Enumeration</li>
<li>Post-Reset Value: 0 (<samp>NET_ROLE_DETACHED</samp>)</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">1</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">UINT8</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_ROLE</samp></td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.9.3.p.2">Indicates what role the current device is playing on the network. This property is read-only, with the exception that the AP can indicate that it wants the NCP to detach and then attempt to reattach by setting this property to <samp>NET_ROLE_DETACHED</samp> when it was previously set to another value. Attempting to set this property to any other value will result in <samp>STATUS_INVALID_ARGUMENT</samp> being emitted.  </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">Code</th>
<th class="center">Name</th>
</tr></thead>
<tbody>
<tr>
<td class="center">0</td>
<td class="center"><samp>NET_ROLE_DETACHED</samp></td>
</tr>
<tr>
<td class="center">1</td>
<td class="center"><samp>NET_ROLE_CHILD</samp></td>
</tr>
<tr>
<td class="center">2</td>
<td class="center"><samp>NET_ROLE_ROUTER</samp></td>
</tr>
<tr>
<td class="center">3</td>
<td class="center"><samp>NET_ROLE_LEADER</samp></td>
</tr>
<tr>
<td class="center">4</td>
<td class="center"><samp>NET_ROLE_PEER</samp></td>
</tr>
</tbody>
</table>
<p></p>

<dl>
<dt>NET_ROLE_DETACHED</dt>
<dd style="margin-left: 8">
<br> The NCP is not currently participating on a network, or is in the process of attaching to a network.</dd>
<dt>NET_ROLE_CHILD</dt>
<dd style="margin-left: 8">
<br> The NCP is currently attached to the mesh network as a child to a router node. Communication with nodes more than one hop away is possible. The NCP does not route any mesh traffic on the behalf of other nodes.</dd>
<dt>NET_ROLE_ROUTER</dt>
<dd style="margin-left: 8">
<br> The NCP is currently a router node on the network, and will transparently route mesh traffic on behalf of other nodes.</dd>
<dt>NET_ROLE_LEADER</dt>
<dd style="margin-left: 8">
<br> This role is identical ot <samp>NET_ROLE_ROUTER</samp> except that there is only node designated as the leader per partition. This role is Thread-specific.</dd>
<dt>NET_ROLE_PEER</dt>
<dd style="margin-left: 8">
<br> In this role, the NCP may communicate with nodes which are no more than one hop away. This role is used while obtaining the network provision during in-band commissioning.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.9.4">
<a href="#rfc.section.8.9.4">8.9.4.</a> <a href="#prop-net-network-name" id="prop-net-network-name">PROP 68: PROP_NET_NETWORK_NAME</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED for standard network layer</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">n</th>
<th class="center">1</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">UTF8</td>
<td class="center">CONST</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NETWORK_NAME</samp></td>
<td class="center">0x00</td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.9.4.p.2">Contains a zero-terminated UTF8 string which describes the name of the current network. This is analogous to the SSID in 802.11. The maximum length of the string is technology specific. Setting this property to a value that is too large will cause <samp>STATUS_PROP_VALUE_TOO_BIG</samp> to be emitted.  </p>
<p id="rfc.section.8.9.4.p.3">When this value is being retrieved, all trailing zero bytes in the network name MUST be stripped. When this value is being set, all trailing zero bytes SHOULD be stripped.  </p>
<p id="rfc.section.8.9.4.p.4">See <a href="#security-network-name" class="xref">Section 9.1</a> for security considerations regarding UTF8 normalization.  </p>
<h1 id="rfc.section.8.9.5">
<a href="#rfc.section.8.9.5">8.9.5.</a> <a href="#prop-net-xpanid" id="prop-net-xpanid">PROP 69: PROP_NET_XPANID</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED for standard network layer</li>
<li>Post-Reset Value: All zeros</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">8</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">XPANID</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_XPANID</samp></td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.9.5.p.2">Contains the extended personal-area network identifier for the current network. It allows for different networks with identical names to not conflict with each other. It is defined to be eight bytes long.  </p>
<p id="rfc.section.8.9.5.p.3">For network technologies which don't have the concept of an XPANID, this property is hard-coded to always be all zeros.  </p>
<h1 id="rfc.section.8.9.6">
<a href="#rfc.section.8.9.6">8.9.6.</a> <a href="#prop-net-master-key" id="prop-net-master-key">PROP 70: PROP_NET_MASTER_KEY</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED for standard network layer</li>
<li>Post-Reset Value: Unspecified</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">n</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">DATA</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_MASTER_KEY</samp></td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.9.6.p.2">Master key material. The exact length of the value for this property is defined by the technology, but is generally 16-bytes (128-bit).  </p>
<h1 id="rfc.section.8.9.7">
<a href="#rfc.section.8.9.7">8.9.7.</a> <a href="#prop-net-key-sequence-counter" id="prop-net-key-sequence-counter">PROP 71: PROP_NET_KEY_SEQUENCE_COUNTER</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED for standard network layer</li>
<li>Post-Reset Value: 0</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">4</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">UINT32</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_KEY_SEQUENCE_COUNTER</samp></td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.8.9.8">
<a href="#rfc.section.8.9.8">8.9.8.</a> <a href="#prop-net-partition-id" id="prop-net-partition-id">PROP 72: PROP_NET_PARTITION_ID</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Only</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: OPTIONAL</li>
<li>Post-Reset Value: Unspecified</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">4</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">UINT32</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_PARTITION_ID</samp></td>
</tr>
</tbody>
</table>
<p id="rfc.section.8.9.8.p.2">The partition ID of the partition that this node is a member of.  </p>
<p id="rfc.section.8.9.8.p.3">For network technologies which don't have the concept of a partition id, this property is hard-coded to always be zero.  </p>
<h1 id="rfc.section.8.9.9">
<a href="#rfc.section.8.9.9">8.9.9.</a> <a href="#prop-net-require-join-existing" id="prop-net-require-join-existing">PROP 73: PROP_NET_REQUIRE_JOIN_EXISTING</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: <ul>
<li>Read: OPTIONAL</li>
<li>Write: REQUIRED</li>
</ul>
</li>
<li>Post-Reset Value: 0 (false)</li>
</ul>

<p> </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Bytes:</th>
<th class="center">1</th>
</tr></thead>
<tbody>
<tr>
<td class="right">Format:</td>
<td class="center">BOOL</td>
</tr>
<tr>
<td class="right">Fields:</td>
<td class="center"><samp>NET_REQUIRE_JOIN_EXISTING</samp></td>
</tr>
</tbody>
</table>
<p><a id="CREF10" class="info">[CREF10]<span class="info">RQ: TODO: Elaborate on PROP_NET_JOIN_EXISTING --</span></a></p>
<h1 id="rfc.section.8.9.10">
<a href="#rfc.section.8.9.10">8.9.10.</a> <a href="#prop-net-key-swtich-guardtime" id="prop-net-key-swtich-guardtime">PROP 74: PROP_NET_KEY_SWITCH_GUARDTIME</a>
</h1>
<p></p>

<ul>
<li>Type: Read-Write</li>
<li>Packed-Encoding: <samp>L</samp>
</li>
</ul>

<p> </p>
<p><a id="CREF11" class="info">[CREF11]<span class="info">RQ: TODO: This likely doesn't belong in core, at least not in the small-number section.  --</span></a></p>
<h1 id="rfc.section.8.9.11">
<a href="#rfc.section.8.9.11">8.9.11.</a> <a href="#prop-net-pskc" id="prop-net-pskc">PROP 75: PROP_NET_PSKC</a>
</h1>
<p></p>

<ul>
<li>Type: Read-Write</li>
<li>Packed-Encoding: <samp>D</samp>
</li>
</ul>

<p> </p>
<p><a id="CREF12" class="info">[CREF12]<span class="info">RQ: TODO: This likely doesn't belong in core, at least not in the small-number section.  --</span></a></p>
<h1 id="rfc.section.8.10">
<a href="#rfc.section.8.10">8.10.</a> <a href="#prop-ipv6" id="prop-ipv6">IPv6 Properties</a>
</h1>
<h1 id="rfc.section.8.10.1">
<a href="#rfc.section.8.10.1">8.10.1.</a> <a href="#prop-ipv6-ll-addr" id="prop-ipv6-ll-addr">PROP 96: PROP_IPV6_LL_ADDR</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Value Type: IPv6 Address</li>
<li>Post-Reset Value: Unspecified</li>
</ul>

<p> </p>
<h1 id="rfc.section.8.10.2">
<a href="#rfc.section.8.10.2">8.10.2.</a> <a href="#prop-ipv6-address-table" id="prop-ipv6-address-table">PROP 99: PROP_IPV6_ADDR_TABLE</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Write</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: Structure</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 ADDRESS                         -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PREFIX LENGTH |              VALID LIFETIME...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  ...           |            PREFERRED LIFETIME...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  ...           |     FLAGS     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">PROP_IPV6_ADDRESS_TABLE structure </p>
<p id="rfc.section.8.10.2.p.2">This property provides the table of all of the unicast IPv6 addresses associated with this NLI.  </p>
<p id="rfc.section.8.10.2.p.3">TODO: This needs a lot of work.  </p>
<p id="rfc.section.8.10.2.p.4">EDITOR: this conflates the IPv6 interface address list with the IPv6 on-link prefix used in IPv6 Neighbor Discovery and other address reservation and resolution protocols with similar function, e.g. Thread(R). It probably makes sense to create an additional set of properties that represent neighbor discovery and router discovery parameters.  </p>
<p id="rfc.section.8.10.2.p.5">EDITOR: the operational semantics of the Flags field is not well-specified.  </p>
<h1 id="rfc.section.8.10.3">
<a href="#rfc.section.8.10.3">8.10.3.</a> <a href="#prop-101-propipv6icmppingoffload" id="prop-101-propipv6icmppingoffload">PROP 101: PROP_IPv6_ICMP_PING_OFFLOAD</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Scope: NLI</li>
<li>Value Type: BOOL</li>
<li>Post-Reset Value: 0 (false)</li>
</ul>

<p> </p>
<p id="rfc.section.8.10.3.p.2">Allow the NCP to directly respond to ICMP ping requests. If this is turned on, ICMP echo request packets will not be passed to the AP.  </p>
<h1 id="rfc.section.8.10.4">
<a href="#rfc.section.8.10.4">8.10.4.</a> <a href="#prop-ipv6-multicast-address-table" id="prop-ipv6-multicast-address-table">PROP 102: PROP_IPV6_MULTICAST_ADDR_TABLE</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Write</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: IPv6</li>
<li>Post-Reset Value: Implemenation specific</li>
</ul>

<p> </p>
<h1 id="rfc.section.8.11">
<a href="#rfc.section.8.11">8.11.</a> <a href="#prop-ipv6-rethink" id="prop-ipv6-rethink">RETHINK IPv6 Properties</a>
</h1>
<p id="rfc.section.8.11.p.1">This section is discussing a possible renumbering/reorganization of the IPv6 section.  </p>
<h1 id="rfc.section.8.11.1">
<a href="#rfc.section.8.11.1">8.11.1.</a> <a href="#prop-ipv6-ucast-addrs" id="prop-ipv6-ucast-addrs">PROP XXXX: PROP_IPV6_UCAST_ADDRS</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Only</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: Structure</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 ADDRESS                         -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     SCOPE     |             FLAGS             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_UCAST_ADDRS </p>
<p id="rfc.section.8.11.1.p.2">This property contains all unicast IPv6 addresses currently assigned to this NLI. This includes both automatically assigned addresses and addresses manually added by the AP via <samp>PROP_IPV6_HOST_UCAST_ADDRS</samp>.  </p>
<p id="rfc.section.8.11.1.p.3">The AP cannot directly manipulate this property. but it can add new unicast IPv6 addresses via the <samp>PROP_IPV6_HOST_ON_LINK_PREFIXES</samp> property.  </p>
<p></p>

<dl>
<dt>SCOPE</dt>
<dd style="margin-left: 8">
<br> An enumeration describing the scope of the address. Can be link-local, mesh-local, site-local, or global. (TODO: Enumeration TBD)</dd>
<dt>FLAGS</dt>
<dd style="margin-left: 8">
<br> Flags describing various properties of the address. Flags are dynamic/static, temporary, deprecated, secured <a href="#RFC7217" class="xref">[RFC7217]</a>, etc. (TODO: Enumeration TBD)</dd>
</dl>

<p> </p>
<h1 id="rfc.section.8.11.2">
<a href="#rfc.section.8.11.2">8.11.2.</a> <a href="#prop-ipv6-host-ucast-addrs" id="prop-ipv6-host-ucast-addrs">PROP XXXX: PROP_IPV6_HOST_UCAST_ADDRS</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Write</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: Structure</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 ADDRESS                         -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_HOST_UCAST_ADDRS </p>
<p id="rfc.section.8.11.2.p.2">Addresses added to this list will be added to PROP_IPV6_UCAST_ADDRS as static addresses.  </p>
<h1 id="rfc.section.8.11.3">
<a href="#rfc.section.8.11.3">8.11.3.</a> <a href="#prop-ipv6-on-link-prefixes" id="prop-ipv6-on-link-prefixes">PROP XXXX: PROP_IPV6_ON_LINK_PREFIXES</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Only</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: Structure</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 PREFIX                          -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PREFIX LENGTH |     SCOPE     |     FLAGS (Little Endian)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        VALID LIFETIME (Little Endian)         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      PREFERRED LIFETIME (Little Endian)       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_ON_LINK_PREFIXES </p>
<p id="rfc.section.8.11.3.p.2">This property contains all on-link or on-mesh IPv6 prefixes that are being advertised by routers on this NLI's network, including all prefixes listed in <samp>PROP_IPV6_HOST_ON_LINK_PREFIXES</samp>.  </p>
<p id="rfc.section.8.11.3.p.3">The AP cannot directly manipulate this property. but it can add new on-link or on-mesh prefixes via the <samp>PROP_IPV6_HOST_ON_LINK_PREFIXES</samp> property.  </p>
<h1 id="rfc.section.8.11.4">
<a href="#rfc.section.8.11.4">8.11.4.</a> <a href="#prop-ipv6-host-on-link-prefixes" id="prop-ipv6-host-on-link-prefixes">PROP XXXX: PROP_IPV6_HOST_ON_LINK_PREFIXES</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Write</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: Structure</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 PREFIX                          -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PREFIX LENGTH |     SCOPE     |     FLAGS (Little Endian)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        VALID LIFETIME (Little Endian)         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      PREFERRED LIFETIME (Little Endian)       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_HOST_ON_LINK_PREFIXES </p>
<p id="rfc.section.8.11.4.p.2">This property contains all on-link or on-mesh IPv6 prefixes that <em>this host</em> is advertising on this NLI's network.  </p>
<p id="rfc.section.8.11.4.p.3">The AP cannot directly manipulate this property. but it can add new on-link or on-mesh prefixes via the <samp>PROP_IPV6_HOST_ON_LINK_PREFIXES</samp> property.  </p>
<p id="rfc.section.8.11.4.p.4">When removing prefixes from the list, only the <samp>IPv6 PREFIX</samp> and <samp>PREFIX LENGTH</samp> are required.  </p>
<p id="rfc.section.8.11.4.p.5">Some network technologies may limit which nodes have permission to add items to this list. In such a case, the following behaviors are acceptable (in order of behavior preference): </p>
<p></p>

<ol>
<li>The command fails with <samp>STATUS_SECURITY_ERROR</samp>.</li>
<li>The command initially appears to succeed, but a few moments later the prefix is asynchronously removed via either <samp>CMD_PROP_VALUE_IS</samp> or <samp>CMD_PROP_VALUE_REMOVED</samp>.</li>
</ol>

<p> </p>
<h1 id="rfc.section.8.11.5">
<a href="#rfc.section.8.11.5">8.11.5.</a> <a href="#prop-ipv6-mcast-addrs" id="prop-ipv6-mcast-addrs">PROP XXXX: PROP_IPV6_MCAST_ADDRS</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Only</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: IPv6</li>
<li>Post-Reset Value: Implemenation specific</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 ADDRESS                         -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_MCAST_ADDRS </p>
<p id="rfc.section.8.11.5.p.2">This property contains all IPv6 multicast groups that this NLI is currently a member of. The AP cannot directly manipulate this property, but it can add the NLI to new groups via the <samp>PROP_IPV6_HOST_MCAST_ADDRS</samp> property.  </p>
<h1 id="rfc.section.8.11.6">
<a href="#rfc.section.8.11.6">8.11.6.</a> <a href="#prop-ipv6-mcast-addrs-1" id="prop-ipv6-mcast-addrs-1">PROP XXXX: PROP_IPV6_HOST_MCAST_ADDRS</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Write</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: No</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: IPv6</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 ADDRESS                         -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_HOST_MCAST_ADDRS </p>
<p id="rfc.section.8.11.6.p.2">This property contains only IPv6 multicast addresses that have been added by the AP. The AP can manipulate this list by setting it outright, inserting addresses, or removing addresses. When attached to a network, the addresses in this list are a subset of the addresses in <samp>PROP_IPV6_MCAST_ADDRS</samp>.  </p>
<p id="rfc.section.8.11.6.p.3">Note that it is up to the AP to perform any necessary reference counting on joined groups.  </p>
<p id="rfc.section.8.11.6.p.4">Some network technologies may limit which nodes have permission to add items to this list. In such a case, the following behaviors are acceptable (in order of behavior preference): </p>
<p></p>

<ol>
<li>The command fails with <samp>STATUS_SECURITY_ERROR</samp>.</li>
<li>The command initially appears to succeed, but a few moments later the item is asynchronously removed via either <samp>CMD_PROP_VALUE_IS</samp> or <samp>CMD_PROP_VALUE_REMOVED</samp>.</li>
</ol>

<p> </p>
<h1 id="rfc.section.8.11.7">
<a href="#rfc.section.8.11.7">8.11.7.</a> <a href="#prop-ipv6-routes" id="prop-ipv6-routes">PROP XXXX: PROP_IPV6_ROUTES</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Only</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: Structure</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 PREFIX                          -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PREFIX LENGTH |    (TODO: Likely needs more stuff here...)
+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_ROUTES </p>
<p id="rfc.section.8.11.7.p.2">This property contains <em>all</em> prefixes that can be reached via this NLI, <strong>both off-link and on-link</strong>. This list MUST NOT include any prefixes listed in <samp>PROP_IPV6_HOST_ROUTES</samp> <strong>UNLESS</strong> that route is being advertised by some other node.  </p>
<h1 id="rfc.section.8.11.8">
<a href="#rfc.section.8.11.8">8.11.8.</a> <a href="#prop-ipv6-host-routes" id="prop-ipv6-host-routes">PROP XXXX: PROP_IPV6_HOST_ROUTES</a>
</h1>
<p></p>

<ul>
<li>Type: Multiple-Value, Read-Write</li>
<li>Has Item Length Prefix: Yes</li>
<li>Asynchronous Updates: Yes</li>
<li>Required: REQUIRED</li>
<li>Scope: NLI</li>
<li>Item Type: Structure</li>
<li>Post-Reset Value: Empty</li>
</ul>

<p> </p>
<pre>
  0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+-                                                             -+
|                                                               |
+-                        IPv6 PREFIX                          -+
|                                                               |
+-                                                             -+
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PREFIX LENGTH |    (TODO: Likely needs more stuff here...)
+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Structure of PROP_IPV6_HOST_ROUTES </p>
<p id="rfc.section.8.11.8.p.2">This property contains all prefixes that the AP is willing to route traffic to on behalf of other nodes the current network. This property MUST NOT be populated automatically by the NCP. Routes added to this property will be advertised to other nodes on the network.  </p>
<p id="rfc.section.8.11.8.p.3">Some network technologies may limit which nodes have permission to add items to this list. In such a case, the following behaviors are acceptable (in order of behavior preference): </p>
<p></p>

<ol>
<li>The command fails with <samp>STATUS_SECURITY_ERROR</samp>.</li>
<li>The command initially appears to succeed, but a few moments later the item is asynchronously removed via either <samp>CMD_PROP_VALUE_IS</samp> or <samp>CMD_PROP_VALUE_REMOVED</samp>.</li>
</ol>

<p> </p>
<h1 id="rfc.section.8.12">
<a href="#rfc.section.8.12">8.12.</a> <a href="#prop-debug" id="prop-debug">Debug Properties</a>
</h1>
<h1 id="rfc.section.8.12.1">
<a href="#rfc.section.8.12.1">8.12.1.</a> <a href="#prop-debug-test-assert" id="prop-debug-test-assert">PROP 16384: PROP_DEBUG_TEST_ASSERT</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Only</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Scope: NCP</li>
<li>Post-Reset Value: Unspecified</li>
</ul>

<p> </p>
<p id="rfc.section.8.12.1.p.2">Reading this property will cause an assert on the NCP. This is intended for testing the assert functionality of underlying platform/NCP. Assert should ideally cause the NCP to reset, but if <samp>assert</samp> is not supported or disabled boolean value of <samp>false</samp> is returned in response.  </p>
<h1 id="rfc.section.8.12.2">
<a href="#rfc.section.8.12.2">8.12.2.</a> <a href="#prop-debug-ncp-log-level" id="prop-debug-ncp-log-level">PROP 16385: PROP_DEBUG_NCP_LOG_LEVEL</a>
</h1>
<p></p>

<ul>
<li>Type: Single-Value, Read-Write</li>
<li>Asynchronous Updates: No</li>
<li>Required: OPTIONAL</li>
<li>Scope: NCP</li>
<li>Value Type: UINT8</li>
<li>Post-Reset Value: Implementation Specific</li>
</ul>

<p> </p>
<p id="rfc.section.8.12.2.p.2">Provides access to the NCP log level. Standard log level codes, which are derived from <a href="#RFC5424" class="xref">[RFC5424]</a>, are shown below: </p>
<p></p>

<ul>
<li>0: Emergency (emerg).</li>
<li>1: Alert (alert).</li>
<li>2: Critical (crit).</li>
<li>3: Error (err).</li>
<li>4: Warning (warn).</li>
<li>5: Notice (notice).</li>
<li>6: Information (info).</li>
<li>7: Debug (debug).</li>
</ul>

<p> </p>
<p id="rfc.section.8.12.2.p.4">If the NCP supports dynamic log level control, setting this property changes the log level accordingly. Getting the value returns the current log level.  If the dynamic log level control is not supported, setting this property returns a <samp>PROP_LAST_STATUS</samp> with <samp>STATUS_INVALID_COMMAND_FOR_PROP</samp>.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">EDITOR: Insert verbiage here conforming to RFC Editor guidelines.  </p>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> <a href="#security-network-name" id="security-network-name">Network Name Normalization</a>
</h1>
<p id="rfc.section.9.1.p.1">TODO: Discuss UTF8 verification and normalization considerations related to <samp>PROP_NET_NETWORK_NAME</samp>.  </p>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> <a href="#raw-application-access" id="raw-application-access">Raw Application Access</a>
</h1>
<p id="rfc.section.9.2.p.1">Spinel MAY be used as an API boundary for allowing processes to configure the NCP. However, such a system MUST NOT give unprivileged processess the ability to send or receive arbitrary command frames to the NCP. Only the specific commands and properties that are required should be allowed to be passed, and then only after being checked for proper format.  </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a>
</h1>
<p id="rfc.section.10.p.1">EDITOR: insert verbiage here: registry creation forms, et cetera.  </p>
<p></p>
<h1 id="rfc.references">
<a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8200">[RFC8200]</b></td>
<td class="top">
<a>Deering, S.</a> and <a>R. Hinden</a>, "<a href="http://tools.ietf.org/html/rfc8200">Internet Protocol, Version 6 (IPv6) Specification</a>", STD 86, RFC 8200, DOI 10.17487/RFC8200, July 2017.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.bormann-t2trg-slipmux">[I-D.bormann-t2trg-slipmux]</b></td>
<td class="top">
<a>Bormann, C.</a> and <a>T. Kaupat</a>, "<a href="http://tools.ietf.org/html/draft-bormann-t2trg-slipmux-01">Slipmux: Using an UART interface for diagnostics, configuration, and packet transfer</a>", Internet-Draft draft-bormann-t2trg-slipmux-01, July 2017.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1055">[RFC1055]</b></td>
<td class="top">
<a>Romkey, J.</a>, "<a href="http://tools.ietf.org/html/rfc1055">Nonstandard for transmission of IP datagrams over serial lines: SLIP</a>", STD 47, RFC 1055, DOI 10.17487/RFC1055, June 1988.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2360">[RFC2360]</b></td>
<td class="top">
<a>Scott, G.</a>, "<a href="http://tools.ietf.org/html/rfc2360">Guide for Internet Standards Writers</a>", BCP 22, RFC 2360, DOI 10.17487/RFC2360, June 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4944">[RFC4944]</b></td>
<td class="top">
<a>Montenegro, G.</a>, <a>Kushalnagar, N.</a>, <a>Hui, J.</a> and <a>D. Culler</a>, "<a href="http://tools.ietf.org/html/rfc4944">Transmission of IPv6 Packets over IEEE 802.15.4 Networks</a>", RFC 4944, DOI 10.17487/RFC4944, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5424">[RFC5424]</b></td>
<td class="top">
<a>Gerhards, R.</a>, "<a href="http://tools.ietf.org/html/rfc5424">The Syslog Protocol</a>", RFC 5424, DOI 10.17487/RFC5424, March 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7217">[RFC7217]</b></td>
<td class="top">
<a>Gont, F.</a>, "<a href="http://tools.ietf.org/html/rfc7217">A Method for Generating Semantically Opaque Interface Identifiers with IPv6 Stateless Address Autoconfiguration (SLAAC)</a>", RFC 7217, DOI 10.17487/RFC7217, April 2014.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.A">
<a href="#rfc.appendix.A">Appendix A.</a> <a href="#example-sessions" id="example-sessions">Example Sessions</a>
</h1>
<h1 id="rfc.appendix.A.1">
<a href="#rfc.appendix.A.1">A.1.</a> <a href="#ncp-initialization" id="ncp-initialization">NCP Initialization</a>
</h1>
<p><a id="CREF13" class="info">[CREF13]<span class="info">RQ: FIXME: This example session is incomplete.</span></a></p>
<p id="rfc.section.A.1.p.2">Check the protocol version to see if it is supported: </p>
<p></p>

<ul>
<li>CMD_VALUE_GET:PROP_PROTOCOL_VERSION</li>
<li>CMD_VALUE_IS:PROP_PROTOCOL_VERSION</li>
</ul>

<p> </p>
<p id="rfc.section.A.1.p.4">Check the NCP version to see if a firmware update may be necessary: </p>
<p></p>

<ul>
<li>CMD_VALUE_GET:PROP_NCP_VERSION</li>
<li>CMD_VALUE_IS:PROP_NCP_VERSION</li>
</ul>

<p> </p>
<p id="rfc.section.A.1.p.6">Check interface type to make sure that it is what we expect: </p>
<p></p>

<ul>
<li>CMD_VALUE_GET:PROP_INTERFACE_TYPE</li>
<li>CMD_VALUE_IS:PROP_INTERFACE_TYPE</li>
</ul>

<p> </p>
<p id="rfc.section.A.1.p.8">If the AP supports using vendor-specific commands, the vendor should be verified before using them: </p>
<p></p>

<ul>
<li>CMD_VALUE_GET:PROP_VENDOR_ID</li>
<li>CMD_VALUE_IS:PROP_VENDOR_ID</li>
</ul>

<p> </p>
<p id="rfc.section.A.1.p.10">Fetch the capability list so that we know what features this NCP supports: </p>
<p></p>

<ul>
<li>CMD_VALUE_GET:PROP_CAPS</li>
<li>CMD_VALUE_IS:PROP_CAPS</li>
</ul>

<p> </p>
<p id="rfc.section.A.1.p.12">If the NCP supports CAP_NET_SAVE, then we go ahead and recall the network: </p>
<p></p>

<ul><li>CMD_NET_RECALL</li></ul>

<p> </p>
<h1 id="rfc.appendix.A.2">
<a href="#rfc.appendix.A.2">A.2.</a> <a href="#attaching-to-a-network" id="attaching-to-a-network">Attaching to a network</a>
</h1>
<p><a id="CREF14" class="info">[CREF14]<span class="info">RQ: FIXME: This example session is incomplete.</span></a></p>
<p id="rfc.section.A.2.p.2">We make the assumption that the NCP is already associated with a network at physical and media access layers. The core layer steps proceed after the initial phase of initializing the specific network layer stack.  </p>
<p id="rfc.section.A.2.p.3">Bring the network interface up: </p>
<p></p>

<ul>
<li>CMD_VALUE_SET:PROP_NET_IF_UP:TRUE</li>
<li>CMD_VALUE_IS:PROP_NET_IF_UP:TRUE</li>
</ul>

<p> </p>
<p id="rfc.section.A.2.p.5">Bring the routing stack up: </p>
<p></p>

<ul>
<li>CMD_VALUE_SET:PROP_NET_STACK_UP:TRUE</li>
<li>CMD_VALUE_IS:PROP_NET_STACK_UP:TRUE</li>
</ul>

<p> </p>
<h1 id="rfc.appendix.A.3">
<a href="#rfc.appendix.A.3">A.3.</a> <a href="#detaching-from-a-network" id="detaching-from-a-network">Detaching from a network</a>
</h1>
<p id="rfc.section.A.3.p.1">This is the reverse of the previous case.  </p>
<p id="rfc.section.A.3.p.2">Bring the routing stack up: </p>
<p></p>

<ul>
<li>CMD_VALUE_SET:PROP_NET_STACK_UP:FALSE</li>
<li>CMD_VALUE_IS:PROP_NET_STACK_UP:FALSE</li>
</ul>

<p> </p>
<p id="rfc.section.A.3.p.4">Bring the network interface up: </p>
<p></p>

<ul>
<li>CMD_VALUE_SET:PROP_NET_IF_UP:FALSE</li>
<li>CMD_VALUE_IS:PROP_NET_IF_UP:FALSE</li>
</ul>

<p> </p>
<h1 id="rfc.appendix.A.4">
<a href="#rfc.appendix.A.4">A.4.</a> <a href="#attaching-to-a-saved-network" id="attaching-to-a-saved-network">Attaching to a saved network</a>
</h1>
<p><a id="CREF15" class="info">[CREF15]<span class="info">RQ: FIXME: This example session is incomplete.</span></a></p>
<p id="rfc.section.A.4.p.2">Recall the saved network if you haven't already done so: </p>
<p></p>

<ul><li>CMD_NET_RECALL</li></ul>

<p> </p>
<p id="rfc.section.A.4.p.4">Bring the network interface up: </p>
<p></p>

<ul>
<li>CMD_VALUE_SET:PROP_NET_IF_UP:TRUE</li>
<li>CMD_VALUE_IS:PROP_NET_IF_UP:TRUE</li>
</ul>

<p> </p>
<p id="rfc.section.A.4.p.6">Bring the routing stack up: </p>
<p></p>

<ul>
<li>CMD_VALUE_SET:PROP_NET_STACK_UP:TRUE</li>
<li>CMD_VALUE_IS:PROP_NET_STACK_UP:TRUE</li>
</ul>

<p> </p>
<h1 id="rfc.appendix.A.5">
<a href="#rfc.appendix.A.5">A.5.</a> <a href="#ncp-software-reset" id="ncp-software-reset">NCP Software Reset</a>
</h1>
<p><a id="CREF16" class="info">[CREF16]<span class="info">RQ: FIXME: This example session is incomplete.</span></a></p>
<p></p>

<ul>
<li>CMD_RESET</li>
<li>CMD_VALUE_IS:PROP_LAST_STATUS:STATUS_RESET_SOFTWARE</li>
</ul>

<p> </p>
<p id="rfc.section.A.5.p.3">Then jump to <a href="#ncp-initialization" class="xref">Appendix A.1</a>.  </p>
<h1 id="rfc.appendix.B">
<a href="#rfc.appendix.B">Appendix B.</a> <a href="#appendix-framing" id="appendix-framing">Recommended Framing Protocols</a>
</h1>
<p id="rfc.section.B.p.1">Since this NCP protocol is defined independently of the physical transport or framing, any number of transports and framing protocols could be used successfully. However, in the interests of compatibility, this document provides some recommendations.  </p>
<h1 id="rfc.appendix.B.1">
<a href="#rfc.appendix.B.1">B.1.</a> <a href="#uart-recommendations" id="uart-recommendations">UART Recommendations</a>
</h1>
<p id="rfc.section.B.1.p.1">The recommended default UART settings are: </p>
<p></p>

<ul>
<li>Bit rate:     115200</li>
<li>Start bits:   1</li>
<li>Data bits:    8</li>
<li>Stop bits:    1</li>
<li>Parity:       None</li>
<li>Flow Control: Hardware</li>
</ul>

<p> </p>
<p id="rfc.section.B.1.p.3">These values may be adjusted depending on the individual needs of the application or product, but some sort of flow control MUST be used. Hardware flow control is preferred over software flow control. In the absence of hardware flow control, software flow control (XON/XOFF) MUST be used instead.  </p>
<p id="rfc.section.B.1.p.4">We also <strong>RECOMMEND</strong> an Arduino-style hardware reset, where the DTR signal is coupled to the <samp>RES</samp> pin through a 0.01 micro-Farad capacitor. This causes the NCP to automatically reset whenever the serial port is opened. At the very least we <strong>RECOMMEND</strong> dedicating one of your AP host pins to controlling the <samp>RES</samp> pin on the NCP, so that you can easily perform a hardware reset if necessary.  </p>
<h1 id="rfc.appendix.B.1.1">
<a href="#rfc.appendix.B.1.1">B.1.1.</a> <a href="#uart-bit-rate-detection" id="uart-bit-rate-detection">UART Bit Rate Detection</a>
</h1>
<p id="rfc.section.B.1.1.p.1">When using a UART, the issue of an appropriate bit rate must be considered. 115200 bits/s is the conventional baud rate for many serial peripherals. This rate, however, is slower than the theoretical maximum bitrate of many relevant network interfaces, e.g. the 802.15.4 2.4GHz PHY (250kbit). In most circumstances this mismatch is not significant because the overall bitrate will be much lower than either of these rates, but there are circumstances where a faster UART bitrate is desirable. Thus, this document proposes a simple bitrate detection scheme that can be employed by the AP to detect when the attached NCP is initially running at a higher bitrate.  </p>
<p id="rfc.section.B.1.1.p.2">The algorithm is to send successive NOOP commands to the NCP at increasing bitrates. When a valid <samp>CMD_LAST_STATUS</samp> response has been received, we have identified the correct bitrate.  </p>
<p id="rfc.section.B.1.1.p.3">In order to limit the time spent hunting for the appropriate bitrate, we RECOMMEND that only the following bitrates be checked: </p>
<p></p>

<ul>
<li>115200</li>
<li>230400</li>
<li>1000000 (1Mbit)</li>
</ul>

<p> </p>
<p id="rfc.section.B.1.1.p.5">The bitrate MAY also be changed programmatically by adjusting <samp>PROP_UART_BITRATE</samp>, if implemented.  </p>
<h1 id="rfc.appendix.B.1.2">
<a href="#rfc.appendix.B.1.2">B.1.2.</a> <a href="#hdlc-lite" id="hdlc-lite">HDLC-Lite</a>
</h1>
<p><em>HDLC-Lite</em> is the recommended framing protocol for transmitting Spinel frames over a UART. HDLC-Lite consists of only the framing, escaping, and CRC parts of the larger HDLC protocol---all other parts of HDLC are omitted. This protocol was chosen because it works well with software flow control and is widely implemented.  </p>
<p id="rfc.section.B.1.2.p.2">To transmit a frame with HDLC-lite, the 16-bit CRC must first be appended to the frame. The CRC function is defined to be CRC-16/CCITT, otherwise known as the <a href="http://reveng.sourceforge.net/crc-catalogue/16.htm#crc.cat.kermit">KERMIT CRC</a>.  </p>
<p id="rfc.section.B.1.2.p.3">Individual frames are terminated with a frame delimiter byte called the 'flag' byte (<samp>0x7E</samp>).  </p>
<p id="rfc.section.B.1.2.p.4">The following bytes values are considered <em>special</em> and should be escaped when present in data frames: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left">Byte Value</th>
<th class="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0x7E</td>
<td class="left">Frame Delimiter (Flag)</td>
</tr>
<tr>
<td class="left">0x7D</td>
<td class="left">Escape Byte</td>
</tr>
<tr>
<td class="left">0x11</td>
<td class="left">XON</td>
</tr>
<tr>
<td class="left">0x13</td>
<td class="left">XOFF</td>
</tr>
<tr>
<td class="left">0xF8</td>
<td class="left">Vendor-Specific</td>
</tr>
</tbody>
</table>
<p id="rfc.section.B.1.2.p.5">When present in a data frame, these byte values are escaped by prepending the escape byte (<samp>0x7D</samp>) and XORing the value with <samp>0x20</samp>.  </p>
<p id="rfc.section.B.1.2.p.6">When receiving a frame, the CRC must be verified after the frame is unescaped. If the CRC value does not match what is calculated for the frame data, the frame MUST be discarded. The implementation MAY indicate the failure to higher levels to handle as they see fit, but MUST NOT attempt to process the deceived frame.  </p>
<p id="rfc.section.B.1.2.p.7">Consecutive flag bytes are entirely legal and MUST NOT be treated as a framing error. Consecutive flag bytes MAY be used as a way to wake up a sleeping NCP.  </p>
<p id="rfc.section.B.1.2.p.8">When first establishing a connection to the NCP, it is customary to send one or more flag bytes to ensure that any previously received data is discarded.  </p>
<h1 id="rfc.appendix.B.2">
<a href="#rfc.appendix.B.2">B.2.</a> <a href="#spi-recommendations" id="spi-recommendations">SPI Recommendations</a>
</h1>
<p id="rfc.section.B.2.p.1">We <strong>RECOMMEND</strong> the use of the following standard SPI signals: </p>
<p></p>

<ul>
<li>
<samp>CS</samp>:   (AP-to-NCP) Chip Select</li>
<li>
<samp>CLK</samp>:  (AP-to-NCP) Clock</li>
<li>
<samp>MOSI</samp>: Master-Output/Slave-Input</li>
<li>
<samp>MISO</samp>: Master-Input/Slave-Output</li>
<li>
<samp>INT</samp>:  (NCP-to-AP) Host Interrupt</li>
<li>
<samp>RES</samp>:  (AP-to-NCP) NCP Hardware Reset</li>
</ul>

<p> </p>
<p id="rfc.section.B.2.p.3">The <samp>INT</samp> signal is used by the NCP to indicate to the AP that the NCP has frames pending to send to it. When asserted, the AP SHOULD initiate a SPI transaction in a timely manner.  </p>
<p id="rfc.section.B.2.p.4">We RECOMMEND the following SPI properties: </p>
<p></p>

<ul>
<li>
<samp>CS</samp> is active low.</li>
<li>
<samp>CLK</samp> is active high.</li>
<li>
<samp>CLK</samp> speed is larger than 500 kHz.</li>
<li>Data is valid on leading edge of <samp>CLK</samp>.</li>
<li>Data is sent in multiples of 8-bits (bytes).</li>
<li>Bytes are sent most-significant bit first.</li>
</ul>

<p> </p>
<p id="rfc.section.B.2.p.6">This recommended configuration may be adjusted depending on the individual needs of the application or product.  </p>
<h1 id="rfc.appendix.B.2.1">
<a href="#rfc.appendix.B.2.1">B.2.1.</a> <a href="#spi-framing-protocol" id="spi-framing-protocol">SPI Framing Protocol</a>
</h1>
<p id="rfc.section.B.2.1.p.1">Each SPI frame starts with a 5-byte frame header: </p>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">Bytes:</th>
<th class="center">1</th>
<th class="center">2</th>
<th class="center">2</th>
</tr></thead>
<tbody><tr>
<td class="center">Fields:</td>
<td class="center">HDR</td>
<td class="center">RECV_LEN</td>
<td class="center">DATA_LEN</td>
</tr></tbody>
</table>
<p></p>

<ul>
<li>
<samp>HDR</samp>: The first byte is the header byte (defined below)</li>
<li>
<samp>RECV_LEN</samp>: The second and third bytes indicate the largest frame size that that device is ready to receive. If zero, then the other device must not send any data. (Little endian)</li>
<li>
<samp>DATA_LEN</samp>: The fourth and fifth bytes indicate the size of the pending data frame to be sent to the other device. If this value is equal-to or less-than the number of bytes that the other device is willing to receive, then the data of the frame is immediately after the header. (Little Endian)</li>
</ul>

<p> </p>
<p id="rfc.section.B.2.1.p.3">The <samp>HDR</samp> byte is defined as: </p>
<pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
|RST|CRC|CCF|  RESERVED |PATTERN|
+---+---+---+---+---+---+---+---+
</pre>
<p></p>

<ul>
<li>
<samp>RST</samp>: This bit is set when that device has been reset since the last time <samp>CS</samp> was asserted.</li>
<li>
<samp>CRC</samp>: This bit is set when that device supports writing a 16-bit CRC at the end of the data. The CRC length is NOT included in DATA_LEN.</li>
<li>
<samp>CCF</samp>: "CRC Check Failure". Set if the CRC check on the last received frame failed, cleared to zero otherwise. This bit is only used if both sides support CRC.</li>
<li>
<samp>RESERVED</samp>: These bits are all reserved for future used. They MUST be cleared to zero and MUST be ignored if set.</li>
<li>
<samp>PATTERN</samp>: These bits are set to a fixed value to help distinguish valid SPI frames from garbage (by explicitly making <samp>0xFF</samp> and <samp>0x00</samp> invalid values). Bit 6 MUST be set to be one and bit 7 MUST be cleared (0). A frame received that has any other values for these bits MUST be dropped.</li>
</ul>

<p> </p>
<p id="rfc.section.B.2.1.p.5">Prior to a sending or receiving a frame, the master MAY send a 5-byte frame with zeros for both the max receive frame size and the the contained frame length. This will induce the slave device to indicate the length of the frame it wants to send (if any) and indicate the largest frame it is capable of receiving at the moment. This allows the master to calculate the size of the next transaction. Alternatively, if the master has a frame to send it can just go ahead and send a frame of that length and determine if the frame was accepted by checking that the <samp>RECV_LEN</samp> from the slave frame is larger than the frame the master just tried to send. If the <samp>RECV_LEN</samp> is smaller then the frame wasn't accepted and will need to be transmitted again.  </p>
<p id="rfc.section.B.2.1.p.6">This protocol can be used either unidirectionally or bidirectionally, determined by the behavior of the master and the slave.  </p>
<p id="rfc.section.B.2.1.p.7">If the the master notices <samp>PATTERN</samp> is not set correctly, the master should consider the transaction to have failed and try again after 10 milliseconds, retrying up to 200 times. After unsuccessfully trying 200 times in a row, the master MAY take appropriate remedial action (like a NCP hardware reset, or indicating a communication failure to a user interface).  </p>
<p id="rfc.section.B.2.1.p.8">At the end of the data of a frame is an optional 16-bit CRC, support for which is indicated by the <samp>CRC</samp> bit of the <samp>HDR</samp> byte being set. If these bits are set for both the master and slave frames, then CRC checking is enabled on both sides, effectively requiring that frame sizes be two bytes longer than would be otherwise required. The CRC is calculated using the same mechanism used for the CRC calculation in HDLC-Lite (See <a href="#hdlc-lite" class="xref">Appendix B.1.2</a>). When both of the <samp>CRC</samp> bits are set, both sides must verify that the <samp>CRC</samp> is valid before accepting the frame. If not enough bytes were clocked out for the CRC to be read, then the frame must be ignored. If enough bytes were clocked out to perform a CRC check, but the CRC check fails, then the frame must be rejected and the <samp>CRC_FAIL</samp> bit on the next frame (and ONLY the next frame) MUST be set.  </p>
<h1 id="rfc.appendix.B.3">
<a href="#rfc.appendix.B.3">B.3.</a> <a href="#i2c-recommendations" id="i2c-recommendations">I2C Recommendations</a>
</h1>
<p id="rfc.section.B.3.p.1">TBD </p>
<p><a id="CREF17" class="info">[CREF17]<span class="info">RQ: It may make sense to have a look at what Bluetooth HCI is doing for native I2C framing and go with that.</span></a></p>
<h1 id="rfc.appendix.B.4">
<a href="#rfc.appendix.B.4">B.4.</a> <a href="#native-usb-recommendations" id="native-usb-recommendations">Native USB Recommendations</a>
</h1>
<p id="rfc.section.B.4.p.1">TBD </p>
<p><a id="CREF18" class="info">[CREF18]<span class="info">RQ: It may make sense to have a look at what Bluetooth HCI is doing for native USB framing and go with that.</span></a></p>
<h1 id="rfc.appendix.C">
<a href="#rfc.appendix.C">Appendix C.</a> <a href="#test-vectors" id="test-vectors">Test Vectors</a>
</h1>
<h1 id="rfc.appendix.C.1">
<a href="#rfc.appendix.C.1">C.1.</a> <a href="#test-vector-packed-unsigned-integer" id="test-vector-packed-unsigned-integer">Test Vector: Packed Unsigned Integer</a>
</h1>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="right">Decimal Value</th>
<th class="left">Packet Byte Encoding</th>
</tr></thead>
<tbody>
<tr>
<td class="right">0</td>
<td class="left"><samp>00</samp></td>
</tr>
<tr>
<td class="right">1</td>
<td class="left"><samp>01</samp></td>
</tr>
<tr>
<td class="right">127</td>
<td class="left"><samp>7F</samp></td>
</tr>
<tr>
<td class="right">128</td>
<td class="left"><samp>80 01</samp></td>
</tr>
<tr>
<td class="right">129</td>
<td class="left"><samp>81 01</samp></td>
</tr>
<tr>
<td class="right">1,337</td>
<td class="left"><samp>B9 0A</samp></td>
</tr>
<tr>
<td class="right">16,383</td>
<td class="left"><samp>FF 7F</samp></td>
</tr>
<tr>
<td class="right">16,384</td>
<td class="left"><samp>80 80 01</samp></td>
</tr>
<tr>
<td class="right">16,385</td>
<td class="left"><samp>81 80 01</samp></td>
</tr>
<tr>
<td class="right">2,097,151</td>
<td class="left"><samp>FF FF 7F</samp></td>
</tr>
</tbody>
</table>
<p><a id="CREF19" class="info">[CREF19]<span class="info">RQ: The PUI test-vector encodings need to be verified.</span></a></p>
<h1 id="rfc.appendix.C.2">
<a href="#rfc.appendix.C.2">C.2.</a> <a href="#test-vector-reset-command" id="test-vector-reset-command">Test Vector: Reset Command</a>
</h1>
<p></p>

<ul>
<li>NLI: 0</li>
<li>TID: 0</li>
<li>CMD: 1 (<samp>CMD_RESET</samp>)</li>
</ul>

<p> </p>
<p id="rfc.section.C.2.p.2">Frame: </p>
<pre>
80 01
</pre>
<h1 id="rfc.appendix.C.3">
<a href="#rfc.appendix.C.3">C.3.</a> <a href="#test-vector-reset-notification" id="test-vector-reset-notification">Test Vector: Reset Notification</a>
</h1>
<p></p>

<ul>
<li>NLI: 0</li>
<li>TID: 0</li>
<li>CMD: 6 (<samp>CMD_VALUE_IS</samp>)</li>
<li>PROP: 0 (<samp>PROP_LAST_STATUS</samp>)</li>
<li>VALUE: 114 (<samp>STATUS_RESET_SOFTWARE</samp>)</li>
</ul>

<p> </p>
<p id="rfc.section.C.3.p.2">Frame: </p>
<pre>
80 06 00 72
</pre>
<h1 id="rfc.appendix.C.4">
<a href="#rfc.appendix.C.4">C.4.</a> <a href="#test-vector-inbound-ipv6-packet" id="test-vector-inbound-ipv6-packet">Test Vector: Inbound IPv6 Packet</a>
</h1>
<p id="rfc.section.C.4.p.1">CMD_VALUE_IS(PROP_STREAM_NET) </p>
<p><a id="CREF20" class="info">[CREF20]<span class="info">RQ: FIXME: This test vector is incomplete.</span></a></p>
<h1 id="rfc.appendix.C.5">
<a href="#rfc.appendix.C.5">C.5.</a> <a href="#test-vector-outbound-ipv6-packet" id="test-vector-outbound-ipv6-packet">Test Vector: Outbound IPv6 Packet</a>
</h1>
<p id="rfc.section.C.5.p.1">CMD_VALUE_SET(PROP_STREAM_NET) </p>
<p><a id="CREF21" class="info">[CREF21]<span class="info">RQ: FIXME: This test vector is incomplete.</span></a></p>
<h1 id="rfc.appendix.D">
<a href="#rfc.appendix.D">Appendix D.</a> <a href="#appendix-comparison" id="appendix-comparison">Comparison with other protocols</a>
</h1>
<p id="rfc.section.D.p.1">The problem of needing to manage a connectivity peripheral attached to a general-purpose computer is not new. The Hayes Command Set (TODO:CITE), for example, has been in use since 1981 and quickly became a ubiquitous de-facto standard for configuring dial-up modems and other similar peripherals. In more recent times, the standardized Bluetooth HCI protocol (TODO:CITE) helps to ensure plug-and-play interoperability between the operating system and the Bluetooth peripheral.  </p>
<p id="rfc.section.D.p.2">IEEE 802.15.4 (TODO:CITE) based low-power wireless networks are quickly becoming ubiquitous, and with the introduction of 6LoWPAN (<a href="#RFC4944" class="xref">[RFC4944]</a>), IPv6 connectivity is now possible on these networks.  6LoWPAN-based network technologies such as Thread(R) and ZigBee(R) IP additionally provide additional features such as network security, mesh-networking, and ultra-low-power operation. To fully realize low-power operation, a great deal of the IPv6 network and routing stack needs to be implemented directly on the connectivity peripheral.  With that, we again find ourselves with a question of how best to communicate with and manage this new class of peripheral.  There have been a wide range of solutions to this problem, each with significant drawbacks: </p>
<p></p>

<ul>
<li>Using SLIP (<a href="#RFC1055" class="xref">[RFC1055]</a>) <ul>
<li>UART-only</li>
<li>Management must be handled out-of-band</li>
<li>Widely supported</li>
</ul>
</li>
<li>Using slipmux (<a href="#I-D.bormann-t2trg-slipmux" class="xref">[I-D.bormann-t2trg-slipmux]</a>) <ul>
<li>UART-only</li>
<li>Management in-band, but is managed using CoAP. Exact details of management protocol are not specified.</li>
<li>Backward compatible with existing SLIP implementations.</li>
</ul>
</li>
<li>USB CDC-ECM for data, using some other USB protocol for management (TODO:CITE) <ul>
<li>USB-only</li>
<li>Somewhat Plug-and-play (appears as an ethernet device)</li>
<li>Mismatched network layer: CDC-ECM is layer-2, whereas IPv6 is layer-3. This leads to the requirement of clever work-arounds that can't satisfactorily handle all cases.</li>
<li>Bespoke, text-based management protocol</li>
</ul>
</li>
<li>Proprietary protocols <ul>
<li>Often covered by NDA</li>
<li>Not plug-and-play, can't easily swap parts with a different vendor</li>
<li>Can change often and without warning</li>
</ul>
</li>
</ul>

<p> </p>
<p id="rfc.section.D.p.4">Standardized interfaces to specific classes of connectivity peripherals significantly reduces the implementation and deployment burdens. Bluetooth, for example, has standardized on the Bluetooth HCI, which allows plug-and-play interoperability between Bluetooth peripherals. Similar to Bluetooth HCI, Spinel is frame-based and doesn't mandate the exact mechanism used to exchange frames between the peripheral and the host. It does, however, make recommendations, and we do likewise in <a href="#appendix-framing" class="xref">Appendix B</a>.  </p>
<p id="rfc.section.D.p.5">Note that, unlike PPP  or SLIP  (where the cable is the network medium and the serial port of the network interface), Spinel is not a link-layer network protocol between machines: it is an extension of the IPv6 stack into an external network co-processor.  Spinel isn't used for directly communicating with another independent host: it is instead used for communicating with an intermediary (the NCP) who acts on the behalf of the application processor. The network interface doesn't end at the serial port, rather it extends into the NCP---which might not have it's own independent IPv6 address.  </p>
<h1 id="rfc.appendix.E">
<a href="#rfc.appendix.E">Appendix E.</a> <a href="#acknowledgments" id="acknowledgments">Acknowledgments</a>
</h1>
<p id="rfc.section.E.p.1">Thread is a registered trademark of The Thread Group, Inc.  </p>
<p id="rfc.section.E.p.2">Special thanks to Nick Banks, Jonathan Hui, Abtin Keshavarzian, Yakun Xu, Piotr Szkotak, Arjuna Sivasithambaresan and Martin Turon for their substantial contributions and feedback related to this document.  </p>
<p id="rfc.section.E.p.3">This document was prepared using <a href="https://github.com/miekg/mmark">mmark</a> by (Miek Gieben) and <a href="http://xml2rfc.ietf.org/">xml2rfc (version 2)</a>.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Robert S. Quattlebaum</span> 
	  <span class="n hidden">
		<span class="family-name">Quattlebaum</span>
	  </span>
	</span>
	<span class="org vcardline">Nest Labs, Inc.</span>
	<span class="adr">
	  <span class="vcardline">3400 Hillview Ave.</span>

	  <span class="vcardline">
		<span class="locality">Palo Alto</span>,  
		<span class="region">California</span> 
		<span class="code">94304</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:rquattle@nestlabs.com">rquattle@nestlabs.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">James Woodyatt</span> (editor)
	  <span class="n hidden">
		<span class="family-name">Woodyatt</span>
	  </span>
	</span>
	<span class="org vcardline">Nest Labs, Inc.</span>
	<span class="adr">
	  <span class="vcardline">3400 Hillview Ave.</span>

	  <span class="vcardline">
		<span class="locality">Palo Alto</span>,  
		<span class="region">California</span> 
		<span class="code">94304</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jhw@nestlabs.com">jhw@nestlabs.com</a></span>

  </address>
</div>

</body>
</html>
